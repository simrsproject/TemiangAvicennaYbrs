CREATE TABLE BpjsApol (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    RegistrationNo VARCHAR(30),
    PrescriptionNo VARCHAR(30),
    TGLSJP DATETIME NULL,
    REFASALSJP VARCHAR(50) NULL,
    POLIRSP VARCHAR(10) NULL,
    KDJNSOBAT TINYINT NULL CHECK (KDJNSOBAT IN (1, 2, 3)),
    NORESEP VARCHAR(20) NULL,
    IDUSERSJP VARCHAR(20) NULL,
    TGLRSP DATETIME NULL,
    TGLPELRSP DATETIME NULL,
    KDDOKTER VARCHAR(10) NULL,
    ITERASI TINYINT NULL CHECK (ITERASI IN (0, 1)),
    NOSEP_KUNJUNGAN VARCHAR(50),
    NOKARTU VARCHAR(20),
    NAMA VARCHAR(100),
    FASKESASAL VARCHAR(50),
    NOAPOTIK VARCHAR(50),
    TGLRESEP DATE,
    BYTAGRSP TINYINT,
    BYVERRSP TINYINT,
    TGLENTRY DATE,
    METADATA_CODE VARCHAR(10),
    METADATA_MESSAGE VARCHAR(255),
    LastUpdateDateTime DATETIME NULL DEFAULT GETDATE(),
    LastUpdateByUserID VARCHAR(50) NULL
);


CREATE TABLE BpjsApolDetail (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    PrescriptionNo VARCHAR(30),
    SequenceNo VARCHAR(3),
    ParentNo VARCHAR(3),
    BpjsApolID INT NULL,
    NOSJP VARCHAR(50) NULL,
    NORESEP VARCHAR(20) NULL,
    JNSROBT VARCHAR(10) NULL,
    KDOBT VARCHAR(20) NULL,
    NMOBAT VARCHAR(100) NULL,
    SIGNA1OBT INT NULL,
    SIGNA2OBT INT NULL,
    PERMINTAAN INT NULL,
    JMLOBT INT NULL,
    JHO INT NULL,
    CATKHSOBT VARCHAR(255),
    METADATA_CODE VARCHAR(10),
    METADATA_MESSAGE VARCHAR(255),
    LastUpdateDateTime DATETIME NULL DEFAULT GETDATE(),
    LastUpdateByUserID VARCHAR(50) NULL,
    FOREIGN KEY (BpjsApolID) REFERENCES BpjsApol(ID)
);
