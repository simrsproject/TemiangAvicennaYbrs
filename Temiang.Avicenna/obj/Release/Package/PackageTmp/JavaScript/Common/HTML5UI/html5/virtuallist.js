(function(b,a){a("kendo.virtuallist",["kendo.data"],b);
}(function(){var a={id:"virtuallist",name:"VirtualList",category:"framework",depends:["data"],hidden:true};
(function(b,N){var v=window.kendo,M=v.ui,S=M.Widget,i=M.DataBoundWidget,E=b.proxy,C=/^\d+(\.\d+)?%$/i,T="k-virtual-wrap",R="k-virtual-list",h="k-virtual-content",x="k-list",o="k-group-header",P="k-virtual-item",t="k-item",p="k-height-container",n="k-group",J="k-state-selected",k="k-state-focused",q="k-state-hover",f="change",g="click",y="listBound",u="itemChange",c="activate",j="deactivate",O=".VirtualList";
function w(U){return U[U.length-1];
}function L(U){return U instanceof Array?U:[U];
}function s(U){return typeof U==="string"||typeof U==="number"||typeof U==="boolean";
}function m(W,V,U){return Math.ceil(W*V/U);
}function d(W,U,X){var V=document.createElement(X||"div");
if(U){V.className=U;
}W.appendChild(V);
return V;
}function l(){var V=b('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>'),U;
V.css({position:"absolute",left:"-200000px",visibility:"hidden"});
V.appendTo(document.body);
U=parseFloat(v.getComputedStyles(V.find(".k-item")[0],["line-height"])["line-height"]);
V.remove();
return U;
}function e(W,U,V){return{down:W*V,up:W*(U-1-V)};
}function z(V,W){var U=(V.listScreens-1-V.threshold)*W;
var X=V.threshold*W;
return function(Z,aa,Y){if(aa>Y){return aa-Z.top<U;
}else{return Z.top===0||aa-Z.top>X;
}};
}function I(V,U){return function(W){return U(V.scrollTop,W);
};
}function K(U){return function(W,V){U(W.items,W.index,V);
return W;
};
}function D(U,V){if(v.support.browser.msie&&v.support.browser.version<10){U.style.top=V+"px";
}else{U.style.webkitTransform="translateY("+V+"px)";
U.style.transform="translateY("+V+"px)";
}}function A(U,V){return function(W,X){for(var Y=0,Z=W.length;
Y<Z;
Y++){U(W[Y],X[Y],V);
if(X[Y].item){this.trigger(u,{item:b(W[Y]),data:X[Y].item,ns:v.ui});
}}};
}function H(V,U){var W;
if(U>0){W=V.splice(0,U);
V.push.apply(V,W);
}else{W=V.splice(U,-U);
V.unshift.apply(V,W);
}return W;
}function F(V,U,X){var W=X.template;
V=b(V);
if(!U.item){W=X.placeholderTemplate;
}if(U.index===0&&this.header&&U.group){this.header.html(X.fixedGroupTemplate(U.group));
}this.angular("cleanup",function(){return{elements:[V]};
});
V.attr("data-uid",U.item?U.item.uid:"").attr("data-offset-index",U.index);
if(this.options.columns&&this.options.columns.length&&U.item){V.html(G(this.options,U.item,X));
}else{V.html(W(U.item||{}));
}V.toggleClass(k,U.current);
V.toggleClass(J,U.selected);
V.toggleClass("k-first",U.newGroup);
V.toggleClass("k-last",U.isLastGroupedItem);
V.toggleClass("k-loading-item",!U.item);
if(U.index!==0&&U.newGroup){b("<div class="+n+"></div>").appendTo(V).html(X.groupTemplate(U.group));
}if(U.top!==N){D(V[0],U.top);
}this.angular("compile",function(){return{elements:[V],data:[{dataItem:U.item,group:U.group,newGroup:U.newGroup}]};
});
}function G(Z,W,aa){var Y="";
for(var X=0;
X<Z.columns.length;
X++){var U=Z.columns[X].width;
var V=parseInt(U,10);
var ab="";
if(U){ab+="style='width:";
ab+=V;
ab+=C.test(U)?"%":"px";
ab+=";'";
}Y+="<span class='k-cell' "+ab+">";
Y+=aa["column"+X](W);
Y+="</span>";
}return Y;
}function B(ab,Z){var Y=Z.length;
var ac=ab.length;
var V;
var W;
var X,aa;
var U=[];
var ad=[];
if(ac){for(X=0;
X<ac;
X++){V=ab[X];
W=false;
for(aa=0;
aa<Y;
aa++){if(V===Z[aa]){W=true;
U.push({index:X,item:V});
break;
}}if(!W){ad.push(V);
}}}return{changed:U,unchanged:ad};
}function r(U){return U&&U.state()!=="resolved";
}var Q=i.extend({init:function(U,V){var W=this;
W.bound(false);
W._fetching=false;
S.fn.init.call(W,U,V);
if(!W.options.itemHeight){W.options.itemHeight=l();
}V=W.options;
W.element.addClass(x+" "+R).attr("role","listbox");
W.content=W.element.wrap("<div unselectable='on' class='"+h+"'></div>").parent();
W.wrapper=W.content.wrap("<div class='"+T+"'></div>").parent();
W.header=W.content.before("<div class='"+o+"'></div>").prev();
if(V.columns&&V.columns.length){W.element.removeClass(x);
}W.element.on("mouseenter"+O,"li:not(.k-loading-item)",function(){b(this).addClass(q);
}).on("mouseleave"+O,"li",function(){b(this).removeClass(q);
});
W._values=L(W.options.value);
W._selectedDataItems=[];
W._selectedIndexes=[];
W._rangesList={};
W._promisesList=[];
W._optionID=v.guid();
W._templates();
W.setDataSource(V.dataSource);
W.content.on("scroll"+O,v.throttle(function(){W._renderItems();
W._triggerListBound();
},V.delay));
W._selectable();
},options:{name:"VirtualList",autoBind:true,delay:100,height:null,listScreens:4,threshold:0.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:false,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",mapValueTo:"index",valueMapper:null},events:[f,g,y,u,c,j],setOptions:function(U){S.fn.setOptions.call(this,U);
if(this._selectProxy&&this.options.selectable===false){this.element.off(g,"."+P,this._selectProxy);
}else{if(!this._selectProxy&&this.options.selectable){this._selectable();
}}this._templates();
this.refresh();
},items:function(){return b(this._items);
},destroy:function(){this.wrapper.off(O);
this.dataSource.unbind(f,this._refreshHandler);
S.fn.destroy.call(this);
},setDataSource:function(V){var W=this;
var U=V||{};
var X;
U=b.isArray(U)?{data:U}:U;
U=v.data.DataSource.create(U);
if(W.dataSource){W.dataSource.unbind(f,W._refreshHandler);
W._clean();
W.bound(false);
W._deferValueSet=true;
X=W.value();
W.value([]);
W.mute(function(){W.value(X);
});
}else{W._refreshHandler=b.proxy(W.refresh,W);
}W.dataSource=U.bind(f,W._refreshHandler);
W.setDSFilter(U.filter());
if(U.view().length!==0){W.refresh();
}else{if(W.options.autoBind){U.fetch();
}}},skip:function(){return this.dataSource.currentRangeStart();
},_triggerListBound:function(){var V=this;
var U=V.skip();
if(V.bound()&&!V._selectingValue&&V._skip!==U){V._skip=U;
V.trigger(y);
}},_getValues:function(U){var V=this._valueGetter;
return b.map(U,function(W){return V(W);
});
},_highlightSelectedItems:function(){for(var U=0;
U<this._selectedDataItems.length;
U++){var V=this._getElementByDataItem(this._selectedDataItems[U]);
if(V.length){V.addClass(J);
}}},refresh:function(V){var Z=this;
var U=V&&V.action;
var X=U==="itemchange";
var W=this.isFiltered();
var Y;
if(Z._mute){return;
}Z._deferValueSet=false;
if(!Z._fetching){if(W){Z.focus(0);
}Z._createList();
if(!U&&Z._values.length&&!W&&!Z.options.skipUpdateOnBind&&!Z._emptySearch){Z._selectingValue=true;
Z.bound(true);
Z.value(Z._values,true).done(function(){Z._selectingValue=false;
Z._triggerListBound();
});
}else{Z.bound(true);
Z._highlightSelectedItems();
Z._triggerListBound();
}}else{if(Z._renderItems){Z._renderItems(true);
}Z._triggerListBound();
}if(X||U==="remove"){Y=B(Z._selectedDataItems,V.items);
if(Y.changed.length){if(X){Z.trigger("selectedItemChange",{items:Y.changed});
}else{Z.value(Z._getValues(Y.unchanged));
}}}Z._fetching=false;
},removeAt:function(U){this._selectedIndexes.splice(U,1);
this._values.splice(U,1);
return{position:U,dataItem:this._selectedDataItems.splice(U,1)[0]};
},setValue:function(U){this._values=L(U);
},value:function(X,U){var W=this;
if(X===N){return W._values.slice();
}if(X===null){X=[];
}X=L(X);
if(!W._valueDeferred||W._valueDeferred.state()==="resolved"){W._valueDeferred=b.Deferred();
}var V=W.options.selectable==="multiple"&&W.select().length&&X.length;
if(V||!X.length){W.select(-1);
}W._values=X;
if(W.bound()&&!W._mute&&!W._deferValueSet||U){W._prefetchByValue(X);
}return W._valueDeferred;
},_checkValuesOrder:function(V){if(this._removedAddedIndexes&&this._removedAddedIndexes.length===V.length){var U=this._removedAddedIndexes.slice();
this._removedAddedIndexes=null;
return U;
}return V;
},_prefetchByValue:function(ac){var ab=this,U=ab._dataView,ad=ab._valueGetter,Z=ab.options.mapValueTo,Y,aa=false,V=[];
for(var W=0;
W<ac.length;
W++){for(var X=0;
X<U.length;
X++){Y=U[X].item;
if(Y){aa=s(Y)?ac[W]===Y:ac[W]===ad(Y);
if(aa){V.push(U[X].index);
}}}}if(V.length===ac.length){ab._values=[];
ab.select(V);
return;
}if(typeof ab.options.valueMapper==="function"){ab.options.valueMapper({value:this.options.selectable==="multiple"?ac:ac[0],success:function(ae){if(Z==="index"){ab.mapValueToIndex(ae);
}else{if(Z==="dataItem"){ab.mapValueToDataItem(ae);
}}}});
}else{if(!ab.value()[0]){ab.select([-1]);
}else{ab._selectingValue=false;
ab._triggerListBound();
}}},mapValueToIndex:function(U){if(U===N||U===-1||U===null){U=[];
}else{U=L(U);
}if(!U.length){U=[-1];
}else{var V=this._deselect([]).removed;
if(V.length){this._triggerChange(V,[]);
}}this.select(U);
},mapValueToDataItem:function(V){var Y,U;
if(V===N||V===null){V=[];
}else{V=L(V);
}if(!V.length){this.select([-1]);
}else{Y=b.map(this._selectedDataItems,function(aa,Z){return{index:Z,dataItem:aa};
});
U=b.map(V,function(aa,Z){return{index:Z,dataItem:aa};
});
this._selectedDataItems=V;
this._selectedIndexes=[];
for(var W=0;
W<this._selectedDataItems.length;
W++){var X=this._getElementByDataItem(this._selectedDataItems[W]);
this._selectedIndexes.push(this._getIndecies(X)[0]);
X.addClass(J);
}this._triggerChange(Y,U);
if(this._valueDeferred){this._valueDeferred.resolve();
}}},deferredRange:function(X){var U=this.dataSource;
var ac=this.itemCount;
var aa=this._rangesList;
var ab=b.Deferred();
var V=[];
var Y=Math.floor(X/ac)*ac;
var W=Math.ceil(X/ac)*ac;
var Z=W===Y?[W]:[Y,W];
b.each(Z,function(ad,ah){var af=ah+ac;
var ag=aa[ah];
var ae;
if(!ag||ag.end!==af){ae=b.Deferred();
aa[ah]={end:af,deferred:ae};
U._multiplePrefetch(ah,ac,function(){ae.resolve();
});
}else{ae=ag.deferred;
}V.push(ae);
});
b.when.apply(b,V).then(function(){ab.resolve();
});
return ab;
},prefetch:function(U){var X=this,W=this.itemCount,V=!X._promisesList.length;
if(!r(X._activeDeferred)){X._activeDeferred=b.Deferred();
X._promisesList=[];
}b.each(U,function(Y,Z){X._promisesList.push(X.deferredRange(X._getSkip(Z,W)));
});
if(V){b.when.apply(b,X._promisesList).done(function(){X._promisesList=[];
X._activeDeferred.resolve();
});
}return X._activeDeferred;
},_findDataItem:function(X,W){var U;
if(this.options.type==="group"){for(var V=0;
V<X.length;
V++){U=X[V].items;
if(U.length<=W){W=W-U.length;
}else{return U[W];
}}}return X[W];
},_getRange:function(U,V){return this.dataSource._findRange(U,Math.min(U+V,this.dataSource.total()));
},dataItemByIndex:function(U){var X=this;
var W=X.itemCount;
var V=X._getSkip(U,W);
var Y=this._getRange(V,W);
if(!X._getRange(V,W).length){return null;
}if(X.options.type==="group"){v.ui.progress(b(X.wrapper),true);
X.mute(function(){X.dataSource.range(V,W,function(){v.ui.progress(b(X.wrapper),false);
});
Y=X.dataSource.view();
});
}return X._findDataItem(Y,[U-V]);
},selectedDataItems:function(){return this._selectedDataItems.slice();
},scrollWith:function(U){this.content.scrollTop(this.content.scrollTop()+U);
},scrollTo:function(U){this.content.scrollTop(U);
},scrollToIndex:function(U){this.scrollTo(U*this.options.itemHeight);
},focus:function(U){var X,aa,W,V,ab=this.options.itemHeight,Y=this._optionID,ad=true;
if(U===N){V=this.element.find("."+k);
return V.length?V:null;
}if(typeof U==="function"){W=this.dataSource.flatView();
for(var Z=0;
Z<W.length;
Z++){if(U(W[Z])){U=Z;
break;
}}}if(U instanceof Array){U=w(U);
}if(isNaN(U)){X=b(U);
aa=parseInt(b(X).attr("data-offset-index"),10);
}else{aa=U;
X=this._getElementByIndex(aa);
}if(aa===-1){this.element.find("."+k).removeClass(k);
this._focusedIndex=N;
return;
}if(X.length){if(X.hasClass(k)){ad=false;
}if(this._focusedIndex!==N){V=this._getElementByIndex(this._focusedIndex);
V.removeClass(k).removeAttr("id");
if(ad){this.trigger(j);
}}this._focusedIndex=aa;
X.addClass(k).attr("id",Y);
var ac=this._getElementLocation(aa);
if(ac==="top"){this.scrollTo(aa*ab);
}else{if(ac==="bottom"){this.scrollTo(aa*ab+ab-this._screenHeight);
}else{if(ac==="outScreen"){this.scrollTo(aa*ab);
}}}if(ad){this.trigger(c);
}}else{this._focusedIndex=aa;
this.items().removeClass(k);
this.scrollToIndex(aa);
}},focusIndex:function(){return this._focusedIndex;
},focusFirst:function(){this.scrollTo(0);
this.focus(0);
},focusLast:function(){var U=this.dataSource.total();
this.scrollTo(this.heightContainer.offsetHeight);
this.focus(U-1);
},focusPrev:function(){var V=this._focusedIndex;
var U;
if(!isNaN(V)&&V>0){V-=1;
this.focus(V);
U=this.focus();
if(U&&U.hasClass("k-loading-item")){V+=1;
this.focus(V);
}return V;
}else{V=this.dataSource.total()-1;
this.focus(V);
return V;
}},focusNext:function(){var V=this._focusedIndex;
var W=this.dataSource.total()-1;
var U;
if(!isNaN(V)&&V<W){V+=1;
this.focus(V);
U=this.focus();
if(U&&U.hasClass("k-loading-item")){V-=1;
this.focus(V);
}return V;
}else{V=0;
this.focus(V);
return V;
}},_triggerChange:function(V,U){V=V||[];
U=U||[];
if(V.length||U.length){this.trigger(f,{removed:V,added:U});
}},select:function(U){var af=this,Y,Z,ae=af.options.selectable!=="multiple",ab=r(af._activeDeferred),X=this.isFiltered(),aa,V,ad,ac=[];
if(U===N){return af._selectedIndexes.slice();
}if(!af._selectDeferred||af._selectDeferred.state()==="resolved"){af._selectDeferred=b.Deferred();
}Y=af._getIndecies(U);
aa=ae&&!X&&w(Y)===w(this._selectedIndexes);
ac=af._deselectCurrentValues(Y);
if(ac.length||!Y.length||aa){af._triggerChange(ac);
if(af._valueDeferred){af._valueDeferred.resolve().promise();
}return af._selectDeferred.resolve().promise();
}if(Y.length===1&&Y[0]===-1){Y=[];
}Z=Y;
ad=af._deselect(Y);
ac=ad.removed;
Y=ad.indices;
if(ae){ab=false;
if(Y.length){Y=[w(Y)];
}}var W=function(){var ag=af._select(Y);
if(Z.length===Y.length||ae){af.focus(Y);
}af._triggerChange(ac,ag);
if(af._valueDeferred){af._valueDeferred.resolve();
}af._selectDeferred.resolve();
};
V=af.prefetch(Y);
if(!ab){if(V){V.done(W);
}else{W();
}}return af._selectDeferred.promise();
},bound:function(U){if(U===N){return this._listCreated;
}this._listCreated=U;
},mute:function(U){this._mute=true;
E(U(),this);
this._mute=false;
},setDSFilter:function(U){this._lastDSFilter=b.extend({},U);
},isFiltered:function(){if(!this._lastDSFilter){this.setDSFilter(this.dataSource.filter());
}return !v.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter);
},skipUpdate:b.noop,_getElementByIndex:function(U){return this.items().filter(function(W,V){return U===parseInt(b(V).attr("data-offset-index"),10);
});
},_getElementByDataItem:function(U){var V=this._dataView,Z=this._valueGetter,W,Y;
for(var X=0;
X<V.length;
X++){Y=V[X].item&&s(V[X].item)?V[X].item===U:V[X].item&&U&&Z(V[X].item)==Z(U);
if(Y){W=V[X];
break;
}}return W?this._getElementByIndex(W.index):b();
},_clean:function(){this.result=N;
this._lastScrollTop=N;
this._skip=N;
b(this.heightContainer).remove();
this.heightContainer=N;
this.element.empty();
},_height:function(){var U=!!this.dataSource.view().length,V=this.options.height,W=this.options.itemHeight,X=this.dataSource.total();
if(!U){V=0;
}else{if(V/W>X){V=X*W;
}}return V;
},setScreenHeight:function(){var U=this._height();
this.content.height(U);
this._screenHeight=U;
},screenHeight:function(){return this._screenHeight;
},_getElementLocation:function(U){var Z=this.content.scrollTop(),Y=this._screenHeight,V=this.options.itemHeight,ab=U*V,aa=ab+V,X=Z+Y,W;
if(ab===Z-V||aa>Z&&ab<Z){W="top";
}else{if(ab===X||ab<X&&X<aa){W="bottom";
}else{if(ab>=Z&&ab<=Z+(Y-V)){W="inScreen";
}else{W="outScreen";
}}}return W;
},_templates:function(){var X=this.options;
var Y={template:X.template,placeholderTemplate:X.placeholderTemplate,groupTemplate:X.groupTemplate,fixedGroupTemplate:X.fixedGroupTemplate};
if(X.columns){for(var V=0;
V<X.columns.length;
V++){var U=X.columns[V];
var Z=U.field?U.field.toString():"text";
Y["column"+V]=U.template||"#: "+Z+"#";
}}for(var W in Y){if(typeof Y[W]!=="function"){Y[W]=v.template(Y[W]||"");
}}this.templates=Y;
},_generateItems:function(V,U){var Y=[],W,X=this.options.itemHeight+"px";
while(U-->0){W=document.createElement("li");
W.tabIndex=-1;
W.className=P+" "+t;
W.setAttribute("role","option");
W.style.height=X;
W.style.minHeight=X;
V.appendChild(W);
Y.push(W);
}return Y;
},_saveInitialRanges:function(){var W=this.dataSource._ranges;
var U=b.Deferred();
U.resolve();
this._rangesList={};
for(var V=0;
V<W.length;
V++){this._rangesList[W[V].start]={end:W[V].end,deferred:U};
}},_createList:function(){var X=this,U=X.content.get(0),W=X.options,V=X.dataSource;
if(X.bound()){X._clean();
}X._saveInitialRanges();
X._buildValueGetter();
X.setScreenHeight();
X.itemCount=m(X._screenHeight,W.listScreens,W.itemHeight);
if(X.itemCount>V.total()){X.itemCount=V.total();
}X._items=X._generateItems(X.element[0],X.itemCount);
X._setHeight(W.itemHeight*V.total());
X.options.type=(V.group()||[]).length?"group":"flat";
if(X.options.type==="flat"){X.header.hide();
}else{X.header.show();
}X.getter=X._getter(function(){X._renderItems(true);
});
X._onScroll=function(aa,Y){var Z=X._listItems(X.getter);
return X._fixedHeader(aa,Z(aa,Y));
};
X._renderItems=X._whenChanged(I(U,X._onScroll),K(X._reorderList(X._items,b.proxy(F,X))));
X._renderItems();
X._calculateGroupPadding(X._screenHeight);
X._calculateColumnsHeaderPadding();
},_setHeight:function(V){var U,W=this.heightContainer;
if(!W){W=this.heightContainer=d(this.content[0],p);
}else{U=W.offsetHeight;
}if(V!==U){W.innerHTML="";
while(V>0){var X=Math.min(V,250000);
d(W).style.height=X+"px";
V-=X;
}}},_getter:function(){var X=null,U=this.dataSource,W=U.skip(),Z=this.options.type,Y=this.itemCount,V={};
if(U.pageSize()<Y){this.mute(function(){U.pageSize(Y);
});
}return function(af,ai){var ak=this;
if(!U.inRange(ai,Y)){if(X!==ai){X=ai;
W=ai;
if(ak._getterDeferred){ak._getterDeferred.reject();
}ak._getterDeferred=ak.deferredRange(ai);
ak._getterDeferred.then(function(){var al=ak._indexConstraint(ak.content[0].scrollTop);
ak._getterDeferred=null;
if(ai<=al&&al<=ai+Y){ak._fetching=true;
U.range(ai,Y);
}});
}return null;
}else{if(W!==ai){this.mute(function(){U.range(ai,Y);
W=ai;
});
}var aj;
if(Z==="group"){if(!V[ai]){var aa=V[ai]=[];
var ad=U.view();
for(var ae=0,ah=ad.length;
ae<ah;
ae++){var ab=ad[ae];
for(var ag=0,ac=ab.items.length;
ag<ac;
ag++){aa.push({item:ab.items[ag],group:ab.value});
}}}aj=V[ai][af-ai];
}else{aj=U.view()[af-ai];
}return aj;
}};
},_fixedHeader:function(ab,aa){var Y=this.currentVisibleGroup,Z=this.options.itemHeight,V=Math.floor((ab-aa.top)/Z),U=aa.items[V];
if(U&&U.item){var W=U.group;
if(W!==Y){var X=W||"";
this.header.html(this.templates.fixedGroupTemplate(X));
this.currentVisibleGroup=W;
}}return aa;
},_itemMapper:function(Z,Y,ag){var ac=this.options.type,aa=this.options.itemHeight,V=this._focusedIndex,af=false,U=false,ae=false,W=null,ad=false,ah=this._valueGetter;
if(ac==="group"){if(Z){ae=Y===0||this._currentGroup!==false&&this._currentGroup!==Z.group;
this._currentGroup=Z.group;
}W=Z?Z.group:null;
Z=Z?Z.item:null;
}if(this.options.mapValueTo==="dataItem"&&this._selectedDataItems.length&&Z){for(var X=0;
X<this._selectedDataItems.length;
X++){ad=ah(this._selectedDataItems[X])===ah(Z);
if(ad){af=true;
break;
}}}else{if(!this.isFiltered()&&ag.length&&Z){for(var ab=0;
ab<ag.length;
ab++){ad=s(Z)?ag[ab]===Z:ag[ab]===ah(Z);
if(ad){ag.splice(ab,1);
af=true;
break;
}}}}if(V===Y){U=true;
}return{item:Z?Z:null,group:W,newGroup:ae,selected:af,current:U,index:Y,top:Y*aa};
},_range:function(V){var X=this.itemCount,aa=this._values.slice(),Y=[],W;
this._view={};
this._currentGroup=false;
for(var U=V,Z=V+X;
U<Z;
U++){W=this._itemMapper(this.getter(U,V),U,aa);
if(Y[Y.length-1]){Y[Y.length-1].isLastGroupedItem=W.newGroup;
}Y.push(W);
this._view[W.index]=W;
}this._dataView=Y;
return Y;
},_getDataItemsCollection:function(W,V){var U=this._range(this._listIndex(W,V));
return{index:U.length?U[0].index:0,top:U.length?U[0].top:0,items:U};
},_listItems:function(){var V=this._screenHeight,U=this.options;
var W=z(U,V);
return b.proxy(function(aa,X){var Z=this.result,Y=this._lastScrollTop;
if(X||!Z||!W(Z,aa,Y)){Z=this._getDataItemsCollection(aa,Y);
}this._lastScrollTop=aa;
this.result=Z;
return Z;
},this);
},_whenChanged:function(W,U){var V;
return function(X){var Y=W(X);
if(Y!==V){V=Y;
U(Y,X);
}};
},_reorderList:function(W,X){var Y=this;
var V=W.length;
var U=-Infinity;
X=b.proxy(A(X,this.templates),this);
return function(ab,ac,aa){var Z=ac-U;
var ad,ae;
if(aa||Math.abs(Z)>=V){ad=W;
ae=ab;
}else{ad=H(W,Z);
ae=Z>0?ab.slice(-Z):ab.slice(0,-Z);
}X(ad,ae,Y.bound());
U=ac;
};
},_bufferSizes:function(){var U=this.options;
return e(this._screenHeight,U.listScreens,U.oppositeBuffer);
},_indexConstraint:function(W){var U=this.itemCount,V=this.options.itemHeight,X=this.dataSource.total();
return Math.min(Math.max(X-U,0),Math.max(0,Math.floor(W/V)));
},_listIndex:function(X,V){var U=this._bufferSizes(),W;
W=X-(X>V?U.down:U.up);
return this._indexConstraint(W);
},_selectable:function(){if(this.options.selectable){this._selectProxy=b.proxy(this,"_clickHandler");
this.element.on(g+O,"."+P,this._selectProxy);
}},getElementIndex:function(U){if(!(U instanceof jQuery)){return N;
}return parseInt(U.attr("data-offset-index"),10);
},_getIndecies:function(U){var Y=[],V;
if(typeof U==="function"){V=this.dataSource.flatView();
for(var X=0;
X<V.length;
X++){if(U(V[X])){Y.push(X);
break;
}}}if(typeof U==="number"){Y.push(U);
}var W=this.getElementIndex(U);
if(!isNaN(W)){Y.push(W);
}if(U instanceof Array){Y=U;
}return Y;
},_deselect:function(X){var ac=[],ah,U,ai=this._selectedIndexes,ag=this._selectedDataItems,ab=0,af=this.options.selectable,ad=0,aj=this._valueGetter,Y,aa,ae=null;
X=X.slice();
if(af===true||!X.length){for(var W=0;
W<ai.length;
W++){if(ai[W]!==N){this._getElementByIndex(ai[W]).removeClass(J);
}else{if(ag[W]){this._getElementByDataItem(ag[W]).removeClass(J);
}}ac.push({index:ai[W],position:W,dataItem:ag[W]});
}this._values=[];
this._selectedDataItems=[];
this._selectedIndexes=[];
}else{if(af==="multiple"){for(var V=0;
V<X.length;
V++){ae=null;
ab=b.inArray(X[V],ai);
U=this.dataItemByIndex(X[V]);
if(ab===-1&&U){for(var Z=0;
Z<ag.length;
Z++){aa=s(U)?ag[Z]===U:aj(ag[Z])===aj(U);
if(aa){Y=this._getElementByIndex(X[V]);
ae=this._deselectSingleItem(Y,Z,X[V],ad);
}}}else{ah=ai[ab];
if(ah!==N){Y=this._getElementByIndex(ah);
ae=this._deselectSingleItem(Y,ab,ah,ad);
}}if(ae){X.splice(V,1);
ac.push(ae);
ad++;
V--;
}}}}return{indices:X,removed:ac};
},_deselectSingleItem:function(V,W,Y,X){var U;
if(!V.hasClass("k-state-selected")){return;
}V.removeClass(J);
this._values.splice(W,1);
this._selectedIndexes.splice(W,1);
U=this._selectedDataItems.splice(W,1)[0];
return{index:Y,position:W+X,dataItem:U};
},_deselectCurrentValues:function(X){var U=this.element[0].children;
var ab,W,Z;
var ac=this._values;
var aa=[];
var V=0;
var Y;
if(this.options.selectable!=="multiple"||!this.isFiltered()){return[];
}if(X[0]===-1){b(U).removeClass("k-state-selected");
aa=b.map(this._selectedDataItems.slice(0),function(ad,ae){return{dataItem:ad,position:ae};
});
this._selectedIndexes=[];
this._selectedDataItems=[];
this._values=[];
return aa;
}for(;
V<X.length;
V++){Z=-1;
W=X[V];
if(this.dataItemByIndex(W)){ab=this._valueGetter(this.dataItemByIndex(W));
}for(Y=0;
Y<ac.length;
Y++){if(ab==ac[Y]){Z=Y;
break;
}}if(Z>-1){aa.push(this.removeAt(Z));
b(U[W]).removeClass("k-state-selected");
}}return aa;
},_getSkip:function(U,W){var V=U<W?1:Math.floor(U/W)+1;
return(V-1)*W;
},_select:function(X){var ab=this,Z=this.options.selectable!=="multiple",W=this.dataSource,V,Y,aa=this.itemCount,ac=this._valueGetter,U=[];
if(Z){ab._selectedIndexes=[];
ab._selectedDataItems=[];
ab._values=[];
}Y=W.skip();
b.each(X,function(ad,ae){var af=ab._getSkip(ae,aa);
ab.mute(function(){W.range(af,aa);
V=ab._findDataItem(W.view(),[ae-af]);
ab._selectedIndexes.push(ae);
ab._selectedDataItems.push(V);
ab._values.push(s(V)?V:ac(V));
U.push({index:ae,dataItem:V});
ab._getElementByIndex(ae).addClass(J);
W.range(Y,aa);
});
});
ab._values=ab._checkValuesOrder(ab._values);
return U;
},_clickHandler:function(U){var V=b(U.currentTarget);
if(!U.isDefaultPrevented()&&V.attr("data-uid")){this.trigger(g,{item:V});
}},_buildValueGetter:function(){this._valueGetter=v.getter(this.options.dataValueField);
},_calculateGroupPadding:function(W){var U=this.items().first(),V=this.header,X=0;
if(V[0]&&V[0].style.display!=="none"){if(W!=="auto"){X=v.support.scrollbar();
}X+=parseFloat(U.css("border-right-width"),10)+parseFloat(U.children(".k-group").css("right"),10);
V.css("padding-right",X);
}},_calculateColumnsHeaderPadding:function(){if(this.options.columns&&this.options.columns.length){var V=v.support.isRtl(this.wrapper);
var W=v.support.scrollbar();
var U=this.content.parent().parent().find(".k-grid-header");
var X=this.dataSource.total();
U.css(V?"padding-left":"padding-right",X?W:0);
}}});
v.ui.VirtualList=Q;
v.ui.plugin(Q);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
