(function(b,a){a("kendo.multiselect",["kendo.list","kendo.mobile.scroller","kendo.virtuallist"],b);
}(function(){var a={id:"multiselect",name:"MultiSelect",category:"web",description:"The MultiSelect widget allows the selection from pre-defined values.",depends:["list"],features:[{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]},{id:"virtualization",name:"VirtualList",description:"Support for virtualization",depends:["virtuallist"]}]};
(function(b,P){var t=window.kendo,O=t.ui,x=O.List,v=b.extend({A:65},t.keys),d=t._activeElement,D=t.data.ObservableArray,G=b.proxy,r="id",w="li",c="accept",m="filter",J="rebind",E="open",i="close",g="change",F="progress",K="select",k="deselect",e="aria-disabled",n="k-state-focused",L="k-state-selected",o="k-hidden",p="k-state-hover",M="k-state-disabled",B="k-no-click",l="disabled",I="readonly",f="off",C=".kendoMultiSelect",h="click"+C,u="keydown"+C,y="mouseenter"+C,z="mouseleave"+C,q=y+" "+z,H=/"/g,s=b.isArray,N=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"];
var A=x.extend({init:function(R,T){var U=this,S,Q;
U.ns=C;
x.fn.init.call(U,R,T);
U._optionsMap={};
U._customOptions={};
U._wrapper();
U._tagList();
U._input();
U._textContainer();
U._loader();
U._clearButton();
U._tabindex(U.input);
R=U.element.attr("multiple","multiple").hide();
T=U.options;
if(!T.placeholder){T.placeholder=R.data("placeholder");
}S=R.attr(r);
if(S){U._tagID=S+"_tag_active";
S=S+"_taglist";
U.tagList.attr(r,S);
U.input.attr("aria-describedby",S);
}U._initialOpen=true;
U._ariaLabel();
U._ariaSetLive();
U._dataSource();
U._ignoreCase();
U._popup();
U._tagTemplate();
U.requireValueMapper(U.options);
U._initList();
U._reset();
U._enable();
U._placeholder();
if(T.autoBind){U.dataSource.fetch();
}else{if(T.value){U._preselect(T.value);
}}Q=b(U.element).parents("fieldset").is(":disabled");
if(Q){U.enable(false);
}U._ariaSetSize(U.value().length);
t.notify(U);
U._toggleCloseVisibility();
},options:{name:"MultiSelect",tagMode:"multiple",enabled:true,autoBind:true,autoClose:true,highlightFirst:true,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:true,minLength:1,messages:{singleTag:"item(s) selected",clear:"clear",deleteTag:"delete",noData:"No data found."},enforceMinLength:false,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:false,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:true,autoWidth:false,popup:null},events:[E,i,g,K,k,"filtering","dataBinding","dataBound"],setDataSource:function(Q){this.options.dataSource=Q;
this._state="";
this._dataSource();
this.persistTagList=false;
this.listView.setDataSource(this.dataSource);
if(this.options.autoBind){this.dataSource.fetch();
}},setOptions:function(R){var Q=this._listOptions(R);
x.fn.setOptions.call(this,R);
this.listView.setOptions(Q);
this._accessors();
this._aria(this.tagList.attr(r));
this._tagTemplate();
this._placeholder();
this._clearButton();
},currentTag:function(Q){var R=this;
if(Q!==P){if(R._currentTag){R._currentTag.removeClass(n).removeAttr(r);
R._currentTag.find(".k-select").attr("aria-hidden",true);
R.input.removeAttr("aria-activedescendant");
}if(Q){Q.addClass(n).attr(r,R._tagID);
Q.find(".k-select").removeAttr("aria-hidden");
R.input.attr("aria-activedescendant",R._tagID);
}R._currentTag=Q;
}else{return R._currentTag;
}},dataItems:function(){return this.listView.selectedDataItems();
},destroy:function(){var R=this,Q=R.ns;
clearTimeout(R._busy);
clearTimeout(R._typingTimeout);
R.wrapper.off(Q);
R.tagList.off(Q);
R.input.off(Q);
R._clear.off(Q);
x.fn.destroy.call(R);
},_activateItem:function(){if(this.popup.visible()){x.fn._activateItem.call(this);
}this.currentTag(null);
},_listOptions:function(S){var U=this;
var R=x.fn._listOptions.call(U,b.extend(S,{selectedItemChange:G(U._selectedItemChange,U),selectable:"multiple"}));
var Q=this.options.itemTemplate||this.options.template;
var T=R.itemTemplate||Q||R.template;
if(!T){T="#:"+t.expr(R.dataTextField,"data")+"#";
}R.template=T;
return R;
},_setListValue:function(){x.fn._setListValue.call(this,this._initialValues.slice(0));
},_listChange:function(R){var Q=this.dataSource.flatView();
var T=this._optionsMap;
var U=this._value;
if(this._state===J){this._state="";
}for(var S=0;
S<R.added.length;
S++){if(T[U(R.added[S].dataItem)]===P){this._render(Q);
break;
}}this._selectValue(R.added,R.removed);
},_selectedItemChange:function(R){var T=R.items;
var Q;
var S;
for(S=0;
S<T.length;
S++){Q=T[S];
this.tagList.children().eq(Q.index).children("span:first").html(this.tagTextTemplate(Q.item));
}},_wrapperMousedown:function(R){var U=this;
var S=R.target.nodeName.toLowerCase()!=="input";
var T=b(R.target);
var Q=T.hasClass("k-select")||T.hasClass("k-icon");
if(Q){Q=!T.closest(".k-select").children(".k-i-arrow-60-down").length;
}if(S&&!(Q&&t.support.mobileOS)&&R.cancelable){R.preventDefault();
}if(!Q){if(U.input[0]!==d()&&S){U.input.focus();
}if(U.options.minLength===1){U.open();
}}},_inputFocus:function(){this._placeholder(false);
this.wrapper.addClass(n);
},_inputFocusout:function(){var Q=this;
clearTimeout(Q._typingTimeout);
Q.wrapper.removeClass(n);
Q._placeholder(!Q.listView.selectedDataItems()[0],true);
Q.close();
if(Q._state===m){Q._state=c;
Q.listView.skipUpdate(true);
}if(Q.listView.bound()&&Q.listView.isFiltered()){Q.persistTagList=true;
Q._clearFilter();
}Q.element.blur();
},_removeTag:function(aa,Y){var ab=this;
var Z=ab._state;
var X=aa.index();
var T=ab.listView;
var ac=T.value()[X];
var R=ab.listView.selectedDataItems()[X];
var Q=ab._customOptions[ac];
var V=T.element[0].children;
var W;
var U;
if(ab.trigger(k,{dataItem:R,item:aa})){ab._close();
return;
}if(Q===P&&(Z===c||Z===m)){Q=ab._optionsMap[ac];
}var S=function(){ab.currentTag(null);
if(Y){ab._change();
}ab._close();
};
if(Q===P&&T.select().length){ab.persistTagList=false;
T.select(T.select()[X]).done(S);
}else{W=ab.element[0].children[Q];
if(W){W.selected=false;
}T.removeAt(X);
U=V[Q];
if(U){V[Q].classList.remove("k-state-selected");
}if(ab.options.tagMode!=="single"){aa.remove();
}else{ab._updateTagListHTML();
}S();
}},_tagListClick:function(Q){Q.preventDefault();
Q.stopPropagation();
var R=b(Q.currentTarget);
if(!R.children(".k-i-arrow-60-down").length){this._removeTag(R.closest(w),true);
}},_clearValue:function(){var Q=this;
if(Q.options.tagMode==="single"){Q._clearSingleTagValue();
}else{Q.tagList.children().each(function(R,S){Q._removeTag(b(S),false);
});
}Q.input.val("");
Q._search();
Q._change();
Q.focus();
Q._hideClear();
if(Q._state===m){Q._state=c;
}},_clearSingleTagValue:function(){var R=this;
var Q=R.persistTagList;
if(Q){R.persistTagList=false;
}R.listView.value([]);
R.persistTagList=Q;
},_focusHandler:function(){this.input.focus();
},_editable:function(S){var V=this,Q=S.disable,T=S.readonly,W=V.wrapper.off(C),U=V.tagList.off(C),R=V.element.add(V.input.off(C));
if(!T&&!Q){W.removeClass(M).removeClass(B).on(q,V._toggleHover).on("mousedown"+C+" touchend"+C,G(V._wrapperMousedown,V)).on(h,G(V._focusHandler,V));
V.input.on(u,G(V._keydown,V)).on("paste"+C,G(V._search,V)).on("input"+C,G(V._search,V)).on("focus"+C,G(V._inputFocus,V)).on("focusout"+C,G(V._inputFocusout,V));
V._clear.on(h+" touchend"+C,G(V._clearValue,V));
R.removeAttr(l).removeAttr(I).attr(e,false);
U.on(y,w,function(){b(this).addClass(p);
}).on(z,w,function(){b(this).removeClass(p);
}).on(h+" touchend"+C,"li.k-button .k-select",G(V._tagListClick,V));
}else{W.toggleClass(M,Q).toggleClass(B,T);
R.attr(l,Q).attr(I,T).attr(e,Q);
}},_close:function(){var Q=this;
if(Q.options.autoClose){Q.close();
}else{Q.popup.position();
}},_filterSource:function(Q,R){if(!R){R=this._retrieveData;
}this._retrieveData=false;
x.fn._filterSource.call(this,Q,R);
},close:function(){this._activeItem=null;
this.input.removeAttr("aria-activedescendant");
this.popup.close();
},open:function(){var Q=this;
if(Q._request){Q._retrieveData=false;
}if(Q._retrieveData||!Q.listView.bound()||Q._state===c){Q._open=true;
Q._state=J;
Q.listView.skipUpdate(true);
Q.persistTagList=Q._initialOpen&&!Q.listView.bound()?false:true;
Q._filterSource();
Q._focusItem();
}else{if(Q._allowOpening()){if(Q._initialOpen&&!Q.options.autoBind&&!Q.options.virtual&&Q.options.value&&!b.isPlainObject(Q.options.value[0])){Q.value(Q.value()||Q._initialValues);
}Q.popup._hovered=true;
Q._initialOpen=false;
Q.popup.open();
Q._focusItem();
}}},toggle:function(Q){Q=Q!==P?Q:!this.popup.visible();
this[Q?E:i]();
},refresh:function(){this.listView.refresh();
},_listBound:function(){var S=this;
var Q=S.dataSource.flatView();
var R=S.listView.skip();
S._render(Q);
S._renderFooter();
S._renderNoData();
S._toggleNoData(!Q.length);
S._resizePopup();
if(S._open){S._open=false;
S.toggle(S._allowOpening());
}S.popup.position();
if(S.options.highlightFirst&&(R===P||R===0)){S.listView.focusFirst();
}if(S._touchScroller){S._touchScroller.reset();
}S._hideBusy();
S._makeUnselectable();
S.trigger("dataBound");
},_inputValue:function(){var R=this;
var Q=R.input.val();
if(R.options.placeholder===Q){Q="";
}return Q;
},value:function(V){var U=this;
var R=U.listView;
var T=R.value().slice();
var S=U.options.maxSelectedItems;
var Q=R.bound()&&R.isFiltered();
if(V===P){return T;
}U.persistTagList=false;
U.requireValueMapper(U.options,V);
V=U._normalizeValues(V);
if(S!==null&&V.length>S){V=V.slice(0,S);
}if(Q){U._clearFilter();
}R.value(V);
U._old=U._valueBeforeCascade=V.slice();
if(!Q){U._fetchData();
}U._ariaSetSize(U.value().length);
U._toggleCloseVisibility();
},_preselect:function(Q,S){var R=this;
if(!s(Q)&&!(Q instanceof t.data.ObservableArray)){Q=[Q];
}if(b.isPlainObject(Q[0])||Q[0] instanceof t.data.ObservableObject||!R.options.dataValueField){R.dataSource.data(Q);
R.value(S||R._initialValues);
R._retrieveData=true;
}},_setOption:function(S,R){var Q=this.element[0].children[this._optionsMap[S]];
if(Q){Q.selected=R;
}},_fetchData:function(){var S=this;
var Q=!!S.dataSource.view().length;
var R=S.listView.value().length===0;
if(R||S._request){return;
}if(S._retrieveData||!S._fetch&&!Q){S._fetch=true;
S._retrieveData=false;
S.dataSource.read().done(function(){S._fetch=false;
});
}},_isBound:function(){return this.listView.bound()&&!this._retrieveData;
},_dataSource:function(){var T=this,R=T.element,S=T.options,Q=S.dataSource||{};
Q=s(Q)?{data:Q}:Q;
Q.select=R;
Q.fields=[{field:S.dataTextField},{field:S.dataValueField}];
if(T.dataSource&&T._refreshHandler){T._unbindDataSource();
}else{T._progressHandler=G(T._showBusy,T);
T._errorHandler=G(T._hideBusy,T);
}T.dataSource=t.data.DataSource.create(Q).bind(F,T._progressHandler).bind("error",T._errorHandler);
},_reset:function(){var T=this,Q=T.element,S=Q.attr("form"),R=S?b("#"+S):Q.closest("form");
if(R[0]){T._resetHandler=function(){setTimeout(function(){T.value(T._initialValues);
T._placeholder();
});
};
T._form=R.on("reset",T._resetHandler);
}},_initValue:function(){var Q=this.options.value||this.element.val();
this._old=this._initialValues=this._normalizeValues(Q);
},_normalizeValues:function(R){var Q=this;
if(R===null){R=[];
}else{if(R&&b.isPlainObject(R)){R=[Q._value(R)];
}else{if(R&&b.isPlainObject(R[0])){R=b.map(R,function(S){return Q._value(S);
});
}else{if(!s(R)&&!(R instanceof D)){R=[R];
}else{if(s(R)){R=R.slice();
}}}}}return R;
},_change:function(){var Q=this,R=Q.value();
if(!j(R,Q._old)){Q._old=R.slice();
Q.trigger(g);
Q.element.trigger(g);
}Q.popup.position();
Q._ariaSetSize(R.length);
Q._toggleCloseVisibility();
},_click:function(Q){var S=this;
var R=Q.item;
Q.preventDefault();
S._select(R).done(function(){S._activeItem=R;
S._change();
S._close();
});
},_getActiveItem:function(){return this._activeItem||b(this.listView.items()[this._getSelectedIndices().length-1])||this.listView.focus();
},_getSelectedIndices:function(){return this.listView._selectedIndices||this.listView._selectedIndexes;
},_keydown:function(V){var ab=this;
var Y=V.keyCode;
var aa=ab._currentTag;
var Z=ab.listView;
var W=ab.input.val();
var X=t.support.isRtl(ab.wrapper);
var ac=ab.popup.visible();
var T=0;
var R;
if(Y!==v.ENTER){this._multipleSelection=false;
}if(Y===v.DOWN){V.preventDefault();
if(!ac){ab.open();
if(!Z.focus()){Z.focusFirst();
}return;
}if(Z.focus()){if(!ab._activeItem&&V.shiftKey){ab._activeItem=Z.focus();
T=-1;
}R=Z.getElementIndex(ab._getActiveItem().first());
Z.focusNext();
if(!Z.focus()){Z.focusLast();
}else{if(V.shiftKey){this._multipleSelection=true;
ab._selectRange(R,Z.getElementIndex(Z.focus().first())+T);
}}}else{Z.focusFirst();
}}else{if(Y===v.UP){if(ac){if(!ab._activeItem&&V.shiftKey){ab._activeItem=Z.focus();
T=1;
}R=Z.getElementIndex(ab._getActiveItem().first());
Z.focusPrev();
if(!Z.focus()){ab.close();
}else{if(V.shiftKey){this._multipleSelection=true;
ab._selectRange(R,Z.getElementIndex(Z.focus().first())+T);
}}}V.preventDefault();
}else{if(Y===v.LEFT&&!X||Y===v.RIGHT&&X){if(!W){aa=aa?aa.prev():b(ab.tagList[0].lastChild);
if(aa[0]){ab.currentTag(aa);
}}}else{if(Y===v.RIGHT&&!X||Y===v.LEFT&&X){if(!W&&aa){aa=aa.next();
ab.currentTag(aa[0]?aa:null);
}}else{if(V.ctrlKey&&!V.altKey&&Y===v.A&&ac&&!ab.options.virtual){this._multipleSelection=true;
if(this._getSelectedIndices().length===Z.items().length){ab._activeItem=null;
}if(Z.items().length){ab._selectRange(0,Z.items().length-1);
}}else{if(Y===v.ENTER&&ac){if(!Z.focus()){return;
}V.preventDefault();
if(this._multipleSelection){this._multipleSelection=false;
if(Z.focus().hasClass(L)){ab._close();
return;
}}ab._select(Z.focus()).done(function(){ab._change();
ab._close();
});
}else{if(Y===v.SPACEBAR&&V.ctrlKey&&ac){if(ab._activeItem&&Z.focus()&&Z.focus()[0]===ab._activeItem[0]){ab._activeItem=null;
}if(!b(Z.focus()).hasClass(L)){ab._activeItem=Z.focus();
}ab._select(Z.focus()).done(function(){ab._change();
});
V.preventDefault();
}else{if(Y===v.SPACEBAR&&V.shiftKey&&ac){var Q=Z.getElementIndex(ab._getActiveItem());
var S=Z.getElementIndex(Z.focus());
if(Q!==P&&S!==P){ab._selectRange(Q,S);
}V.preventDefault();
}else{if(Y===v.ESC){if(ac){V.preventDefault();
}else{ab.tagList.children().each(function(ad,ae){ab._removeTag(b(ae),false);
});
ab._change();
}ab.close();
}else{if(Y===v.HOME){if(ac){if(!Z.focus()){ab.close();
}else{if(V.ctrlKey&&V.shiftKey&&!ab.options.virtual){ab._selectRange(Z.getElementIndex(Z.focus()[0]),0);
}Z.focusFirst();
}}else{if(!W){aa=ab.tagList[0].firstChild;
if(aa){ab.currentTag(b(aa));
}}}}else{if(Y===v.END){if(ac){if(!Z.focus()){ab.close();
}else{if(V.ctrlKey&&V.shiftKey&&!ab.options.virtual){ab._selectRange(Z.getElementIndex(Z.focus()[0]),Z.element.children().length-1);
}Z.focusLast();
}}else{if(!W){aa=ab.tagList[0].lastChild;
if(aa){ab.currentTag(b(aa));
}}}}else{if((Y===v.DELETE||Y===v.BACKSPACE)&&!W){ab._state=c;
if(ab.options.tagMode==="single"){ab._clearSingleTagValue();
ab._change();
ab._close();
return;
}if(Y===v.BACKSPACE&&!aa){aa=b(ab.tagList[0].lastChild);
}if(aa&&aa[0]){ab._removeTag(aa,true);
}}else{if(ab.popup.visible()&&(Y===v.PAGEDOWN||Y===v.PAGEUP)){V.preventDefault();
var U=Y===v.PAGEDOWN?1:-1;
Z.scrollWith(U*Z.screenHeight());
}else{clearTimeout(ab._typingTimeout);
setTimeout(function(){ab._scale();
});
ab._search();
}}}}}}}}}}}}}},_hideBusy:function(){var Q=this;
clearTimeout(Q._busy);
Q.input.attr("aria-busy",false);
Q._loading.addClass(o);
Q._request=false;
Q._busy=null;
Q._toggleCloseVisibility();
},_showBusyHandler:function(){this.input.attr("aria-busy",true);
this._loading.removeClass(o);
this._hideClear();
},_showBusy:function(){var Q=this;
Q._request=true;
if(Q._busy){return;
}Q._busy=setTimeout(G(Q._showBusyHandler,Q),100);
},_placeholder:function(W,X){var Y=this;
var S=Y.input;
var Q=d();
var V=Y.options.placeholder;
var T=S.val();
var U=S[0]===Q;
var R=T.length;
if(!U||Y.options.autoClose||T===V){R=0;
T="";
}if(W===P){W=false;
if(S[0]!==Q){W=!Y.listView.selectedDataItems()[0];
}}Y._prev=T;
S.toggleClass("k-readonly",W).val(W?V:T);
if(U&&!X){t.caret(S[0],R,R);
}Y._scale();
},_scale:function(){var S=this,T=S.wrapper.find(".k-multiselect-wrap"),U=T.width(),Q=S._span.text(S.input.val()),R;
if(!T.is(":visible")){Q.appendTo(document.documentElement);
U=R=Q.width()+25;
Q.appendTo(T);
}else{R=Q.width()+25;
}S.input.width(R>U?U:R);
},_option:function(R,Q,T){var S="<option";
if(R!==P){R+="";
if(R.indexOf('"')!==-1){R=R.replace(H,"&quot;");
}S+=' value="'+R+'"';
}if(T){S+=" selected";
}S+=">";
if(Q!==P){S+=t.htmlEncode(Q);
}return S+="</option>";
},_render:function(R){var Y=this.listView.selectedDataItems();
var aa=this.listView.value();
var U=R.length;
var X;
var V="";
var S;
var Z;
var T;
if(aa.length!==Y.length){Y=this._buildSelectedItems(aa);
}var Q={};
var W={};
for(T=0;
T<U;
T++){S=R[T];
Z=this._value(S);
X=this._selectedItemIndex(Z,Y);
if(X!==-1){Y.splice(X,1);
}W[Z]=T;
V+=this._option(Z,this._text(S),X!==-1);
}if(Y.length){for(T=0;
T<Y.length;
T++){S=Y[T];
Z=this._value(S);
Q[Z]=U;
W[Z]=U;
U+=1;
V+=this._option(Z,this._text(S),true);
}}this._customOptions=Q;
this._optionsMap=W;
this.element.html(V);
},_buildSelectedItems:function(V){var U=this.options.dataValueField;
var T=this.options.dataTextField;
var S=[];
var R;
for(var Q=0;
Q<V.length;
Q++){R={};
R[U]=V[Q];
R[T]=V[Q];
S.push(R);
}return S;
},_selectedItemIndex:function(S,R){var T=this._value;
var Q=0;
for(;
Q<R.length;
Q++){if(S===T(R[Q])){return Q;
}}return -1;
},_search:function(){var Q=this;
clearTimeout(Q._typingTimeout);
Q._typingTimeout=setTimeout(function(){var R=Q._inputValue();
if(Q._prev!==R){Q._prev=R;
Q.search(R);
Q._toggleCloseVisibility();
}},Q.options.delay);
},_toggleCloseVisibility:function(){if(this.value().length||this.input.val()&&this.input.val()!==this.options.placeholder){this._showClear();
}else{this._hideClear();
}},_allowOpening:function(){return this._allowSelection()&&x.fn._allowOpening.call(this);
},_allowSelection:function(){var Q=this.options.maxSelectedItems;
return Q===null||Q>this.listView.value().length;
},_angularTagItems:function(Q){var R=this;
R.angular(Q,function(){return{elements:R.tagList[0].children,data:b.map(R.dataItems(),function(S){return{dataItem:S};
})};
});
},updatePersistTagList:function(Q,R){if(this.persistTagList.added&&this.persistTagList.added.length===R.length&&this.persistTagList.removed&&this.persistTagList.removed.length===Q.length){this.persistTagList=false;
}else{this.listView._removedAddedIndexes=this._old.slice();
this.persistTagList={added:Q,removed:R};
}},_selectValue:function(Q,U){var X=this;
var Y=X.dataSource.total();
var W=X.tagList;
var S=X._value;
var V;
var R;
var T;
if(this.persistTagList){this.updatePersistTagList(Q,U);
return;
}X._angularTagItems("cleanup");
if(X.options.tagMode==="multiple"){for(T=U.length-1;
T>-1;
T--){V=U[T];
if(W.children().length){W[0].removeChild(W[0].children[V.position]);
X._setOption(S(V.dataItem),false);
}}for(T=0;
T<Q.length;
T++){R=Q[T];
W.append(X.tagTemplate(R.dataItem));
X._setOption(S(R.dataItem),true);
}}else{if(!X._maxTotal||X._maxTotal<Y){X._maxTotal=Y;
}this._updateTagListHTML();
for(T=U.length-1;
T>-1;
T--){X._setOption(S(U[T].dataItem),false);
}for(T=0;
T<Q.length;
T++){X._setOption(S(Q[T].dataItem),true);
}}X._angularTagItems("compile");
X._placeholder();
},_updateTagListHTML:function(){var R=this;
var T=R.value();
var S=R.dataSource.total();
var Q=R.tagList;
Q.html("");
if(T.length){Q.append(R.tagTemplate({values:T,dataItems:R.dataItems(),maxTotal:R._maxTotal,currentTotal:S}));
}},_select:function(Q){var U=b.Deferred().resolve();
if(!Q){return U;
}var V=this;
var T=V.listView;
var R=T.dataItemByIndex(T.getElementIndex(Q));
var S=Q.hasClass("k-state-selected");
if(V._state===J){V._state="";
}if(!V._allowSelection()&&!S){return U;
}if(V.trigger(S?k:K,{dataItem:R,item:Q})){V._close();
return U;
}V.persistTagList=false;
return T.select(Q).done(function(){V._placeholder();
if(V._state===m){V._state=c;
T.skipUpdate(true);
}});
},_selectRange:function(Y,Q){var Z=this;
var V=this.listView;
var W=this.options.maxSelectedItems;
var T=this._getSelectedIndices().slice();
var U=[];
var R;
var X=function(aa){V.select(aa).done(function(){aa.forEach(function(ad){var ac=V.dataItemByIndex(ad);
var ab=V.element.children()[ad];
var ae=b(ab).hasClass("k-state-selected");
Z.trigger(ae?K:k,{dataItem:ac,item:b(ab)});
});
Z._change();
});
};
if(T.length-1===Q-Y){return X(T);
}if(Y<Q){for(R=Y;
R<=Q;
R++){U.push(R);
}}else{for(R=Y;
R>=Q;
R--){U.push(R);
}}if(W!==null&&U.length>W){U=U.slice(0,W);
}for(R=0;
R<U.length;
R++){var S=U[R];
if(this._getSelectedIndices().indexOf(S)==-1){T.push(S);
}else{T.splice(T.indexOf(S),1);
}}if(!T.length){return;
}Z.persistTagList=false;
return X(T);
},_input:function(){var T=this;
var R=T.element;
var Q=R[0].accessKey;
var S=T._innerWrapper.children("input.k-input");
if(!S[0]){S=b('<input class="k-input" style="width: 25px" />').appendTo(T._innerWrapper);
}R.removeAttr("accesskey");
T._focused=T.input=S.attr({accesskey:Q,autocomplete:f,role:"listbox",title:R[0].title,"aria-expanded":false,"aria-haspopup":"listbox","aria-autocomplete":"list"});
},_tagList:function(){var R=this,Q=R._innerWrapper.children("ul");
if(!Q[0]){Q=b('<ul unselectable="on" class="k-reset"/>').appendTo(R._innerWrapper);
}R.tagList=Q;
},_tagTemplate:function(){var W=this;
var T=W.options;
var V=T.tagTemplate;
var R=T.dataSource;
var S=T.tagMode==="multiple";
var U=T.messages.singleTag;
var Q;
if(W.element[0].length&&!R){T.dataTextField=T.dataTextField||"text";
T.dataValueField=T.dataValueField||"value";
}Q=S?t.template("#:"+t.expr(T.dataTextField,"data")+"#",{useWithBlock:false}):t.template("#:values.length# "+U);
W.tagTextTemplate=V=V?t.template(V):Q;
W.tagTemplate=function(X){return'<li role="option" aria-selected="true" class="k-button" unselectable="on"><span unselectable="on">'+V(X)+'</span><span aria-hidden="true" unselectable="on" aria-label="'+(S?'delete" title="'+W.options.messages.deleteTag+'" aria-label="'+W.options.messages.deleteTag:"open")+'" class="k-select"><span class="k-icon '+(S?"k-i-close":"k-i-arrow-60-down")+'"></span></span></li>';
};
},_loader:function(){this._loading=b('<span class="k-icon k-i-loading '+o+'"></span>').insertAfter(this.input);
},_clearButton:function(){x.fn._clearButton.call(this);
if(this.options.clearButton){this._clear.insertAfter(this.input);
this.wrapper.addClass("k-multiselect-clearable");
}},_textContainer:function(){var Q=t.getComputedStyles(this.input[0],N);
Q.position="absolute";
Q.visibility="hidden";
Q.top=-3333;
Q.left=-3333;
this._span=b("<span/>").css(Q).appendTo(this.wrapper);
},_wrapper:function(){var R=this,Q=R.element,S=Q.parent("span.k-multiselect");
if(!S[0]){S=Q.wrap('<div class="k-widget k-multiselect" unselectable="on" />').parent();
S[0].style.cssText=Q[0].style.cssText;
S[0].title=Q[0].title;
b('<div class="k-multiselect-wrap k-floatwrap" role="listbox" unselectable="on" />').insertBefore(Q);
}R.wrapper=S.addClass(Q[0].className).css("display","");
R._innerWrapper=b(S[0].firstChild);
},_ariaSetSize:function(S){var R=this;
var Q=R.tagList.children();
if(S&&Q.length){Q.attr("aria-setsize",S);
}},_ariaSetLive:function(){var Q=this;
Q.ul.attr("aria-live",!Q._isFilterEnabled()?"off":"polite");
}});
function j(Q,R){var S;
if(Q===null&&R!==null||Q!==null&&R===null){return false;
}S=Q.length;
if(S!==R.length){return false;
}while(S--){if(Q[S]!==R[S]){return false;
}}return true;
}O.plugin(A);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
