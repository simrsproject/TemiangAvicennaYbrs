(function(b,a){Promise.prototype.catchError=Promise.prototype["catch"];
a("pdfviewer/pdfjs",["kendo.core"],b);
}(function(){(function(a,d){var b=a.extend;
var c=function(){if(!window.pdfjsLib){var e=window.console;
if(e&&e.error){e.error("PDF.JS required.");
}return false;
}kendo.pdfviewer.pdfjs.lib=window.pdfjsLib;
return true;
};
b(kendo,{pdfviewer:{pdfjs:{lib:window.pdfjsLib,isLoaded:c}}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/processors/pdfjs-processor",["pdfviewer/pdfjs"],b);
}(function(){var a={id:"pdfjs-processor",name:"PDFJS-Processor",category:"framework",depends:["core"]};
(function(b,i){var f=window.kendo,d=f.Class,e=b.extend,c=window.atob,g;
var h=d.extend({init:function(j,l){var k=this;
if(f.pdfviewer.pdfjs.isLoaded()){g=f.pdfviewer.pdfjs.lib;
}k.file=j.file;
k.viewer=l;
},fetchDocument:function(){var l=this,j=b.Deferred(),k=l.viewer.options.messages.errorMessages;
if(!l.file){return j.resolve();
}if(l._isBase64Data()&&c){l.file.data=c(l.file.data);
}g.getDocument(this.file).promise.then(function(o){var n=[];
l.pdf=o;
l.pagePromises=[];
l._downloadData=b.Deferred();
o.getData().then(function(q){var p=new Blob([q],{type:"application/pdf"});
l._downloadData.resolve({file:p});
});
for(var m=1;
m<=o.numPages;
m++){l.pagePromises.push(o.getPage(m));
}Promise.all(l.pagePromises).then(function(p){n=p.map(function(q){var r=q.getViewport({scale:4/3});
return{width:r.width,height:r.height};
});
j.resolve({total:o.numPages,pages:n});
}).catchError(function(p){l.viewer._triggerError({error:p.message,message:k.parseError});
});
}).catchError(function(n){var o=n.name.includes("Missing");
var m=o?k.notFound:k.parseError;
l.viewer._triggerError({error:n.message,message:m});
if(o){l.viewer._renderBlankPage();
}});
return j;
},fetchPageData:function(j){return this.pagePromises[j-1];
},downloadFile:function(j){var k=this;
f.ui.progress(k.viewer.pageContainer,true);
k._downloadData.done(function(m){f.ui.progress(k.viewer.pageContainer,false);
var l=new FileReader();
l.readAsDataURL(m.file);
l.onload=function(){f.saveAs({dataURI:l.result,fileName:j+".pdf",proxyURL:function(){return l.result;
}});
};
});
},_updateDocument:function(j){this.pdf.loadingTask.destroy();
this.file=j;
},_isBase64Data:function(){var j=this.file.data,m=/[^A-Z0-9+\/=]/i,l=j&&j.length,k;
if(!l||l%4!==0||m.test(j)){return false;
}k=j.indexOf("=");
return k===-1||k===l-1||k===l-2&&j[l-1]==="=";
},renderTextLayer:function(j){g.renderTextLayer(j);
}});
e(f.pdfviewer.pdfjs,{processor:h});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/processors/dpl-processor",["kendo.core"],b);
}(function(){var a={id:"dpl-processor",name:"DPL-Processor",category:"framework",depends:["core"]};
(function(b,g){var f=window.kendo,e=b.extend,c=f.Class;
var d=c.extend({init:function(h,j){var i=this;
i.options=h;
i.read=h.read;
i.upload=h.upload;
i.download=h.download;
i.viewer=j;
},fetchDocument:function(){var j=this,h=b.Deferred(),i=j.viewer.options.messages.errorMessages;
if(!j.read){return h.resolve();
}b.ajax({type:j.read.type,url:j.read.url,dataType:j.read.dataType,success:function(k){if(typeof k!="string"){k=f.stringify(k);
}h.resolve(JSON.parse(k));
},error:function(k){j.viewer._triggerError({error:k.responseText,message:i.parseError});
}});
return h;
},fetchPageData:function(j){var l=this;
var i=b.Deferred();
var k=l.viewer.document.pages[j-1];
var h={};
h[l.read.pageField]=j;
if(!k.geometries.length){b.ajax({type:l.read.type,url:l.read.url,data:h,success:function(m){i.resolve(JSON.parse(m));
},error:function(m){l.viewer._triggerError({error:m.responseText,message:l.viewer.options.messages.errorMessages.parseError});
}});
}else{i.resolve(k);
}return i;
},downloadFile:function(h){window.location=this.download.url+"?file="+h;
},fromJSON:function(h){var i=this.viewer;
i._clearPages();
i.document=h;
i.document.total=i.document.pages.length;
i._renderPages();
i.resize(true);
i.activatePage(1);
}});
e(f.pdfviewer,{dpl:{processor:d}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/pager",["kendo.core"],b);
}(function(){(function(a,m){var h=".kendoPDFViewer",n=kendo.ui.Widget,b="change",g="keydown",c=kendo.support.click,l=480,f=kendo.attr,k=a.proxy,e=a.extend,d=".";
var j={wrapperClass:"k-pager-wrap",iconFirst:"k-i-arrow-end-left",iconLast:"k-i-arrow-end-right",iconPrev:"k-i-arrow-60-left",iconNext:"k-i-arrow-60-right",first:"k-pager-first",last:"k-pager-last",nav:"k-pager-nav",disabled:"k-state-disabled"};
var i=n.extend({init:function(o,p){var q=this;
n.fn.init.call(q,o,p);
q.linkTemplate=kendo.template(q.options.linkTemplate);
q.element.addClass(j.wrapperClass);
q._renderLinks();
q._toggleDisabledClass();
q._attachEvents();
},options:{linkTemplate:'<a href="\\#" aria-label="#=text#" title="#=text#" class="k-button k-button-icon k-flat k-pager-nav #= wrapClass #" data-page="#=pageIdx#"><span class="k-icon #= iconClass #"></span></a>',previousNext:true,input:true,page:1,total:1,messages:{}},events:[b],_pagerLink:function(o,q,p,r){return this.linkTemplate({iconClass:o,text:q,wrapClass:r||"",pageIdx:p});
},_renderLinks:function(){var p=this,o=p.options;
if(o.previousNext){p.firstLink=a(p._pagerLink(j.iconFirst,o.messages.first,1,j.first));
p.prevLink=a(p._pagerLink(j.iconPrev,o.messages.previous,o.page-1));
p.nextLink=a(p._pagerLink(j.iconNext,o.messages.next,o.page+1));
p.lastLink=a(p._pagerLink(j.iconLast,o.messages.last,o.total,j.last));
}p.element.append(p.firstLink);
p.element.append(p.prevLink);
if(o.input){p._renderInput();
}p.element.append(p.nextLink);
p.element.append(p.lastLink);
},_toggleDisabledClass:function(){var p=this,o=p.options,q=!o.total;
if(p.nextLink&&p.prevLink){p.prevLink.toggleClass(j.disabled,q||o.page===1);
p.nextLink.toggleClass(j.disabled,q||o.page===o.total);
p.lastLink.toggleClass(j.disabled,q||o.page===o.total);
p.firstLink.toggleClass(j.disabled,q||o.page===1);
}if(p.input){p.input.toggleClass(j.disabled,o.total<=1);
}},_attachEvents:function(){var o=this;
o.element.on(c+h,d+j.nav,k(o._click,o));
o.element.on(g+h,d+j.nav,function(p){if(p.keyCode===kendo.keys.ENTER){o._click(p);
p.preventDefault();
}});
if(o.input){o.input.on(g+h,k(o._keydown,o));
}},_click:function(o){var q=a(o.currentTarget);
var p=parseInt(q.attr(f("page")),10);
if(o.isDefaultPrevented()){return;
}this._change(p);
},_keydown:function(q){var s=q.keyCode,t=kendo.keys,r=a(q.target),u=parseInt(r.val(),10),v=s===t.UP||s===t.DOWN,o=s===t.RIGHT||s===t.LEFT||s===t.BACKSPACE||s===t.DELETE,p=v&&s===t.UP?1:-1;
if(v){u+=p;
}if(s===t.ENTER||v){if(isNaN(u)||u<1||u>this.options.total){u=this.options.page;
r.val(u);
return;
}this._change(u);
q.preventDefault();
}else{if(!q.key.match(/^\d+$/)&&!o){q.preventDefault();
}}},_change:function(o){var p=this;
if(o>=1&&o<=p.options.total){p.options.page=o;
if(p.input){p.input.val(o);
}p.prevLink.attr(f("page"),o-1);
p.nextLink.attr(f("page"),o+1);
p._toggleDisabledClass();
}p.trigger(b,{page:o});
},setOptions:function(o){var q=this,p=q.options.total;
o=a.extend(q.options,o);
n.fn.setOptions.call(q,o);
if(o.input){if(p!=o.total){q._renderInput();
q.input.on(g+h,k(q._keydown,q));
}else{q.input.val(o.total>0?o.page:1);
}}if(o.total>1){q.prevLink.attr(f("page"),o.page-1);
q.nextLink.attr(f("page"),o.page+1);
q.lastLink.attr(f("page"),o.total);
}q._toggleDisabledClass();
},_renderInput:function(){var s=this,t,p=s.options,r=s.element.parent().width()<=l,o,q=s.element.find(".k-pager-input");
if(s.input){s.input.off(h);
}t=p.total>0?kendo.format(p.messages.of,p.total):"";
if(!r){t+=p.total>1?p.messages.pages:p.messages.page;
}o='<input class="k-textbox" aria-label="'+p.page+t+'">'+t;
if(q.length){q.html(o);
}else{s.element.append('<span class="k-pager-input k-label">'+o+"</span>");
}s.input=s.element.find("input").val(p.total>0?p.page:1);
},destroy:function(){this.element.off(h);
if(this.input){this.input.off(h);
}n.fn.destroy.call(this);
}});
e(kendo.pdfviewer,{Pager:i});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/toolbar",["kendo.toolbar","kendo.combobox","pdfviewer/pager"],b);
}(function(){(function(a,t){var k=window.kendo,h=a.extend,n=a.proxy,b="action",i="k-flat",l="keydown",f=k.support.click,e="change",x="zoomin",y="zoomout",j=k.toolbar.Item,p=k.ui.ToolBar,m={auto:"auto",actual:"actual",fitToWidth:"fitToWidth",fitToPage:"fitToPage"},o={zoomOutIcon:"k-i-zoom-out",zoomInIcon:"k-i-zoom-in",zoomButtons:"k-button-icon k-flat",zoomOverflowButtons:"k-button-icontext k-overflow-button",overflowHidden:"k-overflow-hidden"};
var v=k.template('<a href="\\#" aria-label="#=text#" title="#=text#" data-command="#=command#" class="k-button #=className#"><span class="k-icon #= iconClass #"></span> ${showText ? text : ""}</a>');
var w=k.template('<select>#for(var zoomIndex in zoomLevels){## var zoomLevel = zoomLevels[zoomIndex]; #<option value="#= zoomLevel.percent || (zoomLevel + "%") #">${zoomLevel.text ? zoomLevel.text : zoomLevel + "%"}</option>#}#</select>');
var g={pager:{type:"pager",overflow:"never",command:"PageChangeCommand"},spacer:{type:"spacer"},zoom:{type:"zoom",command:"ZoomCommand",zoomInOut:true,combobox:{zoomLevels:[50,100,150,200,300,400]}},toggleSelection:{type:"buttonGroup",attributes:{"class":"k-toggle-selection-group"},buttons:[{togglable:true,text:"Enable Selection",command:"EnableSelectionCommand",icon:"cursor",showText:"overflow",name:"toggleSelection",group:"toggle-pan"},{togglable:true,text:"Enable Panning",command:"EnablePanCommand",icon:"hand",showText:"overflow",name:"togglePan",group:"toggle-pan",selected:true}]},spacer2:{type:"spacer"},search:{type:"button",text:"Search",command:"OpenSearchCommand",icon:"search",name:"search",showText:"overflow"},open:{type:"button",text:"Open",showText:"overflow",name:"open",icon:"folder-open",command:"OpenCommand"},download:{type:"button",text:"Download",showText:"overflow",name:"download",icon:"download",command:"DownloadCommand"},print:{type:"button",text:"Print",showText:"overflow",name:"print",icon:"print",command:"PrintCommand"}};
var c=h({},g,{exportAs:{type:"button",text:"Export",showText:"overflow",name:"exportAs",icon:"image-export",command:"ExportCommand"}});
var r=j.extend({init:function(z,B){var A=a("<div />");
this.options=h(true,z,B.options.pager);
this.toolbar=B;
this.toolbar.pager=new k.pdfviewer.Pager(A,h({},z,{change:n(this._change,this)}));
this.element=A;
this.element.on(l,n(this._keydown,this));
this.attributes();
this.addUidAttr();
this.addOverflowAttr();
},_change:function(z){if(this.options.change&&this.options.change(z.page)){return;
}this.toolbar.action({command:"PageChangeCommand",options:{value:z.page}});
},_keydown:function(B){var F=this,D=a(B.target),C=B.keyCode,z=F.element.find(":kendoFocusable"),E=z.index(D),A=B.shiftKey?-1:1;
if(C===k.keys.TAB&&z[E+A]){z[E+A].focus();
B.preventDefault();
B.stopPropagation();
}}});
k.toolbar.registerComponent("pager",r);
function d(A,C,B){var z=B?o.zoomOverflowButtons:o.zoomButtons;
A.append(v({text:C.zoomOut,command:y,iconClass:o.zoomOutIcon,showText:B,className:z}));
A.append(v({text:C.zoomIn,command:x,iconClass:o.zoomInIcon,showText:B,className:z}));
}var s=j.extend({init:function(z,A){this._init(z,A);
this.toolbar.zoom=this;
if(A.options.scale){this._initValue=A.options.scale*100+"%";
}this._appendElements();
this._click=k.throttle(this._click.bind(this),200);
this._keydown=k.throttle(this._keydown.bind(this),200);
this.element.on(f,".k-button",this._click);
this.element.on(l,".k-button",this._keydown);
this.attributes();
this.addUidAttr();
this.addOverflowAttr();
},_init:function(z,A){var B=a("<div />");
this.options=h(true,z,{messages:A.options.messages.zoom});
this.toolbar=A;
this.element=B;
},_appendElements:function(){var z=this.options;
if(z.zoomInOut){d(this.element,z.messages,false);
}if(z.combobox){this._buildComboBox();
}},_buildComboBox:function(){var C=this,z,B=C.options.messages,A=C.options.combobox,D=[{percent:m.auto,text:B.autoWidth},{percent:m.actual,text:B.actualWidth},{percent:m.fitToWidth,text:B.fitToWidth},{percent:m.fitToPage,text:B.fitToPage}];
D=D.concat(A.zoomLevels);
z=a(w({zoomLevels:D}));
if(!k.support.mobileOS){z=z.kendoComboBox(h({autoWidth:true,clearButton:false,value:C._initValue},A)).getKendoComboBox();
C.element.append(z.wrapper);
C.combobox=z;
C._currentValue=z.value();
}else{C.element.append(z);
}z.bind(e,k.throttle(C.change.bind(C),300));
},change:function(z){var B=z.sender?z.sender.value():z.target.value,A;
if(B.toString().match(/^[0-9]+%?$/)){A=parseInt(B.replace("%",""),10)/100;
}else{if(!m[B]){if(this.combobox){this.combobox.value(this._currentValue);
}z.preventDefault();
return;
}}this._currentValue=B;
this.toolbar.action({command:"ZoomCommand",options:{scale:A||B}});
},_buttonCommand:function(B){var z=a(B).closest(".k-button"),A=z.data("command");
this.toolbar.action({command:"ZoomCommand",options:{zoomIn:A===x,zoomOut:A===y,updateComboBox:true}});
},_click:function(z){this._buttonCommand(z.target);
},_keydown:function(z){var A=z.keyCode,B=k.keys;
if(A===B.ENTER){this._buttonCommand(z.target);
z.preventDefault();
}},enable:function(A){var z=this.element;
z.find(".k-button, select").toggleClass("k-state-disabled",!A);
if(this.combobox){this.combobox.enable(A);
}},destroy:function(){if(this.combobox){this.combobox.destroy();
}}});
var q=s.extend({_init:function(z,A){var B=a("<li></li>");
this.options=h(true,z,{messages:A.options.messages.zoom});
this.toolbar=A;
this.element=B;
},_appendElements:function(){var z=this.options;
if(z.zoomInOut){d(this.element,z.messages,true);
}},overflowHidden:function(){this.element.addClass(o.overflowHidden);
}});
k.toolbar.registerComponent("zoom",s,q);
var u=p.extend({init:function(z,B){var C=this;
var A=B.items&&B.items.length?B.items:Object.keys(g);
C.options=B;
B.items=C._updateItems(A);
p.fn.init.call(C,z,B);
C.bind({click:C._click,toggle:C._click});
B.viewer.bind({update:C._update.bind(C)});
},events:[b],_updateItems:function(z){var B=this;
var A=this.options.messages;
return z.map(function(E){var C=a.isPlainObject(E)&&Object.keys(E).length===1&&E.name;
E=C?E.name:E;
var G=a.isPlainObject(E)?E:c[E];
var D;
var F=G.name;
if(G.type==="buttonGroup"){G.buttons=B._updateItems(G.buttons);
}else{if(G.type!=="pager"){D={name:F,attributes:{"aria-label":A[F],title:A[F],"data-command":G.command,"class":i},overflow:G.overflow};
}else{D={overflow:"never"};
}}k.deepExtend(G,D);
return G;
});
},_click:function(A){var z=a(A.target).data("command");
if(!z){return;
}this.action({command:z,options:A.options});
},_update:function(z){var A={page:z.page||1,total:z.total||1};
if(this.zoom){this.zoom.enable(!z.isBlank);
if(z.action==="zoom"){this._updateZoomComboBox(z.zoom);
}}if((z.action==="pagechange"||z.isBlank)&&this.pager){this.pager.setOptions(A);
}this.enable(this.wrapper.find(".k-toggle-selection-group"),!z.isBlank);
this.enable(this.wrapper.find("[data-command='OpenSearchCommand']"),!z.isBlank);
this.enable(this.wrapper.find("[data-command='DownloadCommand']"),!z.isBlank);
this.enable(this.wrapper.find("[data-command='PrintCommand']"),!z.isBlank);
},_updateZoomComboBox:function(A){var z=A===m.auto||A===m.actual;
if(!z){A=Math.round(A*100)+"%";
}if(this.zoom&&this.zoom.combobox){this.zoom._currentValue=A;
this.zoom.combobox.value(A);
}},action:function(z){this.trigger(b,z);
},destroy:function(){if(this.pager){this.pager.destroy();
}if(this.zoom){this.zoom.destroy();
}p.fn.destroy.call(this);
}});
h(k.pdfviewer,{Toolbar:u,DefaultTools:g});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("util/text-metrics",["kendo.core"],b);
}(function(){(function(a){window.kendo.util=window.kendo.util||{};
var e=kendo.Class.extend({init:function(m){this._size=m;
this._length=0;
this._map={};
},put:function(n,p){var o=this._map;
var m={key:n,value:p};
o[n]=m;
if(!this._head){this._head=this._tail=m;
}else{this._tail.newer=m;
m.older=this._tail;
this._tail=m;
}if(this._length>=this._size){o[this._head.key]=null;
this._head=this._head.newer;
this._head.older=null;
}else{this._length++;
}},get:function(n){var m=this._map[n];
if(m){if(m===this._head&&m!==this._tail){this._head=m.newer;
this._head.older=null;
}if(m!==this._tail){if(m.older){m.older.newer=m.newer;
m.newer.older=m.older;
}m.older=this._tail;
m.newer=null;
this._tail.newer=m;
this._tail=m;
}return m.value;
}}});
var i=/\r?\n|\r|\t/g;
var j=" ";
function g(m){return String(m).replace(i,j);
}function h(n){var o=[];
for(var m in n){o.push(m+n[m]);
}return o.sort().join("");
}function d(o){var m=2166136261;
for(var n=0;
n<o.length;
++n){m+=(m<<1)+(m<<4)+(m<<7)+(m<<8)+(m<<24);
m^=o.charCodeAt(n);
}return m>>>0;
}function l(){return{width:0,height:0,baseline:0};
}var b={baselineMarkerSize:1};
var c;
if(typeof document!=="undefined"){c=document.createElement("div");
c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;";
}var k=kendo.Class.extend({init:function(m){this._cache=new e(1000);
this.options=a.extend({},b,m);
},measure:function(v,t,r){if(r===void 0){r={};
}if(!v){return l();
}var u=h(t);
var o=d(v+u);
var n=this._cache.get(o);
if(n){return n;
}var s=l();
var q=r.box||c;
var m=this._baselineMarker().cloneNode(false);
for(var p in t){var x=t[p];
if(typeof x!=="undefined"){q.style[p]=x;
}}var w=r.normalizeText!==false?g(v):String(v);
q.textContent=w;
q.appendChild(m);
document.body.appendChild(q);
if(w.length){s.width=q.offsetWidth-this.options.baselineMarkerSize;
s.height=q.offsetHeight;
s.baseline=m.offsetTop+this.options.baselineMarkerSize;
}if(s.width>0&&s.height>0){this._cache.put(o,s);
}q.parentNode.removeChild(q);
return s;
},_baselineMarker:function(){var m=document.createElement("div");
m.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;";
return m;
}});
k.current=new k();
function f(o,n,m){return k.current.measure(o,n,m);
}kendo.deepExtend(kendo.util,{LRUCache:e,TextMetrics:k,measureText:f,objectKey:h,hashKey:d,normalizeText:g});
}(window.kendo.jQuery));
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/page",["kendo.drawing"],b);
}(function(){(function(a,m){var e=a.extend,h=a.noop,d=kendo.drawing,g=d.Group,l=d.Surface,k="render",b=kendo.Class;
var f={Path:"path",MultiPath:"multipath",Rect:"rect",Image:"image",Text:"text"};
var i=b.extend({init:function(n,o){this.viewer=o;
this.processor=n.processor;
this.options=n;
this.pageNumber=n.number;
this.element=a("<div class='k-page' />");
this.element.attr(kendo.attr("number"),this.pageNumber);
this._updatePageSize(n);
this.width=n.width;
this.height=n.height;
},resize:function(o){var n=this.element;
this._updatePageSize({width:Math.min(n.width()*o,this.width),height:Math.min(n.height()*o,this.height)});
},_updatePageSize:function(n){this.element.width(n.width).height(n.height);
},destroy:function(){kendo.destroy(this.element);
},render:h});
var c=i.extend({draw:function(){var o=this,n=o.options.geometries;
o.group=new g();
o.surface.draw(o.group);
o._drawGeometries(n);
o.viewer.trigger(k,{page:this});
kendo.ui.progress(o.element,false);
},load:function(){var n=this;
if(n.loaded||!n.processor){return;
}n.processor.fetchPageData(n.pageNumber).then(function(o){n.options=o;
n._initSurface();
n.draw();
});
n.loaded=true;
},_initSurface:function(){var n={width:this.element.width(),height:this.element.height()};
var o=e({width:this.width,height:this.height},this.viewer.options.view);
this.surface=new l(this.element,o);
this._updatePageSize(n);
},_drawGeometries:function(n){var r=this,q;
if(!n){return;
}for(var p=0;
p<=n.length;
p++){var o=n[p];
if(!o){continue;
}switch(o.type){case f.Path:case f.MultiPath:q=r._drawPath(o);
break;
case f.Rect:q=r._drawRect(o);
break;
case f.Image:q=r._drawImage(o);
break;
case f.Text:q=r._drawText(o);
break;
default:q=null;
break;
}if(q){r.group.append(q);
}}},_drawRect:function(n){var o=new kendo.geometry.Rect(n.point,n.size);
return new d.Rect(o,{transform:this._getMatrix(n.transform),fill:n.fillOptions,stroke:n.strokeOptions});
},_drawImage:function(n){var o=new kendo.geometry.Rect(n.point,n.size);
return new d.Image(n.src,o,{transform:this._getMatrix(n.transform)});
},_drawText:function(n){var o={transform:this._getMatrix(n.transform),stroke:n.strokeOptions,fill:n.fillOptions,font:n.font};
return new kendo.drawing.Text(n.content,n.point,o);
},_drawPath:function(o){var r={transform:this._getMatrix(o.transform),stroke:o.strokeOptions,fill:o.fillOptions};
var s=new d.MultiPath(r);
for(var p=0;
p<o.paths.length;
p++){var u=o.paths[p];
if(!u.segments){return;
}s.moveTo.apply(s,u.point);
for(var q=0;
q<u.segments.length;
q++){var t=u.segments[q];
var n=t.points.length===1?s.lineTo:s.curveTo;
n.apply(s,t.points);
}if(u.closed){s.close();
}}return s;
},_getMatrix:function(o){var n=Object.create(kendo.geometry.Matrix.prototype);
kendo.geometry.Matrix.apply(n,o);
return n;
}});
var j=i.extend({init:function(o,q){var p=this,n;
n=a("<canvas style='width: 100%; height: 100%;' />");
p.canvas=n.get(0);
i.fn.init.call(p,o,q);
p.canvas.width=p.width;
p.canvas.height=p.height;
p.element.append(n);
},load:function(n,o){var p=this;
if(p._scale===n&&!o){return;
}else{if(p._scale&&p._scale!==n&&!o){p._scale=n;
p.render(n);
return;
}}if(p.processor){p.processor.fetchPageData(p.pageNumber).then(function(q){p._page=q;
return p.render(n).then(function(){p.viewer.trigger(k,{page:p});
});
});
}p._scale=n;
p.loaded=true;
},render:function(o){var p=this;
var n=this.canvas.getContext("2d"),q=this._page.getViewport({scale:o});
this._scale=o;
this.canvas.width=q.width;
this.canvas.height=q.height;
if(this._renderTask){this._renderTask.cancel();
this._renderTask=null;
}this._updatePageSize({width:q.width,height:q.height});
this._renderTask=this._page.render({canvasContext:n,viewport:q});
this._renderTextLayer(q);
return this._renderTask.promise.then(function(){p._renderTask=null;
}).catchError(function(){});
},_renderTextLayer:function(p){var o=this;
var n=o._page;
if(o.textLayer){o.textLayer.remove();
}o.textLayer=a("<div class='k-text-layer'></div>").get(0);
o.element.append(o.textLayer);
n.getTextContent({normalizeWhitespace:true}).then(function(r){a(o.textLayer).css({height:p.height,width:p.width}).html("");
var q={textContent:r,container:o.textLayer,viewport:p,textDivs:[],enhanceTextSelection:true};
o.processor.renderTextLayer(q);
});
}});
e(kendo.pdfviewer.dpl,{geometryTypes:f,Page:c});
e(kendo.pdfviewer.pdfjs,{Page:j});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/search",["kendo.core"],b);
}(function(){(function(a,f){var b=kendo.Class,c=a.extend,d=a.isArray;
var e=b.extend({init:function(g){var h=this;
h.options=c({},h.options,g);
h.processDom();
},options:{highlightClass:"k-search-highlight",charClass:"k-text-char"},processDom:function(){var h=this;
h.targets=d(h.options.target)?h.options.target:[h.options.target];
h.textNodes=[];
h.charIndex=0;
h.text="";
h.targets.forEach(function(i){h.traverseToTextNode(i);
});
for(var g=0;
g<h.textNodes.length;
g++){h.processTextNode(h.textNodes[g]);
}},traverseToTextNode:function(h){var j=this;
if(h.nodeType===3){j.textNodes.push(h);
}else{for(var g=0;
g<h.childNodes.length;
g++){j.traverseToTextNode(h.childNodes[g]);
}}},processTextNode:function(g){var j=this;
var i=g.textContent;
var h;
j.text=j.text+i;
if(i.length>0){h=a(g).wrap("<span>").parent();
h.empty();
j.splitChars(h.get(0),i);
h.children().unwrap();
}},splitChars:function(j,k){var l=this;
var h="";
for(var g=0;
g<k.length;
g++){h=h+"<span class='"+l.options.charClass+"' "+kendo.attr("char-index")+"="+l.charIndex+">"+k[g]+"</span>";
l.charIndex++;
}j.innerHTML=h;
},search:function(k,i){var j=this;
var g=new RegExp(k,!i?"gi":"g");
var h;
j.matches=[];
j.resetMark();
j.resetHighlight();
j.resetMatchIndex();
if(k===""){return;
}h=g.exec(j.text);
while(h){j.matches.push({startOffset:h.index,endOffset:h.index+h[0].length});
h=g.exec(j.text);
}j.highlightAll();
j.mark();
},highlightAll:function(){var g=this;
g.matches.forEach(function(j,i){var k=j.startOffset;
var h=j.endOffset;
g.highlight(k,h,i+1);
});
},highlight:function(k,g,j){var l=this;
for(var h=k;
h<g;
h++){a(l.targets).find("."+l.options.charClass+"["+kendo.attr("char-index")+"="+h+"]").addClass(l.options.highlightClass).attr(kendo.attr("match-index"),j);
}},resetHighlight:function(){var g=this;
a(g.targets).find("."+g.options.highlightClass).removeClass(g.options.highlightClass);
},resetMatchIndex:function(){var g=this;
a(g.targets).find("."+g.options.charClass+"["+kendo.attr("match-index")+"]").removeAttr(kendo.attr("match-index"));
},mark:function(){var g=this;
if(!g.currentIndex&&g.currentIndex!==0){g.currentIndex=0;
}else{if(g.currentIndex>g.matches.length){g.currentIndex=g.matches.length;
}else{g.resetMark();
}}a(g.targets).find("."+g.options.charClass+"["+kendo.attr("match-index")+"="+g.currentIndex+"]").wrapInner("<mark>");
},resetMark:function(){var g=this;
a(g.targets).find("mark").contents().unwrap();
},nextMatch:function(){var g=this;
g.currentIndex++;
if(g.currentIndex>g.matches.length){g.currentIndex=1;
}g.mark();
},previousMatch:function(){var g=this;
g.currentIndex--;
if(g.currentIndex<1){g.currentIndex=g.matches.length;
}g.mark();
},getMarkedIndex:function(){return this.matches.length?this.currentIndex:0;
},getFirstMarked:function(){return a(this.targets).find("mark").eq(0);
},destroy:function(){var g=this;
g.resetMark();
a(g.targets).children("span:not(."+g.options.charClass+")").each(function(h,j){a(j).text(a(j).text());
});
}});
c(kendo.pdfviewer,{SearchDOM:e});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/dialogs",["kendo.dialog","kendo.window","kendo.binder","kendo.numerictextbox","kendo.dropdownlist"],b);
}(function(){(function(a,j){var g=window.kendo,e=a.extend,b=g.Class,f={svg:".svg",png:".png"},h=g.keys;
var c=b.extend({init:function(k){this.options=e(k,{actions:[{text:k.messages.dialogs.okText}]});
this._dialog=a("<div />").kendoDialog(this.options).getKendoDialog();
},open:function(){this._dialog.center().open();
}});
var d=b.extend({init:function(k){this.options=e(k,this.options,{fileFormats:[{description:k.messages.dialogs.exportAsDialog.png,extension:f.png},{description:k.messages.dialogs.exportAsDialog.svg,extension:f.svg}],title:k.messages.dialogs.exportAsDialog.title,open:function(){this.center();
}});
this._initializeDialog();
return this;
},options:{extension:f.png,autoFocus:true,resizable:false,modal:{preventScroll:true},width:"90%",maxWidth:520,template:"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: name' /></div><div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='description' data-value-field='extension' data-bind='value: extension, source: fileFormats' /></div></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.page #:</label></div><div class='k-edit-field'><input data-role='numerictextbox' data-format='n0' data-min='1' data-max='#: total #' data-bind='value: page' /></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},_updateModel:function(k){if(k.pagesCount){this.viewModel.set("pagesCount",k.pagesCount);
}if(k.page){this.viewModel.set("page",k.page);
}},_initializeDialog:function(){var n=this;
var m=n.options;
var l=m.messages.dialogs;
var k=a("<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />").append(g.template(m.template)({total:m.pagesCount,messages:l})).kendoWindow(m).getKendoWindow();
n.viewModel=g.observable({title:l.exportAsDialog.title,name:l.exportAsDialog.defaultFileName,extension:m.extension,fileFormats:m.fileFormats,pagesCount:m.pagesCount,page:1,apply:n.apply.bind(this),close:function(){k.close();
}});
n._dialog=k;
g.bind(k.element,n.viewModel);
return k;
},open:function(){this._dialog.center().open();
},apply:function(){this._dialog.close();
this.options.apply({fileName:this.viewModel.name+this.viewModel.extension,extension:this.viewModel.extension,page:this.viewModel.page});
}});
var i=b.extend({init:function(k){var l=this;
l.options=e({},k,l.options);
},options:{resizable:false,template:"<div class='k-search-container'><button class='k-button k-button-icon k-flat k-search-dialog-draghandle'><span class='k-icon k-i-handler-drag'></span></button><span class='k-textbox'><input class='k-search-dialog-input' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='#: messages.inputLabel #' title='#: messages.inputLabel #' /><button class='k-button k-button-icon k-flat k-match-case-button' data-bind='css: {k-state-selected: matchCase}, click: matchCaseClick' aria-label='#: messages.matchCase #' title='#: messages.matchCase #'><span class='k-icon k-i-convert-lowercase'></span></button></span><span class='k-search-matches'><span data-bind='text: matchIndex'></span> #: messages.of # <span data-bind='text: matches'></span></span><button class='k-button k-button-icon k-flat' data-bind='click: prev' aria-label='#: messages.previous #' title='#: messages.previous #'><span class='k-icon k-i-arrow-up'></span></button><button class='k-button k-button-icon k-flat' data-bind='click: next' aria-label='#: messages.next #' title='#: messages.next #'><span class='k-icon k-i-arrow-down'></span></button><button class='k-button k-button-icon k-flat' data-bind='click: close' aria-label='#: messages.close #' title='#: messages.close #'><span class='k-icon k-i-close'></<span></button></div>"},open:function(){var k=this;
if(!k.dialog){k._initializeDialog();
}k.dialog.open();
},_initializeDialog:function(){var n=this;
var m=g.template(n.options.template);
var k=a("<div class='k-pdf-viewer-search-dialog'></div>").append(m({messages:n.options.messages}));
var l={top:n.options.position.top+16,left:n.options.position.left+16};
n.dialog=new g.ui.Window(k,e({},n.options,{autoFocus:false,title:false,position:{top:l.top,left:l.left},minHeight:30,draggable:{dragHandle:".k-search-dialog-draghandle"},activate:function(o){o.sender.element.find(".k-search-dialog-input").focus();
}}));
n.searchModel=g.observable({boundValue:"",searchText:"",matchCase:false,matchIndex:0,matches:0,matchCaseClick:function(){this.set("matchCase",!this.matchCase);
},next:n.options.next,prev:n.options.prev,close:function(){this.set("boundValue","");
n.dialog.close();
},onKeyup:function(o){var p=o.keyCode;
var q=o.shiftKey?this.prev:this.next;
if(p===h.ENTER){q();
o.preventDefault();
}},onInput:function(o){this.set("searchText",o.target.value);
}});
g.bind(n.dialog.element,n.searchModel);
}});
e(g.pdfviewer,{dialogs:{ErrorDialog:c,ExportAsDialog:d,SearchDialog:i}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("pdfviewer/commands",["kendo.upload"],b);
}(function(){(function(a,r){var i=window.kendo,q=a.proxy,h=a.extend,n=a.parseJSON,p=i.ui.progress,b=i.Class,j="open",u="zoomStart",t="zoomEnd";
var c=b.extend({init:function(v){this.options=v;
this.viewer=v.viewer;
this.errorMessages=this.viewer.options.messages.errorMessages;
}});
var k=c.extend({init:function(v){c.fn.init.call(this,v);
this.upload=this.viewer.processor.upload;
},exec:function(){(this.viewer._upload||this._initUpload()).element.click();
},_initUpload:function(){var w={select:q(this._onSelect,this),success:q(this._onSuccess,this),error:q(this._onError,this),complete:q(this._onComplete,this),showFileList:false,multiple:false,validation:{allowedExtensions:[".pdf"]}};
if(this.upload){h(w,{async:{saveUrl:this.upload.url,autoUpload:true,saveField:this.upload.saveField}});
}var v=a('<input name="files" accept=".pdf" type="file" />').kendoUpload(w).getKendoUpload();
this.viewer._upload=v;
return v;
},_onComplete:function(){p(this.viewer.pageContainer,false);
},_onSuccess:function(v){var w=n(v.response);
if(a.isPlainObject(w)){this.viewer.processor.fromJSON(w);
}else{this.viewer._triggerError({error:w,message:this.errorMessages.parseError});
}},_onError:function(v){this.viewer._triggerError({error:v.XMLHttpRequest.responseText,message:this.errorMessages.notSupported});
},_onSelect:function(v){var y=this;
var w=v.files[0];
p(y.viewer.pageContainer,true);
if(y.viewer.trigger(j,{file:w})||y.upload){return;
}else{if(w.extension.toLowerCase()!==".pdf"){y.viewer._triggerError({error:w,message:y.errorMessages.notSupported});
return;
}}var x=new FileReader();
x.onload=function(A){var z=A.target.result;
y.viewer.fromFile(z);
};
x.onerror=function(){y.viewer._triggerError({error:w,message:y.errorMessages.parseError});
};
x.readAsArrayBuffer(w.rawFile);
}});
var m=c.extend({exec:function(){var v=this.options.value;
this.viewer.activatePage(v);
}});
var d=c.extend({exec:function(){if(!this.viewer.document){this.viewer._triggerError({message:this.errorMessages.notFound});
return;
}var v=this.viewer.document.info&&this.viewer.document.info.title||this.viewer.options.messages.defaultFileName;
this.viewer.processor.downloadFile(v);
}});
var g=c.extend({init:function(v){v=a.extend(v,this.options);
c.fn.init.call(this,v);
},exec:function(){var v=this.viewer._saveDialog||this._initDialog();
v._updateModel({pagesCount:this.viewer.document&&this.viewer.document.total||1,page:this.viewer.options.page});
v.open();
},apply:function(w){var v=w.extension;
if(v===".png"){this.viewer.exportImage(w);
}else{if(v===".svg"){this.viewer.exportSVG(w);
}}},_initDialog:function(){this.viewer._saveDialog=new i.pdfviewer.dialogs.ExportAsDialog({apply:this.apply.bind(this),pagesCount:this.viewer.document&&this.viewer.document.total||1,messages:this.viewer.options.messages});
return this.viewer._saveDialog;
}});
var f=c.extend({exec:function(){var v=this,w=v.viewer;
w._toggleSelection(true);
}});
var e=c.extend({exec:function(){var v=this,w=v.viewer;
w._toggleSelection(false);
}});
var l=c.extend({init:function(v){var w=this;
w.viewer=v.viewer;
if(!w.viewer.searchDialog){w.viewer.searchDialog=new i.pdfviewer.dialogs.SearchDialog({position:{top:w.viewer.pageContainer.offset().top,left:w.viewer.pageContainer.offset().left},messages:w.viewer.options.messages.dialogs.search,open:q(w._open,w),next:q(w._next,w),prev:q(w._prev,w),close:q(w._close,w)});
}c.fn.init.call(w,v);
},exec:function(){var v=this;
v.viewer.searchDialog.open();
},_open:function(){var v=this;
v.changeHandler=q(v._change,v);
v.zoomStartHandler=q(v._closeDialog,v);
v.openFileHandler=q(v._closeDialog,v);
if(!v.viewer._searchDOM){v.viewer._initSearchDOM();
v.viewer.searchDialog.searchModel.bind("change",v.changeHandler);
v.viewer.bind("zoomStart",v.zoomStartHandler);
v.viewer.bind("open",v.openFileHandler);
}},_close:function(){var w=this;
var v=w.viewer._searchDOM;
w.viewer.searchDialog.searchModel.unbind("change",w.changeHandler);
w.viewer.unbind("zoomStart",w.zoomStartHandler);
w.viewer.unbind("open",w.openFileHandler);
v.destroy();
delete w.viewer._searchDOM;
w._updateSearchModel();
},_change:function(v){var z=this;
var y=z.viewer._searchDOM;
var w=v.field;
var x=z.viewer.searchDialog.searchModel;
var A=x[w];
if(!y){return;
}switch(w){case"searchText":y.search(A,x.matchCase);
z._updateSearchModel();
break;
case"matchCase":y.search(x.searchText,A);
z._updateSearchModel();
break;
default:break;
}},_next:function(){var w=this;
var v=w.viewer._searchDOM;
if(v.matches&&v.matches.length){v.nextMatch();
w._updateSearchModel();
}},_prev:function(){var w=this;
var v=w.viewer._searchDOM;
if(v.matches&&v.matches.length){v.previousMatch();
w._updateSearchModel();
}},_updateSearchModel:function(){var x=this;
var w=x.viewer._searchDOM;
var v=x.viewer.searchDialog.searchModel;
if(w){v.set("matches",w.matches.length);
v.set("matchIndex",w.getMarkedIndex());
x._scrollToMark();
}else{v.set("searchText","");
v.set("matches",0);
v.set("matchIndex",0);
v.set("matchCase",false);
}},_scrollToMark:function(){var z=this;
var y=z.viewer._searchDOM;
var v=y.getFirstMarked();
var x=z.viewer._scroller;
var w;
if(!v.length){return;
}w=v.offset().top-x.scrollElement.offset().top-100;
x.scrollTo(x.scrollLeft,w*-1);
},_closeDialog:function(){var v=this;
v.viewer.searchDialog.dialog.close();
}});
var s=c.extend({exec:function(){var B=this,x=B.options,E=B.viewer,A=x.scale,w=0,y=B.viewer._pageNum,v=E.pageContainer[0].clientHeight,C=1,z=[];
if(E.processingLib==="dpl"){return;
}A=B._calculateZoom();
var D=function(){var F=B.viewer._scroller,G=E._scrollingStarted;
if(F.scrollTop>F.scrollHeight()){F._resize();
}if(!G){E.activatePage(y);
E._scrollingStarted=false;
}};
if(!A){return;
}E.zoomScale=A;
E._scrollingStarted=false;
E.pages.forEach(function(F){var G;
if(E._visiblePages.indexOf(F)!==-1&&F.loaded){z.push(F.render(A));
G=F._page.getViewport({scale:A}).height;
}else{F.resize(A);
G=F.element.height();
}w+=G;
if(w<=v){C++;
}});
if(E._visiblePagesCount!=C){E._visiblePagesCount=C;
E._loadVisiblePages();
}Promise.all(z).then(function(){D();
B._triggerZoomEnd(A);
}).catchError(function(){D();
B._triggerZoomEnd(A);
});
},_calculateZoom:function(){var v=this.options,A=this.viewer,B=A.options,w=A.pageContainer,C=A._visiblePages&&A._visiblePages[0].canvas,y=v.scale,z=y,x;
A._allowResize=false;
A._autoFit=false;
if(v.zoomIn){z=y=A.zoomScale+B.zoomRate;
}else{if(v.zoomOut){z=y=A.zoomScale-B.zoomRate;
}else{if(y==="auto"){A._allowResize=true;
z=A._autoZoomScale;
}else{if(y==="actual"){z=1;
}else{if(y==="fitToWidth"){A._allowResize=true;
A._autoFit="fitToWidth";
z=w.width()/(C.width/A.zoomScale);
}else{if(y==="fitToPage"){A._allowResize=true;
A._autoFit="fitToPage";
z=w.height()/(C.height/A.zoomScale);
}}}}}}x=y<B.zoomMin||y>B.zoomMax;
if(x||A.trigger(u,{scale:y})){return;
}if(v.updateComboBox){A.toolbar._updateZoomComboBox(y);
}return z;
},_triggerZoomEnd:function(v){var w=this,x=w.viewer;
x.trigger(t,{scale:v});
}});
var o=c.extend({init:function(v){c.fn.init.call(this,v);
},exec:function(){var v=this;
if(!v.viewer.document){v.viewer._triggerError({message:this.errorMessages.notFound});
return;
}v._renderPrintContainer();
v._loadAllPages();
},_renderPrintContainer:function(){this.printContainer=a("<div></div>");
},_loadAllPages:function(){var B=this;
var y=B.viewer.pages;
var x=B.viewer.zoom();
var C=20;
var A=true;
var w;
for(var v=0;
v<y.length;
v++){if(!y[v].loaded){A=false;
y[v].load(4/3,true);
C+=20;
}}var z=function(){clearTimeout(w);
w=setTimeout(function(){B.viewer.unbind("render",z);
B._renderPrintPages();
setTimeout(function(){B._printDocument();
B.viewer.zoom(x);
},0);
},C);
};
if(A){z();
}else{B.viewer.bind("render",z);
}},_renderPrintPages:function(){var w=this.viewer.pages;
for(var v=0;
v<w.length;
v++){this._renderPrintImage(w[v]);
}},_renderPrintImage:function(y){var v=y.canvas;
var w=a("<div></div>");
var x="<img src='"+v.toDataURL()+"' width='"+y.width+"px' height='"+y.height+"px' />";
w.append(x);
this.printContainer.append(w);
},_printDocument:function(){var y=this;
var x=y.viewer.pages;
var z=x[0].width;
var v=x[0].height;
var w=window.open("","","innerWidth="+z+",innerHeight="+v+"location=no,titlebar=no,toolbar=no");
w.document.write(y.printContainer.html());
w.document.close();
w.focus();
w.print();
w.close();
}});
h(i.pdfviewer,{OpenCommand:k,PageChangeCommand:m,DownloadCommand:d,EnableSelectionCommand:f,EnablePanCommand:e,ExportCommand:g,PrintCommand:o,OpenSearchCommand:l,ZoomCommand:s});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("kendo.pdfviewer",["kendo.mobile.scroller","pdfviewer/processors/pdfjs-processor","pdfviewer/processors/dpl-processor","pdfviewer/toolbar","pdfviewer/page","pdfviewer/search","pdfviewer/dialogs","pdfviewer/commands"],b);
}(function(){var a={id:"pdfviewer",name:"PDFViewer",category:"web",description:"PDFViewer to display pdfs in the browser",depends:["core","window","dialog","toolbar","mobile.scroller","upload","combobox","drawing","binder","dropdownlist","numerictextbox"]};
(function(b,x){var k=".kendoPDFViewer",g=window.kendo,w=g.ui,r=b.proxy,e=b.extend,c=g.drawing,i=b.extend({PLUS:187,MINUS:189,ZERO:48,NUMPAD_ZERO:96},g.keys),m,A=w.Widget,q=g.ui.progress,t="scroll",s="render",l="open",d="error",f="focus"+k,h="keydown"+k,j="DOMMouseScroll"+k+" mousewheel"+k,y="update",B=1.25,n="pagechange",E="zoomStart",D="zoomEnd",C="ZoomCommand",z="#ffffff",v="tabindex",p={pdfjs:"pdfjs",dpl:"dpl"},u={viewer:"k-pdf-viewer k-widget",scroller:"k-canvas k-list-scroller",enableTextSelection:"k-enable-text-select",enablePanning:"k-enable-panning",highlightClass:"k-search-highlight",charClass:"k-text-char"};
var o=A.extend({init:function(F,G){var H=this;
A.fn.init.call(H,F,g.deepExtend({},this.options,G));
H._wrapper();
if(H.options.toolbar){H._renderToolbar();
}H._initProcessor(G||{});
H._renderPageContainer();
H._loadDocument();
H._tabindex();
g.notify(H,g.ui);
},events:[s,l,d,E,D],options:{name:"PDFViewer",view:{type:"canvas"},pdfjsProcessing:{file:null},dplProcessing:{read:{url:null,type:"GET",dataType:"json",pageField:"pageNumber"},upload:{url:null,saveField:"file"},download:{url:null},loadOnDemand:false},toolbar:{items:[]},width:1000,height:1200,page:1,defaultPageSize:{width:794,height:1123},scale:null,zoomMin:0.5,zoomMax:4,zoomRate:0.25,messages:{defaultFileName:"Document",toolbar:{zoom:{zoomOut:"Zoom Out",zoomIn:"Zoom In",actualWidth:"Actual Width",autoWidth:"Automatic Width",fitToWidth:"Fit to Width",fitToPage:"Fit to Page"},open:"Open",exportAs:"Export",download:"Download",pager:{first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",of:" of {0} ",page:"page",pages:"pages"},print:"Print",toggleSelection:"Enable Selection",togglePan:"Enable Panning",search:"Search"},errorMessages:{notSupported:"Only pdf files allowed.",parseError:"PDF file fails to process.",notFound:"File is not found."},dialogs:{exportAsDialog:{title:"Export...",defaultFileName:"Document",pdf:"Portable Document Format (.pdf)",png:"Portable Network Graphics (.png)",svg:"Scalable Vector Graphics (.svg)",labels:{fileName:"File name",saveAsType:"Save as",page:"Page"}},okText:"OK",save:"Save",cancel:"Cancel",search:{inputLabel:"Search Text",matchCase:"Match Case",next:"Next Match",previous:"Previous Match",close:"Close",of:"of"}}}},_wrapper:function(){var G=this,F=G.options;
G.wrapper=G.element;
G.wrapper.width(F.width).height(F.height).addClass(u.viewer).on(f,r(G._focus,G)).on(h,r(G._keydown,G));
G._allowResize=G.options.scale===null;
G._autoZoomScale=B;
G.zoomScale=G.options.scale||G._autoZoomScale;
G._resizeHandler=g.onResize(function(){G.resize();
});
G._pageNum=G.options.page;
},_focus:function(F){if(this.toolbar){this.toolbar.wrapper.focus();
}else{this.pageContainer.focus();
}F.preventDefault();
},_keydown:function(G){var I=[i.PLUS,i.NUMPAD_PLUS],H=[i.MINUS,i.NUMPAD_MINUS],K=[i.ZERO,i.NUMPAD_ZERO],J=false,F={command:C,options:{updateComboBox:true}};
if(!G.ctrlKey||this._blankPage||this.processingLib===p.dpl){return;
}if(I.includes(G.keyCode)){F.options.zoomIn=true;
J=true;
}else{if(H.includes(G.keyCode)){F.options.zoomOut=true;
J=true;
}else{if(K.includes(G.keyCode)){F.options.scale=B;
J=true;
}}}if(J){this.execute(F);
G.preventDefault();
}},_initProcessor:function(F){var H=this,G;
G=F.dplProcessing?H.options.dplProcessing:H.options.pdfjsProcessing;
H.processingLib=F.dplProcessing?p.dpl:p.pdfjs;
H.processor=new g.pdfviewer[H.processingLib].processor(G,H);
m=g.pdfviewer[H.processingLib].Page;
},_renderToolbar:function(){var G=this,F=G.options;
var I={pager:{messages:F.messages.toolbar.pager},scale:F.scale,resizable:true,items:F.toolbar.items,width:F.width,action:G.execute.bind(G),messages:F.messages.toolbar,viewer:this};
var H=b("<div />");
H.appendTo(G.element);
G.toolbar=new g.pdfviewer.Toolbar(H,I);
},_initErrorDialog:function(G){var H=this;
if(!H._errorDialog){G=e(G,{messages:H.options.messages});
var F=new g.pdfviewer.dialogs.ErrorDialog(G);
H._errorDialog=F._dialog;
}return H._errorDialog;
},_renderPageContainer:function(){var F=this;
if(!F.pageContainer){F.pageContainer=b("<div />");
F.pageContainer.addClass(u.scroller);
F.pageContainer.attr(v,0);
F.wrapper.append(F.pageContainer);
}},_triggerError:function(G){var F=this._initErrorDialog();
e(G,{dialog:F});
if(this.pageContainer){q(this.pageContainer,false);
}if(this.trigger(d,G)){return;
}F.open().content(G.message);
},_renderPages:function(){var J=this,F=J.document,I;
J.pages=[];
if(!F||!F.total){J._renderBlankPage();
return;
}I=F.pages;
for(var G=1;
G<=F.total;
G++){var K,H={processor:J.processor,number:G};
if(I&&I.length){H=e(H,I[G-1]);
}K=new m(H,J);
J.pages.push(K);
J.pageContainer.append(K.element);
}J._attachContainerEvents();
J._getVisiblePagesCount();
},_renderBlankPage:function(){this._blankPage=new m(this.options.defaultPageSize,this);
this.pageContainer.append(this._blankPage.element);
this.trigger(y,{isBlank:true});
},_resize:function(){var H=this,F,G;
if(!H._allowResize){return;
}if(!H.pages||!H.pages.length){if(H._blankPage){G=F/H._blankPage.element.width();
H._blankPage.resize(G);
}return;
}if(H.toolbar){H.toolbar.resize(true);
}if(H._resizeHandler){clearTimeout(H._resizeHandler);
}H._resizeHandler=setTimeout(H._resizePages.bind(H),100);
},_resizePages:function(){var H=this,F=H.pageContainer[0].clientWidth,G=0;
H.pages.forEach(function(J){var I=F/J.element.width();
if(I>G){G=I;
}});
if(H._autoFit){H.zoom(H._autoFit,true);
return;
}G=Math.min(Math.max(G,H.options.zoomMin),B);
if(G!=H.zoomScale){H.zoom(G,true);
H.zoomScale=G;
H._allowResize=true;
}},_attachContainerEvents:function(){var F=this;
F._wheel=g.throttle(F._wheel.bind(F),300);
if(F.processingLib!==p.dpl){F.pageContainer.on(j,function(G){if(!G.ctrlKey){return;
}if(document.activeElement!==F.pageContainer[0]){F.pageContainer.focus();
}F._wheel(G);
G.preventDefault();
});
}F._scroller=new g.mobile.ui.Scroller(F.pageContainer,{zoom:false,elastic:true});
F._scroller.scrollElement.addClass(u.enablePanning);
F._scroller.bind(t,r(F._scroll,this));
},_scroll:function(M){var V=this,H=V.pageContainer[0].scrollHeight,F=V.pageContainer.height(),I=M.scrollTop,G=V.pageContainer.offset().top,W=V.pages.length,O=V._pageNum,N=O-1,Q=O,P,J,L,K,R,T,S,U=I-V._prevScrollTop>0?1:-1;
if(V._preventScroll||!W){V._preventScroll=false;
return;
}V._scrollingStarted=true;
J=V.pages[N];
L=J.element.offset().top-G;
K=J.element.height();
if(U==-1&&V.pages[N+U]){R=V.pages[N-V._visiblePagesCount]||V.pages[N+U];
T=R.element.offset().top-G;
S=R.element.height();
}if(Math.abs(I-(V._prevScrollTop||0))>F*V.zoomScale){Q=Math.floor(I*(1/(H/W)))+1;
}else{if(L<0&&Math.abs(L)>=K/2&&U===1){Q++;
}else{if(R&&Math.abs(T)<=S/2){Q--;
}}}if(O!==Q&&Q>=1&&Q<=W){P=V.pages[Q-1].element;
if(P.offset().top>F){return;
}V._pageNum=Q;
V._loadVisiblePages();
V.trigger(y,{action:n,page:Q,total:W});
}V._prevScrollTop=I;
},_wheel:function(G){var H=G.originalEvent,F=H.wheelDelta?-H.wheelDelta:H.detail,I=F<0;
this.execute({command:C,options:{zoomIn:I,zoomOut:!I,updateComboBox:true}});
G.preventDefault();
},zoom:function(G,F){var H=this;
if(!G){return H.zoomScale;
}return H.execute({command:C,options:{scale:G,updateComboBox:!F}});
},execute:function(H){var G=e({viewer:this},H.options);
var F=new g.pdfviewer[H.command](G);
return F.exec();
},_loadDocument:function(){var G=this;
var F=G.options.page;
q(G.pageContainer,true);
G.processor.fetchDocument().done(function(H){G._clearPages();
G.document=H;
G._renderPages();
G.resize(true);
if(H){F=F>=1&&F<=H.total?F:1;
G.activatePage(F);
}q(G.pageContainer,false);
});
},loadPage:function(F){var G=this.pages&&this.pages[F-1];
if(G){return G.load(this.zoomScale);
}},activatePage:function(F){var G=this.pages&&this.pages[F-1],J=this._scroller,L,K,I,H;
if(!G){return;
}L=J.scrollTop;
K=J.element.offset().top;
I=G.element.offset().top;
H=!this._autoFit?parseInt(G.element.css("marginTop"),10):0;
this._pageNum=F;
this._loadVisiblePages();
this._preventScroll=true;
this._scroller.scrollTo(0,-L-I+K+H);
this.trigger(y,{action:n,page:F,total:this.pages.length});
},_getVisiblePagesCount:function(){var I=this,H=0,J=0,F=I.pageContainer[0].clientHeight,G=0;
while(H<=F&&G<I.pages.length){H+=I.pages[G].element.height();
J++;
G++;
}I._visiblePagesCount=J;
},_loadVisiblePages:function(){var I=this.pages&&this.pages.length,H=Math.max(this._pageNum-this._visiblePagesCount,1),G=Math.min(this._pageNum+this._visiblePagesCount,I);
this._visiblePages=this.pages.slice(H-1,G);
for(var F=H;
F<=G;
F++){this.loadPage(F);
}},_loadAllPages:function(){var G=this.pages&&this.pages.length;
var H=[];
for(var F=0;
F<=G;
F++){H.push(this.loadPage(F));
}return H;
},fromFile:function(F){this.zoomScale=this.options.scale||B;
this.trigger(y,{action:"zoom",zoom:this.options.scale||"auto"});
this.processor._updateDocument(F);
this._loadDocument();
},exportImage:function(G){var K=this;
var I=G.page;
var H=K.pages[I-1]||K._blankPage;
var J=new c.Group();
H.load();
var F=g.drawing.Path.fromRect(new g.geometry.Rect([0,0],[H.width,H.height]),{fill:{color:z},stroke:null});
q(K.pageContainer,true);
J.append(F,H.group);
c.exportImage(J).done(function(L){q(K.pageContainer,false);
g.saveAs({dataURI:L,fileName:G.fileName,proxyURL:G.proxyURL||"",forceProxy:G.forceProxy,proxyTarget:G.proxyTarget});
});
},exportSVG:function(F){var I=this;
var H=F.page;
var G=I.pages[H-1]||I._blankPage;
q(I.pageContainer,true);
G.load();
c.exportSVG(G.group).done(function(J){q(I.pageContainer,false);
g.saveAs({dataURI:J,fileName:F.fileName,proxyURL:F.proxyURL||"",forceProxy:F.forceProxy,proxyTarget:F.proxyTarget});
});
},setOptions:function(F){var G=this;
if(F.pdfjsProcessing||F.dplProcessing){G._initProcessor();
}F=b.extend(G.options,F);
A.fn.setOptions.call(G,F);
if(F.page){G._pageNum=F.page;
G.activatePage(F.page);
}if(F.width){G.element.width(F.width);
}if(F.height){G.element.height(F.height);
}},destroy:function(){if(this._resizeHandler){g.unbindResize(this._resizeHandler);
}if(this._errorDialog){this._errorDialog.destroy();
}if(this._saveDialog){this._saveDialog.destroy();
}if(this._upload){this._upload.destroy();
}if(this.toolbar){this.toolbar.unbind();
this.toolbar.destroy();
this.toolbar=null;
}if(this.pages&&this.pages.length){this.pages.forEach(function(F){F.destroy();
});
this.pages=[];
}if(this._scroller){this._scroller.unbind();
this._scroller.destroy();
}this.pageContainer.off(k);
A.fn.destroy.call(this);
},_clearPages:function(){this.pages=[];
this.document=null;
this._pageNum=1;
this.pageContainer.off(k);
this.pageContainer.empty();
if(this._scroller){this._scroller.reset();
this._scroller.unbind();
this._scroller.destroy();
}},_toggleSelection:function(F){var G=this;
if(F===x){F=true;
}G._scroller.userEvents._shouldNotMove=F;
G._scroller.scrollElement.toggleClass(u.enableTextSelection,F);
G._scroller.scrollElement.toggleClass(u.enablePanning,!F);
},_initSearchDOM:function(){var G=this;
var F=new Promise(function(H){Promise.all(G._loadAllPages()).then(function(){G._searchDOM=new g.pdfviewer.SearchDOM({target:G._getTextLayers(),highlightClass:u.highlightClass,charClass:u.charClass});
H();
});
});
return F;
},_getTextLayers:function(){return this.pages.map(function(F){return F.textLayer;
});
}});
w.plugin(o);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
