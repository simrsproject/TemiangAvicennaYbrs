(function(b,a){a("kendo.data.odata",["kendo.core"],b);
}(function(){var a={id:"data.odata",name:"OData",category:"framework",depends:["core"],hidden:true};
(function(b,y){var p=window.kendo,i=b.extend,r="\r\n",h="\r\n\r\n",o=p.isFunction,s={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isnullorempty:"eq",isnotnullorempty:"ne",isempty:"eq",isnotempty:"ne"},t=i({},s,{contains:"contains"}),q={pageSize:b.noop,page:b.noop,filter:function(A,z,B){if(z){z=x(z,B);
if(z){A.$filter=z;
}}},sort:function(B,A){var z=b.map(A,function(D){var C=D.field.replace(/\./g,"/");
if(D.dir==="desc"){C+=" desc";
}return C;
}).join(",");
if(z){B.$orderby=z;
}},skip:function(z,A){if(A){z.$skip=A;
}},take:function(z,A){if(A){z.$top=A;
}}},g={read:{dataType:"jsonp"}};
function x(A,K){var I=[],G=A.logic||"and",D,F,z,J,C,H,L,E,B=A.filters;
for(D=0,F=B.length;
D<F;
D++){A=B[D];
z=A.field;
L=A.value;
H=A.operator;
if(A.filters){A=x(A,K);
}else{E=A.ignoreCase;
z=z.replace(/\./g,"/");
A=s[H];
if(K){A=t[H];
}if(H==="isnullorempty"){A=p.format("{0} {1} null or {0} {1} ''",z,A);
}else{if(H==="isnotnullorempty"){A=p.format("{0} {1} null and {0} {1} ''",z,A);
}else{if(H==="isnull"||H==="isnotnull"){A=p.format("{0} {1} null",z,A);
}else{if(H==="isempty"||H==="isnotempty"){A=p.format("{0} {1} ''",z,A);
}else{if(A&&L!==y){J=b.type(L);
if(J==="string"){C="'{1}'";
L=L.replace(/'/g,"''");
if(E===true){z="tolower("+z+")";
}}else{if(J==="date"){if(K){C="{1:yyyy-MM-ddTHH:mm:ss+00:00}";
L=p.timezone.apply(L,"Etc/UTC");
}else{C="datetime'{1:yyyy-MM-ddTHH:mm:ss}'";
}}else{C="{1}";
}}if(A.length>3){if(A!=="substringof"){C="{0}({2},"+C+")";
}else{C="{0}("+C+",{2})";
if(H==="doesnotcontain"){if(K){C="{0}({2},'{1}') eq -1";
A="indexof";
}else{C+=" eq false";
}}}}else{C="{2} {0} "+C;
}A=p.format(C,A,L,z);
}}}}}}I.push(A);
}A=I.join(" "+G+" ");
if(I.length>1){A="("+A+")";
}return A;
}function w(A){for(var z in A){if(z.indexOf("@odata")===0){delete A[z];
}}}function n(){return Math.floor((1+Math.random())*65536).toString(16).substr(1);
}function d(z){return z+n()+"-"+n()+"-"+n();
}function f(z,A){var B=r+"--"+z;
if(A){B+="--";
}return B;
}function e(D,C,B,z){var E=D.options[z].url;
var A=p.format("{0} ",B);
if(o(E)){return A+E(C);
}else{return A+E;
}}function l(A,z){var B="";
B+=f(A,false);
B+=r+"Content-Type: application/http";
B+=r+"Content-Transfer-Encoding: binary";
B+=r+"Content-ID: "+z;
return B;
}function k(A){var z="";
z+=r+"Content-Type: application/json;odata=minimalmetadata";
z+=r+"Prefer: return=representation";
z+=h+p.stringify(A);
return z;
}function m(B,A,z,C,G,F){var E="";
for(var D=0;
D<B.length;
D++){E+=l(A,z);
E+=h+e(G,B[D],G.options[C].type,C)+" HTTP/1.1";
if(!F){E+=k(B[D]);
}E+=r;
z++;
}return E;
}function v(C,z,B,A,G,D,F){var E="";
E+=j(z,B);
E+=m(C,B,A,D,G,F);
E+=f(B,true);
E+=r;
return E;
}function j(z,A){var B="";
B+="--"+z+r;
B+="Content-Type: multipart/mixed; boundary="+A+r;
return B;
}function c(G,D){var E={};
var A=d("sf_batch_");
var F="";
var B=0;
var z=G.options.batch.url;
var C=d("sf_changeset_");
E.type=G.options.batch.type;
E.url=o(z)?z():z;
E.headers={"Content-Type":"multipart/mixed; boundary="+A};
if(D.updated.length){F+=v(D.updated,A,C,B,G,"update",false);
B+=D.updated.length;
C=d("sf_changeset_");
}if(D.destroyed.length){F+=v(D.destroyed,A,C,B,G,"destroy",true);
B+=D.destroyed.length;
C=d("sf_changeset_");
}if(D.created.length){F+=v(D.created,A,C,B,G,"create",false);
}F+=f(A,true);
E.data=F;
return E;
}function u(H){var G=H.match(/--changesetresponse_[a-z0-9-]+$/gm);
var F=0;
var B=[];
var z;
var I;
var A;
var E;
var D;
B.push({models:[],passed:true});
for(var C=0;
C<G.length;
C++){E=G[C];
if(E.lastIndexOf("--",E.length-1)){if(C<G.length-1){B.push({models:[],passed:true});
}continue;
}if(!F){F=H.indexOf(E);
}else{F=H.indexOf(E,F+E.length);
}z=H.substring(F,H.indexOf("--",F+1));
I=z.match(/^HTTP\/1\.\d (\d{3}) (.*)$/gm).pop();
A=p.parseFloat(I.match(/\d{3}/g).pop());
if(A>=200&&A<=299){D=z.match(/\{.*\}/gm);
if(D){B[B.length-1].models.push(JSON.parse(D[0]));
}}else{B[B.length-1].passed=false;
}}return B;
}i(true,p.data,{schemas:{odata:{type:"json",data:function(z){return z.d.results||[z.d];
},total:"d.__count"}},transports:{odata:{read:{cache:true,dataType:"jsonp",jsonp:"$callback"},update:{cache:true,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(B,D,E){var C,F,A,z;
B=B||{};
D=D||"read";
z=(this.options||g)[D];
z=z?z.dataType:"json";
if(D==="read"){C={$inlinecount:"allpages"};
if(z!="json"){C.$format="json";
}for(A in B){if(q[A]){q[A](C,B[A],E);
}else{C[A]=B[A];
}}}else{if(z!=="json"){throw new Error("Only json dataType can be used for "+D+" operation.");
}if(D!=="destroy"){for(A in B){F=B[A];
if(typeof F==="number"){B[A]=F+"";
}}C=p.stringify(B);
}}return C;
}}}});
i(true,p.data,{schemas:{"odata-v4":{type:"json",data:function(z){if(b.isArray(z)){for(var A=0;
A<z.length;
A++){w(z[A]);
}return z;
}else{z=b.extend({},z);
w(z);
if(z.value){return z.value;
}return[z];
}},total:function(z){return z["@odata.count"];
}}},transports:{"odata-v4":{batch:{type:"POST"},read:{cache:true,dataType:"json"},update:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:true,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:true,dataType:"json",type:"DELETE"},parameterMap:function(z,B){var A=p.data.transports.odata.parameterMap(z,B,true);
if(B=="read"){A.$count=true;
delete A.$inlinecount;
}return A;
},submit:function(A){var C=this;
var B=c(C,A.data);
var z=A.data;
if(!z.updated.length&&!z.destroyed.length&&!z.created.length){return;
}b.ajax(i(true,{},{success:function(F){var G=u(F);
var E=0;
var D;
if(z.updated.length){D=G[E];
if(D.passed){A.success(D.models.length?D.models:[],"update");
}E++;
}if(z.destroyed.length){D=G[E];
if(D.passed){A.success([],"destroy");
}E++;
}if(z.created.length){D=G[E];
if(D.passed){A.success(D.models,"create");
}}},error:function(E,F,D){A.error(E,F,D);
}},B));
}}}});
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
