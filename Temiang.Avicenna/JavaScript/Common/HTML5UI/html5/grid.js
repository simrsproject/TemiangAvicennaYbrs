(function(b,a){a("util/text-metrics",["kendo.core"],b);
}(function(){(function(a){window.kendo.util=window.kendo.util||{};
var e=kendo.Class.extend({init:function(m){this._size=m;
this._length=0;
this._map={};
},put:function(n,p){var o=this._map;
var m={key:n,value:p};
o[n]=m;
if(!this._head){this._head=this._tail=m;
}else{this._tail.newer=m;
m.older=this._tail;
this._tail=m;
}if(this._length>=this._size){o[this._head.key]=null;
this._head=this._head.newer;
this._head.older=null;
}else{this._length++;
}},get:function(n){var m=this._map[n];
if(m){if(m===this._head&&m!==this._tail){this._head=m.newer;
this._head.older=null;
}if(m!==this._tail){if(m.older){m.older.newer=m.newer;
m.newer.older=m.older;
}m.older=this._tail;
m.newer=null;
this._tail.newer=m;
this._tail=m;
}return m.value;
}}});
var i=/\r?\n|\r|\t/g;
var j=" ";
function g(m){return String(m).replace(i,j);
}function h(n){var o=[];
for(var m in n){o.push(m+n[m]);
}return o.sort().join("");
}function d(o){var m=2166136261;
for(var n=0;
n<o.length;
++n){m+=(m<<1)+(m<<4)+(m<<7)+(m<<8)+(m<<24);
m^=o.charCodeAt(n);
}return m>>>0;
}function l(){return{width:0,height:0,baseline:0};
}var b={baselineMarkerSize:1};
var c;
if(typeof document!=="undefined"){c=document.createElement("div");
c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;";
}var k=kendo.Class.extend({init:function(m){this._cache=new e(1000);
this.options=a.extend({},b,m);
},measure:function(v,t,r){if(r===void 0){r={};
}if(!v){return l();
}var u=h(t);
var o=d(v+u);
var n=this._cache.get(o);
if(n){return n;
}var s=l();
var q=r.box||c;
var m=this._baselineMarker().cloneNode(false);
for(var p in t){var x=t[p];
if(typeof x!=="undefined"){q.style[p]=x;
}}var w=r.normalizeText!==false?g(v):String(v);
q.textContent=w;
q.appendChild(m);
document.body.appendChild(q);
if(w.length){s.width=q.offsetWidth-this.options.baselineMarkerSize;
s.height=q.offsetHeight;
s.baseline=m.offsetTop+this.options.baselineMarkerSize;
}if(s.width>0&&s.height>0){this._cache.put(o,s);
}q.parentNode.removeChild(q);
return s;
},_baselineMarker:function(){var m=document.createElement("div");
m.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;";
return m;
}});
k.current=new k();
function f(o,n,m){return k.current.measure(o,n,m);
}kendo.deepExtend(kendo.util,{LRUCache:e,TextMetrics:k,measureText:f,objectKey:h,hashKey:d,normalizeText:g});
}(window.kendo.jQuery));
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
(function(b,a){a("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.ooxml","kendo.excel","kendo.pane","kendo.progressbar","kendo.pdf","kendo.dialog","kendo.pane","kendo.switch"],b);
}(function(){var a={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing","progressbar"]}]};
(function(b,cq){var bk=window.kendo,cp=bk.ui,W=bk.data.DataSource,bK=bk.data.ObservableObject,cm=bk.support.tbodyInnerHtml,c=bk._activeElement,cB=cp.Widget,bN=bk._outerWidth,bM=bk._outerHeight,bl=bk.keys,be=b.isPlainObject,ai=b.extend,bs=b.map,aD=b.grep,a0=b.isArray,aW=b.inArray,bU=Array.prototype.push,bT=b.proxy,a6=bk.isFunction,a5=b.isEmptyObject,Q=b.contains,bu=Math,ad=".",bS="progress",ag="error",aU="k-hierarchy-cell",U=":not(.k-group-cell):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",b7="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",bB="tr:not(.k-footer-template):visible",bz=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",bj="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",aq=bj+":first",bm=bj+":last",ar=bB+":first>"+bz+":first",aP="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",bJ=".kendoGrid",R="k-grid-content-locked",aH="k-group-cell",ae="edit",k="beforeEdit",b1="save",bV="remove",ac="detailInit",al="filterMenuInit",B="columnMenuInit",am="filterMenuOpen",C="columnMenuOpen",o="cellClose",p="change",y="columnHide",I="columnShow",b2="saveChanges",V="dataBound",ab="detailExpand",aa="detailCollapse",bi="itemchange",bP="page",bQ="paging",b3="scroll",cg="sync",aw="k-state-focused",av=":kendoFocusable",b6="k-state-selected",q="k-checkbox",r="input[data-role='checkbox']."+q,bF="k-grid-norecords",bq="k-link",aV="k-icon",bL="k-sort-order",aO="k-header-column-menu",ak="k-grid-filter",b0="resize",H="columnResize",G="columnReorder",z="columnLock",L="columnUnlock",bA="navigate",v="click",bw="mousedown",aQ="height",ci="tabIndex",aA="function",ce="string",l="bottom",P="container-for",aj="field",aZ="input",aX="incell",aY="inline",cr="uid",bv=1,x="colSpan",bO="overflow",aR="hidden",aF="group-sort",Y="Are you sure you want to delete this record?",bE="No records available.",O="Delete",n="Cancel",w="Collapse",ah="Expand",h="aria-label",az=/(\}|\#)/gi,cn=/#/gi,cA="[\\x20\\t\\r\\n\\f]",bC=new RegExp("(^|"+cA+")(k-group-cell|k-hierarchy-cell)("+cA+"|$)"),an=new RegExp("(^|"+cA+")(k-filter-row)("+cA+"|$)"),N='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',b5='# var checkboxGuid = kendo.guid(); #<input class="'+q+'" data-role="checkbox" id="#= checkboxGuid #" aria-label="Select row" aria-checked="false" type="checkbox"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">&\\#8203;</label>',b4='# var checkboxGuid = kendo.guid(); #<input class="'+q+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox" id="#= checkboxGuid #"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">##&\\#8203;##</label>',bf=false,m=bk.support.browser,a9=m.msie&&m.version==7,ba=m.msie&&m.version==8;
var a8=m.msie&&m.version===11;
var bd=/Mac OS/.test(navigator.userAgent);
var u={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container"};
var cv=cB.extend({init:function(cC,cD){var cE=this;
cB.fn.init.call(cE,cC,cD);
cE._refreshHandler=bT(cE.refresh,cE);
cE.setDataSource(cD.dataSource);
cE.wrap();
},setDataSource:function(cC){var cD=this;
if(cD.dataSource){cD.dataSource.unbind(p,cD._refreshHandler);
}cD.dataSource=cC;
cD.dataSource.bind(p,cD._refreshHandler);
cD.dataSource.options.useRanges=true;
},options:{name:"VirtualScrollable",itemHeight:b.noop,prefetch:true,maxScrollHeight:250000},events:[bQ,bP,b3],destroy:function(){var cC=this;
cB.fn.destroy.call(cC);
cC.dataSource.unbind(p,cC._refreshHandler);
cC.wrapper.add(cC.verticalScrollbar).off(bJ);
clearTimeout(cC._timeout);
if(cC._scrollingTimeout){clearTimeout(cC._scrollingTimeout);
}if(cC.drag){cC.drag.destroy();
cC.drag=null;
}cC.wrapper=cC.element=cC.verticalScrollbar=null;
cC._refreshHandler=null;
},wrap:function(){var cE=this,cD=bk.support.scrollbar()+1,cC=cE.element,cF;
cC.css({width:"auto",overflow:"hidden"}).css(bf?"padding-left":"padding-right",cD);
cE.content=cC.children().first();
cF=cE.wrapper=cE.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+bJ+" mousewheel"+bJ,bT(cE._wheelScroll,cE));
cE._wrapper();
if(bk.support.kineticScrollNeeded){cE.drag=new bk.UserEvents(cE.wrapper,{global:true,allowSelection:true,start:function(cG){cG.sender.capture();
},move:function(cG){cE.verticalScrollbar.scrollTop(cE.verticalScrollbar.scrollTop()-cG.y.delta);
cF.scrollLeft(cF.scrollLeft()-cG.x.delta);
cG.preventDefault();
}});
}cE.verticalScrollbar=b('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:cD}).appendTo(cC).bind("scroll"+bJ,bT(cE._scroll,cE));
},_wrapper:function(){var cC=this;
if(a8){cC.wrapper.css({"overflow-y":b3});
cC.element.css(bf?"padding-left":"padding-right",0);
}},_wheelScroll:function(cD){if(cD.ctrlKey){return;
}var cE=this.verticalScrollbar,cF=cE.scrollTop(),cC=bk.wheelDeltaY(cD);
if(cC&&!(cC>0&&cF===0)&&!(cC<0&&cF+cE[0].clientHeight==cE[0].scrollHeight)){cD.preventDefault();
this.verticalScrollbar.scrollTop(cF+-cC);
}},_scroll:function(cE){var cO=this,cD=!cO.options.prefetch,cL=cE.currentTarget.scrollTop,cC=cO.dataSource,cK=cO.itemHeight,cM=cC.skip()||0,cN=cO._rangeStart||cM,cG=cO.element.innerHeight(),cH=!!(cO._scrollbarTop&&cO._scrollbarTop>cL),cF=bu.max(bu.floor(cL/cK),0),cJ=cH?bu.ceil(cG/cK):bu.floor(cG/cK),cI=bu.max(cF+cJ,0);
if(cO._preventScroll){cO._preventScroll=false;
return;
}cO._scrollTop=cL-cN*cK;
cO._scrollbarTop=cL;
cO._scrolling=cD;
if(!cO._fetch(cF,cI,cH)){cO.wrapper[0].scrollTop=cO._scrollTop;
}cO.trigger(b3);
if(cD){if(cO._scrollingTimeout){clearTimeout(cO._scrollingTimeout);
}cO._scrollingTimeout=setTimeout(function(){cO._scrolling=false;
cO._page(cO._rangeStart,cO.dataSource.take());
},100);
}},scrollToTop:function(){this._scrollTo(0);
},scrollToBottom:function(){var cC=this.verticalScrollbar;
this._scrollTo(cC[0].scrollHeight-cC.height());
},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0);
},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight);
},_scrollWrapperOnColumnResize:function(){var cD=this;
var cE=this.wrapper;
var cC=cE.scrollTop();
if(cE[0].scrollWidth>cE[0].clientWidth){if(!cD._wrapperScrolled&&cC||cD._isScrolledToBottom()){cE.scrollTop(cC+bk.support.scrollbar());
cD._scrollTop=cE.scrollTop();
cD._wrapperScrolled=true;
}}else{if(cD._wrapperScrolled){if(!cD._isWrapperScrolledToBottom()){cE.scrollTop(cC-bk.support.scrollbar());
cD._scrollTop=cE.scrollTop();
}cD._wrapperScrolled=false;
}}},_scrollTo:function(cD){var cE=this;
var cC=cE.verticalScrollbar;
if(cC.scrollTop()!==cD){cE._preventScroll=true;
}cE.wrapper.scrollTop(cD);
cE._scrollTop=cE.wrapper.scrollTop();
cC.scrollTop(cD);
cE._scrollbarTop=cC.scrollTop();
},_isScrolledToTop:function(){return this.verticalScrollbar.scrollTop()===0;
},_isScrolledToBottom:function(){var cC=this.verticalScrollbar;
var cD=cC.scrollTop();
return cD>0&&cD>=parseInt(cC[0].scrollHeight-cC.height(),10);
},_isWrapperScrolledToBottom:function(){var cC=this.wrapper;
return cC.scrollTop()>=parseInt(cC[0].scrollHeight-cC.height(),10);
},itemIndex:function(cD){var cC=this._rangeStart||this.dataSource.skip()||0;
return cC+cD;
},_isElementVisible:function(cC){return this._isElementVisibleInWrapper(cC);
},_isElementVisibleInWrapper:function(cC){var cF=this;
var cG=cF.wrapper;
var cE;
var cD;
cC=b(cC);
if(cC[0]&&Q(cG[0],cC[0])){cE=cC.offset().top-cG.offset().top;
cD=cC.outerHeight()/2;
if((cE>=0||bu.abs(cE)<=cD)&&bu.floor(cE+cD)<=cG.height()){return true;
}}return false;
},position:function(cC){var cE=this._rangeStart||this.dataSource.skip()||0;
var cD=this.dataSource.pageSize();
var cF;
if(cC>cE){cF=cC-cE+1;
}else{cF=cE-cC-1;
}return cF>cD?cD:cF;
},scrollIntoView:function(cH){var cC=this.wrapper[0];
var cD=cC.clientHeight;
var cE=!this._isScrolledToBottom()?this._scrollTop||cC.scrollTop:cC.scrollTop;
var cG=cH[0].offsetTop;
var cF=cH[0].offsetHeight;
if(cE>cG){this.verticalScrollbar[0].scrollTop-=cD/2;
}else{if(cG+cF>=cE+cD){this.verticalScrollbar[0].scrollTop+=cD/2;
}}},_fetch:function(cF,cH,cL){var cN=this,cD=cN.dataSource,cG=cN.itemHeight,cM=cD.take(),cJ=cN._rangeStart||cD.skip()||0,cC=bu.floor(cF/cM)*cM,cE=false,cI=0.33;
var cK=cN.verticalScrollbar;
var cO=m.webkit?1:0;
if(cF<cJ){cE=true;
cJ=bu.max(0,cH-cM);
cN._scrollTop=cK.scrollTop()-cJ*cG;
cN._page(cJ,cM);
}else{if(cH>=cJ+cM&&!cL){cE=true;
cJ=bu.min(cF,cD.total()-cM);
if(cK.scrollTop()>=cK[0].scrollHeight-cK[0].offsetHeight-cO){cN._scrollTop=cN.wrapper[0].scrollHeight-cN.wrapper[0].offsetHeight;
}else{cN._scrollTop=cG;
}cN._page(cJ,cM);
}else{if(!cN._fetching&&cN.options.prefetch){if(cF<cC+cM-cM*cI&&cF>cM){cD.prefetch(cC-cM,cM,b.noop);
}if(cH>cC+cM*cI){cD.prefetch(cC+cM,cM,b.noop);
}}}}return cE;
},fetching:function(){return this._fetching;
},_page:function(cF,cG,cC){var cH=this,cE=!cH.options.prefetch,cD=cH.dataSource;
cC=a6(cC)?cC:b.noop;
if(cH.trigger(bQ,{skip:cF,take:cG})){return;
}clearTimeout(cH._timeout);
cH._fetching=true;
cH._rangeStart=cF;
if(cD.inRange(cF,cG)){bk.ui.progress(b(cH.wrapper).parent(),true);
cD.range(cF,cG,function(){bk.ui.progress(b(cH.wrapper).parent(),false);
cC();
cH.trigger(bP);
});
}else{if(!cE){bk.ui.progress(cH.wrapper.parent(),true);
}cH._timeout=setTimeout(function(){if(!cH._scrolling){if(cE){bk.ui.progress(cH.wrapper.parent(),true);
}cD.range(cF,cG,function(){bk.ui.progress(cH.wrapper.parent(),false);
cC();
cH.trigger(bP);
});
}},100);
}},repaintScrollbar:function(cJ){var cK=this,cE="",cH=cK.options.maxScrollHeight,cD=cK.dataSource,cI=!bk.support.kineticScrollNeeded?bk.support.scrollbar():0,cN=cK.wrapper[0],cL,cF,cG;
var cM=cK._isScrolledToBottom();
cG=cK.itemHeight=cK.options.itemHeight()||0;
var cC=cN.scrollWidth>cN.offsetWidth?cI:0;
cL=cD.total()*cG+cC;
for(cF=0;
cF<bu.floor(cL/cH);
cF++){cE+='<div style="width:1px;height:'+cH+'px"></div>';
}if(cL%cH){cE+='<div style="width:1px;height:'+cL%cH+'px"></div>';
}cK.verticalScrollbar.html(cE);
if(cM&&!cK._isScrolledToBottom()){cK.scrollToBottom();
}if(typeof cK._scrollTop!=="undefined"&&!!cJ){cN.scrollTop=cK._scrollTop;
cK._scrollWrapperOnColumnResize();
}},refresh:function(cE){var cH=this,cD=cH.dataSource,cF=cH._rangeStart;
var cC=(cE||{}).action;
var cG=cH._isScrolledToBottom()||!cC||cC!==bi&&cC!==bV&&cC!==cg;
bk.ui.progress(cH.wrapper.parent(),false);
clearTimeout(cH._timeout);
cH.repaintScrollbar(cG);
if(cH.drag){cH.drag.cancel();
}if(typeof cF!=="undefined"&&!cH._fetching){if(!cC||cC!==cg&&cC!==bi){cH._rangeStart=cD.skip();
}if(cD.page()===1&&(!cC||cC!==cg&&cC!==bi)){cH.verticalScrollbar[0].scrollTop=0;
}}cH._fetching=false;
}});
function j(cC,cD){return"["+bk.attr(cC)+"="+cD+"]";
}function aJ(cC){return new Array(cC+1).join('<td class="k-group-cell">&nbsp;</td>');
}function cf(cD){var cC,cE=" ";
if(cD){if(typeof cD===ce){return cD;
}for(cC in cD){if(cD[cC]!==""){cE+=cC+'="'+cD[cC]+'"';
}}}return cE;
}var X={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"}};
function T(cC,cD){b("th, th .k-grid-filter, th .k-link",cC).add(document.body).css("cursor",cD);
}function bZ(cG,cH,cE,cC,cD){var cI=cH;
cH=b();
cD=cD||1;
for(var cF=0;
cF<cD;
cF++){cH=cH.add(cG.eq(cI+cF));
}if(typeof cE=="number"){cH[cC?"insertBefore":"insertAfter"](cG.eq(cE));
}else{cH.appendTo(cE);
}}function af(cE,cC,cD){return b(cE).add(cC).find(cD);
}function i(cG,cF,cE){var cH,cI,cC,cD;
cE=!a0(cE)?[cE]:cE;
for(cH=0,cI=cE.length;
cH<cI;
cH++){cC=cE[cH];
if(be(cC)&&cC.click){cD=cC.name||cC.text;
cF.on(v+bJ,"a.k-grid-"+(cD||"").replace(/\s/g,""),{commandName:cD},bT(cC.click,cG));
}}}function bH(cC,cD,cE,cF){return bs(cC,function(cG){cG=typeof cG===ce?{field:cG}:cG;
var cH;
cG.parentIds=cF;
if(!bh(cG)||cE){cG.attributes=d(cG.attributes);
cG.footerAttributes=d(cG.footerAttributes);
cG.headerAttributes=d(cG.headerAttributes);
cH=true;
}var cI=bk.guid();
cG.headerAttributes=ai({headers:cF},cG.headerAttributes);
if(!cG.headerAttributes.id){cG.headerAttributes=ai({id:cI},cG.headerAttributes);
}else{cI=cG.headerAttributes.id;
}if(cG.columns){cG.columns=bH(cG.columns,cD,cH,cF?cF+" "+cI:cI);
}return ai({encoded:cD,hidden:cH},cG);
});
}function D(cC,cD){var cE=[];
E(cC,cD,cE);
return cE[cE.length-1];
}function E(cC,cD,cG){cG=cG||[];
for(var cE=0;
cE<cD.length;
cE++){if(cC===cD[cE]){return true;
}else{if(cD[cE].columns){var cF=cG.length;
cG.push(cD[cE]);
if(!E(cC,cD[cE].columns,cG)){cG.splice(cF,cG.length-cF);
}else{return true;
}}}}return false;
}function cb(cC,cD){cc(cC,cD,cD);
}function cc(cC,cF,cE){var cD=cE?bX:d;
cC.hidden=!cF;
cC.attributes=cD(cC.attributes);
cC.footerAttributes=cD(cC.footerAttributes);
cC.headerAttributes=cD(cC.headerAttributes);
}function ca(cC,cE){b9(cC);
var cD=cC._hideByMedia;
cc(cC,cE,cD?cC.matchesMedia:cE);
}function b9(cC){cC.matchesMedia=A(cC);
}function A(cC){return cC&&(bg(cC.media)||!bg(cC.media)&&bk.matchesMedia(cC.media));
}function a1(){return this.style.display!=="none";
}function a4(cC){return b(cC)[0].style.display!=="none";
}function bh(cC){return cw([cC]).length>0;
}function cw(cC){return aD(cC,function(cD){var cE=!cD.hidden&&cD.matchesMedia!==false;
if(cE&&cD.columns){cE=cw(cD.columns).length>0;
}return cE;
});
}function K(cD){var cF=[];
var cC;
for(var cE=0;
cE<cD.length;
cE++){cC=cD[cE];
if(!bg(cC.media)){if(!bg(cC.minScreenWidth)){throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");
}cF.push(cC);
}if(cC.columns){cF=cF.concat(K(cC.columns));
}}return cF;
}function bg(cC){return typeof cC==="undefined";
}function co(cC){return b(cC).map(function(){return this.toArray();
});
}function ct(cC,cD,cH){var cE=Z(br(cD));
var cF=Z(bD(cD));
var cG=cC.rowSpan;
if(cH){if(cE>cF){cC.rowSpan=cG-(cE-cF)||1;
}else{cC.rowSpan=cG+(cF-cE);
}}else{if(cE>cF){cC.rowSpan=cG+(cE-cF);
}else{cC.rowSpan=cG-(cF-cE)||1;
}}}function by(cK,cM,cI,cD,cE,cF,cH,cC){var cL=Z(cK);
var cN=Z([cM]);
if(cL>cN){var cG=new Array(cH+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>');
var cJ=cF.children(":not(.k-filter-row)");
b(new Array(cL-cN+1).join("<tr>"+cG+"</tr>")).insertAfter(cJ.last());
}e(cF,cL-cN);
bx(cI,cD,cE,cF,cC);
}function cs(cM,cF,cJ){cJ=cJ||0;
var cK;
var cD;
var cC=cF;
cF=bn(cF);
var cE={};
var cL=cM.find(">tr:not(.k-filter-row)");
var cG=function(){var cN=b(this);
return !cN.hasClass("k-group-cell")&&!cN.hasClass("k-hierarchy-cell");
};
for(var cH=0,cI=cF.length;
cH<cI;
cH++){cK=F(cF[cH],cC);
if(!cE[cK.row]){cE[cK.row]=cL.eq(cK.row).find(".k-header").filter(cG);
}cD=cE[cK.row].eq(cK.cell);
cD.attr(bk.attr("index"),cJ+cH);
}return cF.length;
}function Z(cC){var cF=1;
var cE=0;
for(var cD=0;
cD<cC.length;
cD++){if(cC[cD].columns){var cG=Z(cC[cD].columns);
if(cG>cE){cE=cG;
}}}return cF+cE;
}function bx(cI,cE,cF,cG,cC){var cK=M(cI[0],cE);
var cM=cF.find(">tr:not(.k-filter-row):eq("+cK.row+")>th.k-header");
var cL=b();
var cJ=cK.cell;
var cH;
for(cH=0;
cH<cI.length;
cH++){cL=cL.add(cM.eq(cJ+cH));
}cG.find(">tr:not(.k-filter-row)").eq(cK.row)[cC](cL);
var cD=[];
for(cH=0;
cH<cI.length;
cH++){if(cI[cH].columns){cD=cD.concat(cI[cH].columns);
}}if(cD.length){bx(cD,cE,cF,cG,cC);
}}function F(cD,cE,cH,cC){var cG;
var cF;
cH=cH||0;
cC=cC||{};
cC[cH]=cC[cH]||0;
for(cF=0;
cF<cE.length;
cF++){if(cE[cF]==cD){cG={cell:cC[cH],row:cH};
break;
}else{if(cE[cF].columns){cG=F(cD,cE[cF].columns,cH+1,cC);
if(cG){break;
}}}cC[cH]++;
}return cG;
}function ao(cC,cD,cG,cF){var cH;
var cE=!!cG.locked;
var cI;
do{cH=cC[cD];
cD+=cF?1:-1;
cI=!!cH.locked;
}while(cH&&cD>-1&&cD<cC.length&&cH!=cG&&!cH.columns&&cI===cE);
return cH;
}function ap(cD,cK,cI,cC,cF){if(cK.columns){cK=cK.columns;
return cK[cC?0:cK.length-1];
}else{var cG=D(cK,cD);
var cH;
if(cG){cH=cG.columns;
}else{cH=cD;
}var cE=aW(cK,cH);
if(cE===0&&cC){cE++;
}else{if(cE==cH.length-1&&!cC||!cI.locked&&!cK.columns&&!cC){cE--;
}else{if(cE>0||cE===0&&!cC){cE++;
}}}var cJ=aW(cI,cH);
cK=ao(cH,cE,cI,cJ>cE);
var cL=aW(cK,cF);
if(cK.columns&&(!cL||cL===cH.length-1)){return null;
}if(cK&&cK!=cI&&cK.columns){return ap(cD,cK,cI,cC,cF);
}}return null;
}function M(cD,cE,cH,cC){var cG;
var cF;
cH=cH||0;
cC=cC||{};
cC[cH]=cC[cH]||0;
for(cF=0;
cF<cE.length;
cF++){if(cE[cF]==cD){cG={cell:cC[cH],row:cH};
break;
}else{if(cE[cF].columns){cG=M(cD,cE[cF].columns,cH+1,cC);
if(cG){break;
}}}if(!cE[cF].hidden){cC[cH]++;
}}return cG;
}function au(cC){var cD=at(br(cC));
return cD.concat(at(bD(cC)));
}function cl(cE,cD,cG,cI){var cC=cE[cG];
var cH=cE[cI];
var cF=D(cC,cD);
cD=cF?cF.columns:cD;
return aW(cH,cD);
}function at(cD){var cF=[];
var cC=[];
for(var cE=0;
cE<cD.length;
cE++){cF.push(cD[cE]);
if(cD[cE].columns){cC=cC.concat(cD[cE].columns);
}}if(cC.length){cF=cF.concat(at(cC));
}return cF;
}function aS(cD){var cE=0;
var cC;
for(var cF=0;
cF<cD.length;
cF++){cC=cD[cF];
if(cC.columns){cE+=aS(cC.columns);
}else{if(cC.hidden){cE++;
}}}return cE;
}function J(cC){var cD,cG=0;
for(var cE=0,cF=cC.length;
cE<cF;
cE++){cD=cC[cE].style.width;
if(cD&&cD.indexOf("%")==-1){cG+=parseInt(cD,10);
}}return cG;
}function bY(cD,cE){var cC=cD.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
var cG;
for(var cF=0;
cF<cC.length;
cF++){cG=cC[cF].rowSpan;
if(cG>1){cC[cF].rowSpan=cG-cE||1;
}}}function e(cD,cE){var cC=cD.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");
for(var cF=0;
cF<cC.length;
cF++){cC[cF].rowSpan+=cE;
}}function bW(cD){var cG=cD.find("tr:not(.k-filter-row)");
var cE=cG.filter(function(){return !b(this).children().length;
}).remove().length;
var cC=cG.find("th:not(.k-group-cell,.k-hierarchy-cell)");
for(var cF=0;
cF<cC.length;
cF++){if(cC[cF].rowSpan>1){cC[cF].rowSpan-=cE;
}}return cG.length-cE;
}function bt(cE,cC,cK,cJ,cH){var cF,cI,cG,cD=[];
for(cF=0,cG=cE.length;
cF<cG;
cF++){cI=cK[cJ]||[];
cI.push(cC.eq(cH+cF));
cK[cJ]=cI;
if(cE[cF].columns){cD=cD.concat(cE[cF].columns);
}}if(cD.length){bt(cD,cC,cK,cJ+1,cH+cE.length);
}}function br(cC){return aD(cC,function(cD){return cD.locked;
});
}function bD(cC){return aD(cC,function(cD){return !cD.locked;
});
}function cz(cC){return aD(cC,function(cD){return !cD.locked&&bh(cD);
});
}function cy(cC){return aD(cC,function(cD){return cD.locked&&bh(cD);
});
}function cx(cC){var cE=[];
for(var cD=0;
cD<cC.length;
cD++){if(cC[cD].hidden){continue;
}if(cC[cD].columns){cE=cE.concat(cx(cC[cD].columns));
}else{cE.push(cC[cD]);
}}return cE;
}function s(cC){var cE=[];
for(var cD=0;
cD<cC.length;
cD++){if(cC[cD].columns){cE=cE.concat(cC[cD].columns);
}}return cE;
}function bn(cC){var cE=[];
for(var cD=0;
cD<cC.length;
cD++){if(!cC[cD].columns){cE.push(cC[cD]);
continue;
}cE=cE.concat(bn(cC[cD].columns));
}return cE;
}function aB(cC){var cE=[];
cC=bn(cC);
for(var cD=0;
cD<cC.length;
cD++){if(typeof cC[cD]==="string"){cE.push(cC[cD]);
}else{if(cC[cD].field){cE.push(cC[cD].field);
}}}return cE;
}function bo(cD){var cG=cD.find(">tr:not(.k-filter-row)");
var cE=function(){var cH=b(this);
return !cH.hasClass("k-group-cell")&&!cH.hasClass("k-hierarchy-cell");
};
var cC=b();
if(cG.length>1){cC=cG.find("th").filter(cE).filter(function(){return this.rowSpan>1;
});
}cC=cC.add(cG.last().find("th").filter(cE));
var cF=bk.attr("index");
cC.sort(function(cH,cI){cH=b(cH);
cI=b(cI);
var cJ=cH.attr(cF);
var cK=cI.attr(cF);
if(cJ===cq){cJ=b(cH).index();
}if(cK===cq){cK=b(cI).index();
}cJ=parseInt(cJ,10);
cK=parseInt(cK,10);
return cJ>cK?1:cJ<cK?-1:0;
});
return cC;
}function bR(cC){var cD=cC.closest("table");
var cN=b().add(cC);
var cO=cC.closest("tr");
var cE=cD.find("tr:not(.k-filter-row)");
var cH=cE.index(cO);
if(cH>0){var cJ=cE.eq(cH-1);
var cL=cJ.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return !b(this).attr("rowspan");
});
var cI=0;
var cG=cO.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(cC);
var cM=cC.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1;
});
for(var cF=0;
cF<cM.length;
cF++){cI+=cM[cF].colSpan||1;
}cG+=Math.max(cI-1,0);
cI=0;
for(cF=0;
cF<cL.length;
cF++){var cK=cL.eq(cF);
if(cK.attr("data-colspan")){cI+=cK[0].getAttribute("data-colspan");
}else{cI+=1;
}if(cG>=cF&&cG<cI){cN=bR(cK).add(cN);
break;
}}}return cN;
}function t(cC){var cH=cC.closest("thead");
var cN=b().add(cC);
var cO=cC.closest("tr");
var cI=cH.find("tr:not(.k-filter-row)");
var cK=cI.index(cO)+cC[0].rowSpan;
var cG=bk.attr("colspan");
if(cK<=cI.length-1){var cE=cO.next();
var cM=cC.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");
var cJ;
cM=cM.filter(function(){return !this.rowSpan||this.rowSpan===1;
});
var cL=0;
for(cJ=0;
cJ<cM.length;
cJ++){cL+=parseInt(cM.eq(cJ).attr(cG),10)||1;
}var cD=cE.find("th:not(.k-group-cell,.k-hierarchy-cell)");
var cF=parseInt(cC.attr(cG),10)||1;
cJ=0;
while(cJ<cF){cE=cD.eq(cJ+cL);
cN=cN.add(t(cE));
var cP=parseInt(cE.attr(cG),10);
if(cP>1){cF-=cP-1;
}cJ++;
}}return cN;
}function g(cG,cF,cD,cC){var cE,cH=cG;
if(cC){cG.empty();
}if(cm){cG[0].innerHTML=cD;
}else{cE=document.createElement("div");
cE.innerHTML="<table><tbody>"+cD+"</tbody></table>";
cG=cE.firstChild.firstChild;
cF[0].replaceChild(cG,cH[0]);
cG=b(cG);
}return cG;
}function d(cC){cC=cC||{};
var cD=cC.style;
if(!cD){cD="display:none";
}else{cD=cD.replace(/display:[^;]*/i,"display:none");
if(!cD.match(/display:/i)){cD=cD.replace(/(.*)?/i,"display:none;$1");
}}return ai({},cC,{style:cD});
}function bX(cC){cC=cC||{};
var cD=cC.style;
if(cD){cC.style=cD.replace(/(display\s*:\s*none\s*;?)*/gi,"");
}return cC;
}function bG(cG,cH,cF,cE){var cC=cG.find(">colgroup"),cI,cD=bs(cH,function(cJ){cI=cJ.width;
if(cI&&parseInt(cI,10)!==0){return bk.format('<col style="width:{0}"/>',typeof cI===ce?cI:cI+"px");
}return"<col />";
});
if(cF||cC.find(".k-hierarchy-col").length){cD.splice(0,0,'<col class="k-hierarchy-col" />');
}if(cC.length){cC.remove();
}cC=b(new Array(cE+1).join('<col class="k-group-col">')+cD.join(""));
if(!cC.is("colgroup")){cC=b("<colgroup/>").append(cC);
}cG.prepend(cC);
if(m.msie&&m.version==8){cG.css("display","inline-table");
window.setTimeout(function(){cG.css("display","");
},1);
}}function bI(cD,cC){var cF=0;
var cE,cG;
var cH=cD.find("th:not(.k-group-cell)");
for(cE=0,cG=cC.length;
cE<cG;
cE++){if(cC[cE].locked){cH.eq(cE).insertBefore(cH.eq(cF));
cH=cD.find("th:not(.k-group-cell)");
cF++;
}}}function S(cC){var cG={},cE,cD,cF;
for(cD=0,cF=cC.length;
cD<cF;
cD++){cE=cC[cD];
cG[cE.value]=cE.text;
}return cG;
}function ay(cH,cE,cC,cD){var cG=cC&&cC.length&&be(cC[0])&&"value" in cC[0],cF=cG?S(cC)[cH]:cH;
cF=cF!=null?cF:"";
return cE?bk.format(cE,cF):cD===false?cF:bk.htmlEncode(cF);
}function b8(cD,cE,cH){var cF=0,cG,cC=cD[cF];
while(cC){cG=cH?true:cC.style.display!=="none";
if(cG&&!bC.test(cC.className)&&--cE<0){cC.style.display=cH?"":"none";
break;
}cC=cD[++cF];
}}function aT(cH,cD){var cE=0,cF=cH.length,cC,cG;
for(;
cE<cF;
cE+=1){cG=cH.eq(cE);
if(cG.is(".k-grouping-row,.k-detail-row")){cC=cG.children(":not(.k-group-cell):first,.k-detail-cell").last();
cC.attr("colspan",parseInt(cC.attr("colspan"),10)-1);
}else{if(cG.hasClass("k-grid-edit-row")&&(cC=cG.children(".k-edit-container")[0])){cC=b(cC);
cC.attr("colspan",parseInt(cC.attr("colspan"),10)-1);
cC.find("col").eq(cD).remove();
cG=cC.find("tr:first");
}b8(cG[0].cells,cD,false);
}}}function aN(cC){var cF=[];
var cE;
for(var cD=0;
cD<cC.length;
cD++){cE=cC[cD];
if(!("field" in cE&&"value" in cE&&"items" in cE)){break;
}cF.push(cE);
if(cE.hasSubgroups){cF=cF.concat(aN(cE.items));
}}return cF;
}function aK(cC){var cF=[];
var cE;
for(var cD=0;
cD<cC.length;
cD++){cE=cC[cD];
if(!("field" in cE&&"value" in cE&&"items" in cE)){break;
}if(cE.hasSubgroups){cF=cF.concat(aK(cE.items));
}cF.push(cE.aggregates);
}return cF;
}function cd(cI,cD){var cF=0,cG=cI.length,cC,cH,cE;
for(;
cF<cG;
cF+=1){cH=cI.eq(cF);
if(cH.is(".k-grouping-row,.k-detail-row")){cC=cH.children(":not(.k-group-cell):first,.k-detail-cell").last();
cC.attr("colspan",parseInt(cC.attr("colspan"),10)+1);
}else{if(cH.hasClass("k-grid-edit-row")&&(cC=cH.children(".k-edit-container")[0])){cC=b(cC);
cC.attr("colspan",parseInt(cC.attr("colspan"),10)+1);
bG(cC.find(">form>table"),cw(cE),false,0);
cH=cC.find("tr:first");
}b8(cH[0].cells,cD,true);
}}}function cu(cG,cH,cF){cF=cF||1;
var cD,cC,cE;
for(cC=0,cE=cG.length;
cC<cE;
cC++){cD=cG.eq(cC).children().last();
cD.attr("colspan",parseInt(cD.attr("colspan"),10)+cF);
cD=cH.eq(cC).children().last();
cD.attr("colspan",parseInt(cD.attr("colspan"),10)-cF);
}}function ck(cF){var cD,cE,cG=0;
var cC=cF.find(">colgroup>col");
for(cD=0,cE=cC.length;
cD<cE;
cD+=1){cG+=parseInt(cC[cD].style.width,10);
}return cG;
}var aE=bk.ui.DataBoundWidget.extend({init:function(cC,cE,cD){var cF=this;
cE=a0(cE)?{dataSource:cE}:cE;
cB.fn.init.call(cF,cC,cE);
if(cD){cF._events=cD;
}bf=bk.support.isRtl(cC);
cF._element();
cF._aria();
cF._columns(b.extend(true,[],cF.options.columns));
cF._dataSource();
cF._tbody();
cF._pageable();
cF._thead();
cF._groupable();
cF._toolbar();
cF._setContentHeight();
cF._templates();
cF._navigatable();
cF._selectable();
cF._clipboard();
cF._details();
cF._editable();
cF._attachCustomCommandsEvent();
cF._adaptiveColumns();
cF._minScreenSupport();
if(cF.options.autoBind){cF.dataSource.fetch();
}else{cF._group=cF._groups()>0;
cF._footer();
}if(cF.lockedContent){cF.wrapper.addClass("k-grid-lockedcolumns");
cF._resizeHandler=function(){cF.resize();
};
b(window).on("resize"+bJ,cF._resizeHandler);
}bk.notify(cF);
},events:[p,"dataBinding","cancel",V,ab,aa,ac,al,am,B,C,ae,k,b1,bV,b2,o,H,G,I,y,z,L,bA,"page","sort","filter","group","groupExpand","groupCollapse"],setDataSource:function(cC){var cF=this;
var cD=cF.options.scrollable;
var cE;
cF.options.dataSource=cC;
cF._dataSource();
cF._pageable();
cF._thead();
if(cD){if(cD.virtual){cE=cF.content.find(">.k-virtual-scrollable-wrap");
cE.scrollLeft(bp(cE,bf));
}else{cE=cF.tbody;
cF.content.scrollLeft(bp(cE,bf));
}}if(cF.options.groupable){cF._groupable();
}if(cF.virtualScrollable){cF.virtualScrollable.setDataSource(cF.options.dataSource);
}if(cF.options.navigatable){cF._navigatable();
}if(cF.options.selectable){cF._selectable();
}if(cF.options.autoBind){cF.dataSource.fetch();
}},options:{name:"Grid",columns:[],toolbar:null,autoBind:true,filterable:false,scrollable:true,sortable:false,selectable:false,allowCopy:false,navigatable:false,pageable:false,persistSelection:false,editable:false,groupable:false,rowTemplate:"",altRowTemplate:"",search:false,noRecords:false,dataSource:{},height:null,resizable:false,reorderable:false,columnMenu:false,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:n,confirmation:Y,confirmDelete:O},commands:{create:X.create.text,cancel:X.cancel.text,save:X.save.text,destroy:X.destroy.text,edit:X.edit.text,update:X.update.text,canceledit:X.canceledit.text,excel:X.excel.text,pdf:X.pdf.text},search:"Search...",noRecords:bE,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup"}},destroy:function(){var cD=this,cC;
cD._angularItems("cleanup");
cD._destroyColumnAttachments();
cB.fn.destroy.call(cD);
if(this._navigatableTables){this._navigatableTables.off(bJ);
this._navigatableTables=null;
}if(cD._resizeHandler){b(window).off("resize"+bJ,cD._resizeHandler);
}if(cD.pager&&cD.pager.element){cD.pager.destroy();
}if(cD.timer){clearTimeout(cD.timer);
}if(cD._progressTimeOut){clearTimeout(cD._progressTimeOut);
}if(cD._collapseGroupsTimeOut){clearTimeout(cD._collapseGroupsTimeOut);
}if(cD._endlessFetchTimeOut){clearTimeout(cD._endlessFetchTimeOut);
}cD.pager=null;
cD._destroyGroupable();
if(cD.options.reorderable){cD.wrapper.data("kendoReorderable").destroy();
}if(cD.selectable&&cD.selectable.element){cD.selectable.destroy();
cD.clearArea();
cD._selectedIds=null;
if(cD.copyHandler){cD.wrapper.off("keydown",cD.copyHandler);
cD.unbind(cD.copyHandler);
}if(cD.updateClipBoardState){cD.unbind(cD.updateClipBoardState);
cD.updateClipBoardState=null;
}if(cD.clearAreaHandler){cD.wrapper.off("keyup",cD.clearAreaHandler);
}}cD.selectable=null;
if(cD.resizable){cD.resizable.destroy();
if(cD._resizeUserEvents){if(cD._resizeHandleDocumentClickHandler){b(document).off("click",cD._resizeHandleDocumentClickHandler);
}cD._resizeUserEvents.destroy();
cD._resizeUserEvents=null;
}cD.resizable=null;
}cD._destroyVirtualScrollable();
cD._destroyEditable();
if(cD.dataSource){cD.dataSource.unbind(p,cD._refreshHandler).unbind(bS,cD._progressHandler).unbind(ag,cD._errorHandler);
cD._refreshHandler=cD._progressHandler=cD._errorHandler=null;
}cC=cD.element.add(cD.wrapper).add(cD.table).add(cD.thead).add(cD.wrapper.find(">.k-grid-toolbar"));
if(cD.content){cC=cC.add(cD.content).add(cD.content.find(">.k-virtual-scrollable-wrap"));
}if(cD.lockedHeader){cD._removeLockedContainers();
}if(cD.pane){cD.pane.destroy();
}if(cD._isMobile){cD.wrapper.off("transitionend"+bJ);
cD.wrapper.off("contextmenu"+bJ);
}if(cD.minScreenResizeHandler){b(window).off("resize",cD.minScreenResizeHandler);
}cD._detachColumnMediaResizeHandler();
if(cD._draggableInstance&&cD._draggableInstance.element){cD._draggableInstance.destroy();
}cD._draggableInstance=null;
cC.off(bJ);
bk.destroy(cD.wrapper);
cD.rowTemplate=cD.altRowTemplate=cD.lockedRowTemplate=cD.lockedAltRowTemplate=cD.detailTemplate=cD.footerTemplate=cD.groupFooterTemplate=cD.lockedGroupFooterTemplate=cD.noRecordsTemplate=null;
cD.scrollables=cD.thead=cD.tbody=cD.element=cD.table=cD.content=cD.footer=cD.wrapper=cD.lockedTable=cD.lockedContent=cD.lockedHeader=cD.lockedFooter=cD._groupableClickHandler=cD._groupRows=cD._setContentWidthHandler=null;
},getOptions:function(){var cE=this.options;
cE.dataSource=null;
var cF=ai(true,{},this.options);
cF.columns=bk.deepExtend([],this.columns);
var cC=this.dataSource;
var cD=cC.options.data&&cC._data;
cC.options.data=null;
cF.dataSource=b.extend(true,{},cC.options);
cC.options.data=cD;
cF.dataSource.data=cD;
cF.dataSource.page=cC.page();
cF.dataSource.filter=b.extend(true,{},cC.filter());
cF.dataSource.pageSize=cC.pageSize();
cF.dataSource.sort=cC.sort();
cF.dataSource.group=cC.group();
cF.dataSource.aggregate=cC.aggregate();
if(cF.dataSource.transport){cF.dataSource.transport.dataSource=null;
}if(cF.pageable&&cF.pageable.pageSize){cF.pageable.pageSize=cC.pageSize();
}cF.$angular=cq;
return cF;
},setOptions:function(cG){var cC=this.getOptions();
bk.deepExtend(cC,cG);
if(!cG.dataSource){cC.dataSource=this.dataSource;
}var cH=this.wrapper;
var cE=this._events;
var cD=this.element;
this.destroy();
this.options=null;
if(this._isMobile){var cF=cH.closest(bk.roleSelector("pane")).parent();
cF.after(cH);
cF.remove();
cH.removeClass("k-grid-mobile");
}if(cH[0]!==cD[0]){cH.before(cD);
cH.remove();
}cD.empty();
this.init(cD,cC,cE);
this._setEvents(cC);
},items:function(){if(this.lockedContent){return this._items(this.tbody).add(this._items(this.lockedTable.children("tbody")));
}else{return this._items(this.tbody);
}},_items:function(cC){return cC.children().filter(function(){var cD=b(this);
return !cD.hasClass("k-grouping-row")&&!cD.hasClass("k-detail-row")&&!cD.hasClass("k-group-footer");
});
},dataItems:function(){var cC=bk.ui.DataBoundWidget.fn.dataItems.call(this);
if(this.lockedContent){var cE=cC.length,cF=new Array(2*cE);
for(var cD=cE;
--cD>=0;
){cF[cD]=cF[cD+cE]=cC[cD];
}cC=cF;
}return cC;
},_destroyColumnAttachments:function(){var cC=this;
cC.resizeHandle=null;
if(!cC.thead){return;
}this.angular("cleanup",function(){return{elements:cC.thead.get()};
});
cC.thead.add(cC.lockedHeader).find("th").each(function(){var cG=b(this),cE=cG.data("kendoFilterMenu"),cF=cG.data("kendoColumnSorter"),cD=cG.data("kendoColumnMenu");
if(cE){cE.destroy();
}if(cF){cF.destroy();
}if(cD){cD.destroy();
}});
},_attachCustomCommandsEvent:function(){var cG=this,cC=bn(cG.columns||[]),cD,cE,cF;
for(cE=0,cF=cC.length;
cE<cF;
cE++){cD=cC[cE].command;
if(cD){i(cG,cG.wrapper,cD);
}}},_aria:function(){var cC=this.element.attr("id")||"aria";
if(cC){this._cellId=cC+"_active_cell";
}},_element:function(){var cD=this,cC=cD.element;
if(!cC.is("table")){if(cD.options.scrollable){cC=cD.element.find("> .k-grid-content > table");
}else{cC=cD.element.children("table");
}if(!cC.length){cC=b("<table />").appendTo(cD.element);
}}if(a9){cC.attr("cellspacing",0);
}cD.table=cC.attr("role",cD._hasDetails()?"treegrid":"grid");
cD._wrapper();
},_createResizeHandle:function(cC,cK){var cL=this;
var cG=cL.options.columnResizeHandleWidth;
var cJ=cL.options.scrollable;
var cI=cL.resizeHandle;
var cH;
var cM;
if(cI&&cL.lockedContent&&cI.data("th")[0]!==cK[0]){cI.off(bJ).remove();
cI=null;
}if(!cI){cI=cL.resizeHandle=b('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>');
cC.append(cI);
}cH=cK.offset().left+cC.scrollLeft()-parseFloat(cK.css("marginLeft"))-(cC.offset().left+parseFloat(cC.css("borderLeftWidth")));
if(!bf){cH+=cK[0].offsetWidth;
}else{if(cJ){var cE=cK.closest(".k-grid-header-wrap, .k-grid-header-locked"),cF=m.msie?cE.scrollLeft():0,cN=m.webkit?cE[0].scrollWidth-cE[0].offsetWidth-cE.scrollLeft():0,cD=m.mozilla?cE[0].scrollWidth-cE[0].offsetWidth-(cE[0].scrollWidth-cE[0].offsetWidth-cE.scrollLeft()):0;
cH-=cN-cD+cF;
}}cM=cK.offset().top-parseFloat(cK.css("marginTop"))-(cC.offset().top+parseFloat(cC.css("borderTopWidth")));
cI.css({top:cM,left:cH-cG*3/2,height:bM(cK),width:cG*3}).data("th",cK).show();
cI.off("dblclick"+bJ).on("dblclick"+bJ,function(){cL._autoFitLeafColumn(parseInt(cK.attr(bk.attr("index")),10));
});
},_positionColumnResizeHandle:function(){var cD=this,cC=cD.lockedHeader?cD.lockedHeader.find("thead:first"):b();
cD.thead.add(cC).on("mousemove"+bJ,"tr:not(.k-filter-row) > th",function(cF){var cE=typeof cF.buttons!=="undefined"?cF.buttons:cF.which||cF.button;
var cG=b(this);
if(cG.hasClass("k-group-cell")||cG.hasClass("k-hierarchy-cell")){return;
}if(typeof cE!=="undefined"&&cE!==0){return;
}if(cG[0].hasAttribute(bk.attr(x))){return;
}cD._createResizeHandle(cG.closest("div"),cG);
});
},_resizeHandleDocumentClick:function(cC){if(b(cC.target).closest(".k-column-active").length){return;
}b(document).off(cC);
this._resetResizeHandleHeader();
this._hideResizeHandle();
},_resetResizeHandleHeader:function(){var cC;
if(!this.resizeHandle){return;
}cC=b(this.resizeHandle).data("th");
if(cC){cC.find(ad+bq).find(ad+aV).show();
cC.find(ad+bL).show();
cC.find(ad+aO).show();
cC.find(ad+ak).show();
}},_hideResizeHandle:function(){if(this.resizeHandle){this.resizeHandle.data("th").removeClass("k-column-active");
if(this.lockedContent&&!this._isMobile){this.resizeHandle.off(bJ).remove();
this.resizeHandle=null;
}else{this.resizeHandle.hide();
}}},_positionColumnResizeHandleTouch:function(){var cD=this,cC=cD.lockedHeader?cD.lockedHeader.find("thead:first"):b();
cD._resizeUserEvents=new bk.UserEvents(cC.add(cD.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(cE){var cF=b(cE.target);
cE.preventDefault();
if(cD.resizeHandle){cD.resizeHandle.data("th").removeClass("k-column-active");
cD._resetResizeHandleHeader();
}cF.addClass("k-column-active");
cF.find(ad+bq).find(ad+aV).hide();
cF.find(ad+bL).hide();
cF.find(ad+aO).hide();
cF.find(ad+ak).hide();
cD._createResizeHandle(cF.closest("div"),cF);
if(!cD._resizeHandleDocumentClickHandler){cD._resizeHandleDocumentClickHandler=bT(cD._resizeHandleDocumentClick,cD);
}b(document).on("click",cD._resizeHandleDocumentClickHandler);
}});
},resizeColumn:function(cD,cF){var cQ=this;
var cN=!!cD.locked;
var cM=!!cD.hidden;
var cO=this.options;
var cP=!bk.support.mobileOS?bk.support.scrollbar():0;
var cL=cN?aW(cD,cy(cQ.columns)):aW(cD,cz(cQ.columns));
var cH=cN?cQ.lockedTable:cQ.table;
var cI=cQ.footer||b();
var cK=cN?cQ.lockedHeader.find("table"):cQ.thead.closest("table");
var cE=cD.minResizableWidth||10;
var cJ=cN?bN(cH.find("tbody")):bN(cQ.tbody);
var cC;
if(cM){cD.width=cF>cE?cF:cE;
return;
}if(cQ.footer&&cQ.lockedContent){cI=cN?cQ.footer.children(".k-grid-footer-locked"):cQ.footer.children(".k-grid-footer-wrap");
}if(cO.scrollable){cC=cK.find("col:not(.k-group-col,.k-hierarchy-col):eq("+cL+")").add(cH.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cL+")")).add(cI.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cL+")"));
}else{cC=cH.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cL+")");
}if(cO.scrollable){var cG=false;
var cR=cQ.wrapper.width()-cP;
var cS=cF=cF>cE?cF:cE;
if(cN&&cJ-cF+cS>cR){cS=cF+(cR-cJ-cP*2);
if(cS<0){cS=cF;
}cG=true;
}if(cS>10&&cS>=cE){cC.css("width",cS);
if(cJ){if(cG){cS=cR-cP*2;
}else{cS=cJ+(cF-cD.width);
}cH.add(cK).add(cI).css("width",cS);
if(!cN){cQ._footerWidth=cS;
}}}cQ._scrollVirtualWrapperOnColumnResize();
}else{if(cF>10&&cF>=cE){cC.css("width",cF);
}}cD.width=cF;
cQ._applyLockedContainersWidth();
cQ._syncLockedContentHeight();
cQ._syncLockedHeaderHeight();
},_resizable:function(){var cN=this,cK=cN.options,cG,cE,cF,cD,cH,cJ=this._isMobile,cL=!bk.support.mobileOS?bk.support.scrollbar():0,cI,cC,cM;
if(cK.resizable){cG=cK.scrollable?cN.wrapper.find(".k-grid-header-wrap:first"):cN.wrapper;
if(cJ){cN._positionColumnResizeHandleTouch(cG);
}else{cN._positionColumnResizeHandle(cG);
}if(cN.resizable){cN.resizable.destroy();
}cN.resizable=new cp.Resizable(cG.add(cN.lockedHeader),{handle:(!!cK.scrollable?"":">")+".k-resize-handle",hint:function(cO){return b('<div class="k-grid-resize-indicator" />').css({height:bM(cO.data("th"))+cN.tbody.attr("clientHeight")});
},start:function(cQ){cM=b(cQ.currentTarget).data("th");
if(cJ){cN._hideResizeHandle();
}var cS=cM.closest("table"),cT=b.inArray(cM[0],bo(cM.closest("thead")).filter(":visible"));
cI=cS.parent().hasClass("k-grid-header-locked");
var cP=cI?cN.lockedTable:cN.table,cR=cN.footer||b();
if(cN.footer&&cN.lockedContent){cR=cI?cN.footer.children(".k-grid-footer-locked"):cN.footer.children(".k-grid-footer-wrap");
}T(cN.wrapper,"col-resize");
if(cK.scrollable){cC=cS.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cT+")").add(cP.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cT+")")).add(cR.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cT+")"));
}else{cC=cP.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+cT+")");
}var cO=b.map(cN.columns,function(cU){return !cU.hidden&&(cI&&cU.locked||!cI&&!cU.locked)?cU:null;
});
cE=cQ.x.location;
cF=bN(cM);
cD=bn(cO)[cT].minResizableWidth||10;
cH=cI?bN(cP.children("tbody")):bN(cN.tbody);
if(m.webkit){cN.wrapper.addClass("k-grid-column-resizing");
}},resize:function(cR){var cU=bf?-1:1,cQ=cF+cR.x.location*cU-cE*cU;
if(cK.scrollable){var cS;
if(cI&&cN.lockedFooter){cS=cN.lockedFooter.children("table");
}else{if(cN.footer){cS=cN.footer.find(">.k-grid-footer-wrap>table");
}}if(!cS||!cS[0]){cS=b();
}var cT=cM.closest("table");
var cP=cI?cN.lockedTable:cN.table;
var cO=false;
var cV=cN.wrapper.width()-cL;
var cW=cQ;
if(cI&&cH-cF+cW>cV){cW=cF+(cV-cH-cL*2);
if(cW<0){cW=cQ;
}cO=true;
}if(cW>10&&cW>=cD){cC.css("width",cW);
if(cH){if(cO){cW=cV-cL*2;
}else{cW=cH+cR.x.location*cU-cE*cU;
}cP.add(cT).add(cS).css("width",cW);
if(!cI){cN._footerWidth=cW;
}}}cN._scrollVirtualWrapperOnColumnResize();
}else{if(cQ>10&&cQ>=cD){cC.css("width",cQ);
}}},resizeend:function(){var cR=bN(cM),cO,cP;
T(cN.wrapper,"");
if(m.webkit){cN.wrapper.removeClass("k-grid-column-resizing");
}if(cF!=cR){cP=cN.lockedHeader?cN.lockedHeader.find("thead:first tr:first").add(cN.thead.find("tr:first")):cM.parent();
var cQ=cM.attr(bk.attr("index"));
if(!cQ){cQ=cP.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(cM);
}cO=bn(cN.columns)[cQ];
cO.width=cR;
cN.trigger(H,{column:cO,oldWidth:cF,newWidth:cR});
cN._applyLockedContainersWidth();
cN._syncLockedContentHeight();
cN._syncLockedHeaderHeight();
}cN._resetResizeHandleHeader();
cN._hideResizeHandle();
cM=null;
}});
}},_draggable:function(){var cD=this;
if(cD.options.reorderable){if(cD._draggableInstance){cD._draggableInstance.destroy();
}var cC=cD.wrapper.children(".k-grid-header");
cD._draggableInstance=cD.wrapper.kendoDraggable({group:bk.guid(),autoScroll:true,filter:cD.content?".k-grid-header:first "+aP:"table:first>.k-grid-header "+aP,dragstart:function(){cC.children(".k-grid-header-wrap").unbind("scroll"+bJ+"scrolling").bind("scroll"+bJ+"scrolling",function(cE){if(cD.virtualScrollable){cD.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft);
}else{cD.scrollables.not(cE.currentTarget).scrollLeft(this.scrollLeft);
}});
},dragend:function(){cD._resetResizeHandleHeader();
cC.children(".k-grid-header-wrap").unbind("scroll"+bJ+"scrolling");
},drag:function(){cD._hideResizeHandle();
},hint:function(cE){var cF=cE.attr(bk.attr("title"));
if(cF){cF=bk.htmlEncode(cF);
}return b('<div class="k-header k-reorder-clue k-drag-clue" />').html(cF||cE.attr(bk.attr("field"))||cE.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />');
}}).data("kendoDraggable");
}},_reorderable:function(){var cC=this;
if(cC.options.reorderable){if(cC.wrapper.data("kendoReorderable")){cC.wrapper.data("kendoReorderable").destroy();
}cC.wrapper.kendoReorderable({draggable:cC._draggableInstance,dragOverContainers:function(cE,cF){var cD=au(cC.columns);
return cD[cE].lockable!==false&&cl(cD,cC.columns,cE,cF)>-1;
},inSameContainer:function(cD){return b(cD.source).parent()[0]===b(cD.target).parent()[0]&&cl(au(cC.columns),cC.columns,cD.sourceIndex,cD.targetIndex)>-1;
},change:function(cF){var cE=au(cC.columns);
var cD=cE[cF.oldIndex];
var cG=cl(cE,cC.columns,cF.oldIndex,cF.newIndex);
cC.trigger(G,{newIndex:cG,oldIndex:aW(cD,cE),column:cD});
cC.reorderColumn(cG,cD,cF.position==="before");
}});
}},_reorderHeader:function(cK,cL,cD,cE){var cN=this;
var cJ=F(cK[0],cN.columns);
var cF=F(cL,cN.columns);
var cC;
var cO;
var cH=[];
for(var cG=0;
cG<cK.length;
cG++){if(cK[cG].columns){cH=cH.concat(cK[cG].columns);
}}if(cE){cO=af(cE,cE,"tr:eq("+cJ.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
}else{cO=af(cN.lockedHeader,cN.thead,"tr:eq("+cJ.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");
}var cI=br(cK).length;
var cM=br([cL]).length;
if(cH.length){if(cI>0&&cM===0){cC="prepend";
by(cK,cL,cH,cN.columns,cN.lockedHeader.find("thead"),cN.thead,this._groups(),cC);
}else{if(cI===0&&cM>0){cC=cF.cell===0&&cK[0].columns&&!cL.columns&&!cN._group?"prepend":"append";
by(cK,cL,cH,bD(cN.columns),cN.thead,cN.lockedHeader.find("thead"),this._groups(),cC);
}}if(cL.columns||cJ.cell-cF.cell>1||cF.cell-cJ.cell>1){cL=ap(cN.columns,cL,cK[0],cD,cN.columns);
if(cL){if(cI>0&&cM===0){cN._reorderHeader(cH,cL,cD,cN.thead);
}else{if(cI===0&&cM>0){cN._reorderHeader(cH,cL,cD,cN.lockedHead);
}else{cN._reorderHeader(cH,cL,cD);
}}}}}else{if(cI!==cM){ct(cO[cJ.cell],cN.columns,cI);
}}bZ(cO,cJ.cell,cF.cell,cD,cK.length);
},_reorderContent:function(cU,cH,cC){var cV=this;
var cQ=b();
var cS=cU[0];
var cW=cw(cU);
var cT=aW(cS,bn(cV.columns));
var cI=aW(cH,bn(cV.columns));
var cF=aW(cW[0],cx(cV.columns));
var cE=aW(cH,cx(cV.columns));
var cP=br(cV.columns).length;
var cN=!!cH.locked;
var cJ=cV.footer||cV.wrapper.find(".k-grid-footer");
var cL,cK,cD;
cL=cK=cE;
if(cH.hidden){var cG=cN?br(cV.columns):bD(cV.columns);
if(cw(cG).length>0){cL=cK=cE=this._findClosestVisibleColumnIndex(cG,cI);
cD=cw(cG.slice(cI)).length>0;
}else{if(cN){cE=cV.lockedTable.find("colgroup");
cL=cV.lockedHeader.find("colgroup");
cK=b(cV.lockedFooter).find(">table>colgroup");
}else{cE=cV.tbody.prev();
cL=cV.thead.prev();
cK=cJ.find(".k-grid-footer-wrap").find(">table>colgroup");
}}}if(cV._hasFilterRow()){bZ(cV.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),cT,cI,cC,cU.length);
}if(cF>=0){bZ(af(cV.lockedHeader,cV.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),cF,cL,cD?cD:cC,cW.length);
}if(cV.options.scrollable){if(cF>=0){bZ(af(cV.lockedTable,cV.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),cF,cE,cD?cD:cC,cW.length);
}}if(cJ&&cJ.length){if(cF>=0){bZ(af(cV.lockedFooter,cJ.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),cF,cK,cD?cD:cC,cW.length);
}bZ(cJ.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),cT,cI,cC,cU.length);
}var cR=cV.tbody.children(":not(.k-grouping-row,.k-detail-row)");
if(cV.lockedTable){if(cP>cI){if(cP<=cT){cu(cV.lockedTable.find(">tbody>tr.k-grouping-row"),cV.table.find(">tbody>tr.k-grouping-row"),cU.length);
}}else{if(cP>cT){cu(cV.table.find(">tbody>tr.k-grouping-row"),cV.lockedTable.find(">tbody>tr.k-grouping-row"),cU.length);
}}cQ=cV.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)");
}for(var cM=0,cO=cR.length;
cM<cO;
cM+=1){bZ(af(cQ[cM],cR[cM],">td:not(.k-group-cell,.k-hierarchy-cell)"),cT,cI,cC,cU.length);
}},_findClosestVisibleColumnIndex:function(cE,cD){var cF=cw(cE.slice(cD)).length>0?cE.slice(cD):cE.slice(0,cD+1).reverse(),cC=cw(cF)[0];
return aW(cC,cw(this.columns));
},_autoFitLeafColumn:function(cC){this.autoFitColumn(bn(this.columns)[cC]);
},autoFitColumn:function(cE){var c0=this,cW=c0.options,cF=c0.columns,cN,cZ,cL,cO,c2=c0.lockedHeader?bo(c0.lockedHeader.find(">table>thead")).filter(a1).length:0,cC,cR,cH,cX,cT="col:not(.k-group-col):not(.k-hierarchy-col)",cU="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";
if(typeof cE=="number"){cE=cF[cE];
}else{if(be(cE)){cE=aD(at(cF),function(c3){return c3===cE;
})[0];
}else{cE=aD(at(cF),function(c3){return c3.field===cE;
})[0];
}}if(!cE||!bh(cE)){return;
}cR=cE.minResizableWidth;
cN=aW(cE,bn(cF));
cO=cE.locked;
if(cO){cL=c0.lockedHeader.children("table");
}else{cL=c0.thead.parent();
}cZ=cL.find("[data-index='"+cN+"']");
var cI=cO?c0.lockedTable:c0.table,cJ=c0.footer||b();
if(c0.footer&&c0.lockedContent){cJ=cO?c0.footer.children(".k-grid-footer-locked"):c0.footer.children(".k-grid-footer-wrap");
}var cK=cJ.find("table").first();
if(c0.lockedHeader&&!cO){cN-=c2;
}for(var cP=0;
cP<cF.length;
cP++){if(cF[cP]===cE){break;
}else{if(cF[cP].hidden){cN--;
}}}if(cW.scrollable){cC=cL.find(cT).eq(cN).add(cI.children("colgroup").find(cT).eq(cN)).add(cK.find("colgroup").find(cT).eq(cN));
if(!cO){cH=cI.parent();
cX=cH.scrollLeft();
}}else{cC=cI.children("colgroup").find(cT).eq(cN);
}var cY=cL.add(cI).add(cK);
var cV=bN(cZ);
cC.width("");
cY.css("table-layout","fixed");
cC.width("auto");
cY.addClass("k-autofitting");
cY.css("table-layout","");
var cS=Math.ceil(Math.max(bN(cZ),bN(cI.find("tr:not(.k-grouping-row)").eq(0).children(cU).eq(cN)),bN(cK.find("tr").eq(0).children(cU).eq(cN))))+1;
if(cR&&cR>cS){cS=cR;
}cC.width(cS);
cE.width=cS;
if(cW.scrollable){var cD=cL.find("col"),cG,c1=0;
for(var cM=0,cQ=cD.length;
cM<cQ;
cM+=1){cG=cD[cM].style.width;
if(cG&&cG.indexOf("%")==-1){c1+=parseInt(cG,10);
}else{if(cD.eq(cM).hasClass("k-group-col")){c1+=parseInt(cD.eq(cM).width(),10);
}else{c1=0;
break;
}}}if(c1){cY.each(function(){this.style.width=c1+"px";
});
}}if(m.msie&&m.version==8){cY.css("display","inline-table");
setTimeout(function(){cY.css("display","table");
},1);
}cY.removeClass("k-autofitting");
if(cX){cH.scrollLeft(cX);
}c0.trigger(H,{column:cE,oldWidth:cV,newWidth:cS});
c0._applyLockedContainersWidth();
c0._syncLockedContentHeight();
c0._syncLockedHeaderHeight();
},reorderColumn:function(cG,cD,cC){var cO=this,cL=D(cD,cO.columns),cE=cL?cL.columns:cO.columns,cN=aW(cD,cE),cF=cE[cG],cJ,cI=!!cF.locked,cK=br(cO.columns).length,cH=aD(bn(cO.columns),function(cP){return cP.groupHeaderColumnTemplate;
});
if(cN===cG){return;
}if(!cD.locked&&cI&&bD(cO.columns).length==1){return;
}if(cD.locked&&!cI&&cK==1){return;
}cO._hideResizeHandle();
if(cC===cq){cC=cG<cN;
}var cM=[cD];
cO._reorderHeader(cM,cF,cC);
if(cO.lockedHeader){bW(cO.thead);
bW(cO.lockedHeader);
}if(cF.columns){cF=bn(cF.columns);
cF=cF[cC?0:cF.length-1];
}if(cD.columns){cM=bn(cD.columns);
}cO._reorderContent(cM,cF,cC);
cJ=!!cD.locked;
cJ=cJ!=cI;
cD.locked=cI;
cE.splice(cC?cG:cG+1,0,cD);
cE.splice(cN<cG?cN:cN+1,1);
cO._updateLockedCols();
cO._updateCols();
cO._templates();
cO._updateColumnCellIndex();
cO._updateColumnSorters();
if(cH.length>0){cO._renderGroupRows();
}cO._updateTablesWidth();
cO._applyLockedContainersWidth();
cO._syncLockedHeaderHeight();
cO._syncLockedContentHeight();
cO._updateFirstColumnClass();
if(!cJ){return;
}if(cI){cO.trigger(z,{column:cD});
}else{cO.trigger(L,{column:cD});
}},_updateColumnCellIndex:function(){var cC;
var cD=0;
if(this.lockedHeader){cC=this.lockedHeader.find("thead");
cD=cs(cC,br(this.columns));
}cs(this.thead,bD(this.columns),cD);
},lockColumn:function(cC){var cD=this.columns;
if(typeof cC=="number"){cC=cD[cC];
}else{cC=aD(cD,function(cF){return cF.field===cC;
})[0];
}if(!cC||cC.locked||cC.hidden){return;
}var cE=br(cD).length-1;
this.reorderColumn(cE,cC,false);
},unlockColumn:function(cC){var cD=this.columns;
if(typeof cC=="number"){cC=cD[cC];
}else{cC=aD(cD,function(cF){return cF.field===cC;
})[0];
}if(!cC||!cC.locked||cC.hidden){return;
}var cE=br(cD).length;
this.reorderColumn(cE,cC,true);
},cellIndex:function(cD){var cC=0;
if(this.lockedTable&&!b.contains(this.lockedTable[0],cD[0])){cC=bn(br(this.columns)).length;
}return b(cD).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(cD)+cC;
},_modelForContainer:function(cC){cC=b(cC);
if(!cC.is("tr")&&this._editMode()!=="popup"){cC=cC.closest("tr");
}var cD=cC.attr(bk.attr("uid"));
return this.dataSource.getByUid(cD);
},_editable:function(){var cG=this,cF=cG.selectable&&cG.selectable.options.multiple,cC=cG.options.editable,cD=function(){var cI=c(),cH=cG._editContainer;
if(cH&&cH[0]&&!b.contains(cH[0],cI)&&cH[0]!==cI&&!b(cI).closest(".k-animation-container").length){if(cG.editable.end()){cG.closeCell();
}else{cG._scrollVirtualWrapper();
}}};
if(cC){this.wrapper.addClass("k-editable");
var cE=cG._editMode();
if(cE==="incell"){cG.table.add(cG.lockedTable).on("mousedown"+bJ,bB+">"+bz,function(cH){var cI=b(cH.target);
if(cG._editMode()==="incell"&&cI.hasClass("k-checkbox-label")&&cI.prev().attr(bk.attr("bind"))){cH.preventDefault();
}});
if(cC.update!==false){if(bd){cG.wrapper.on(v+bJ,".k-edit-cell > input[type='checkbox']",function(cH){b(cH.target).focus();
}).on(v+bJ,".k-edit-cell",function(cH){if(!b(cH.target).is("input")){b(cH.currentTarget).find("input[type='checkbox']").focus();
}}).on(bw+bJ,"tr:not(.k-grouping-row) > td",function(cH){var cI=cG._editContainer;
if(cI&&cI[0]&&(b.contains(cI[0],cH.target)||cI[0]===cH.target)){cG._mousedownOnEditCell=true;
}else{cG._mousedownOnEditCell=false;
}});
}cG.wrapper.on(bk.support.touch?"touchstart"+bJ:v+bJ,"tr:not(.k-grouping-row) > td",function(cH){var cJ=b(this),cI=cG.lockedTable&&cJ.closest("table")[0]===cG.lockedTable[0];
cG._mousedownOnEditCell=false;
if(cJ.hasClass("k-hierarchy-cell")||cJ.hasClass("k-detail-cell")||cJ.hasClass("k-group-cell")||cJ.hasClass("k-edit-cell")||cJ.has("a.k-grid-delete").length||cJ.has("button.k-grid-delete").length||cJ.closest("tbody")[0]!==cG.tbody[0]&&!cI||b(cH.target).is(":input")){return;
}if(cG.editable){if(cG.editable.end()){if(cF||bk.support.mobileOS){b(c()).blur();
}cG.closeCell();
cG.editCell(cJ);
}else{cG._scrollVirtualWrapper();
}}else{cG.editCell(cJ);
}}).on("focusin"+bJ,function(){if(!b.contains(this,c())){clearTimeout(cG.timer);
cG.timer=null;
}}).on("focusout"+bJ,function(cH){var cI=true;
if(bd&&cG._mousedownOnEditCell){cI=false;
}cG._mousedownOnEditCell=false;
if(cI){cG.timer=setTimeout(function(){cD(cH);
},1);
}});
}}else{if(cC.update!==false){cG.wrapper.on(v+bJ,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(cH){cH.preventDefault();
cG.editRow(b(this).closest("tr"));
});
if(cG._isVirtualInlineEditable()){cG.wrapper.on("focusout"+bJ,"tr:not(.k-grouping-row) > td",function(){if(cG.editable&&!cG.editable.end()){cG._scrollVirtualWrapper();
}});
}}}if(cC.destroy!==false){cG.wrapper.on(v+bJ,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(cH){cH.preventDefault();
cH.stopPropagation();
cG.removeRow(b(this).closest("tr"));
});
}else{cG.wrapper.on(v+bJ,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(cH){cH.stopPropagation();
if(!cG._confirmation()){cH.preventDefault();
}});
}}},editCell:function(cC){cC=b(cC);
var cF=this,cD=bn(cF.columns)[cF.cellIndex(cC)],cE=cF._modelForContainer(cC);
cF.closeCell();
if(cE&&a2(cD,cE)&&!cD.command){if(cF.trigger(k,{model:cE})){return;
}cF._attachModelChange(cE);
cF._editContainer=cC;
if(cF._shouldClearEditableState){cF._clearEditableState();
}cF.editable=cC.addClass("k-edit-cell").kendoEditable({fields:{field:cD.field,format:cD.format,editor:cD.editor,values:cD.values},model:cE,target:cF,change:function(cH){if(cF.trigger(b1,{values:cH.values,container:cC,model:cE})){cH.preventDefault();
}},skipFocus:cF._isVirtualIncellEditable()&&cF._editableState?true:false}).data("kendoEditable");
var cG=cC.parent().addClass("k-grid-edit-row");
if(cF.lockedContent){f(cG[0],cF._relatedRow(cG).addClass("k-grid-edit-row")[0]);
cF._syncLockedScroll();
}cF.trigger(ae,{container:cC,model:cE});
}},_adjustLockedHorizontalScrollBar:function(){var cE=this.table,cC=cE.parent();
var cD=cE[0].offsetWidth>cC[0].clientWidth?bk.support.scrollbar():0;
this.lockedContent.height(cC[0].offsetHeight-cD);
},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop;
if(this.virtualScrollable){this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop;
}},_syncLockedContentHeight:function(){if(this.lockedTable){if(!this.touchScroller){this._adjustLockedHorizontalScrollBar();
}this._adjustRowsHeight(this.table,this.lockedTable);
}},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var cC=this.lockedHeader.children("table");
var cD=this.thead.parent();
this._adjustRowsHeight(cC,cD);
ch(cC,cD);
}},_syncLockedFooterHeight:function(){if(this.lockedFooter&&this.footer&&this.footer.length){this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"));
}},_destroyEditable:function(){var cD=this;
var cC=function(){if(cD.editable){var cE=cD.editView?cD.editView.element:cD._editContainer;
if(cE){cE.off(v+bJ,"a.k-grid-cancel",cD._editCancelClickHandler);
cE.off(v+bJ,"a.k-grid-update",cD._editUpdateClickHandler);
}cD._detachModelChange();
cD.editable.destroy();
cD.editable=null;
cD._editContainer=null;
cD._destroyEditView();
cD._editableIsClosing=null;
}};
if(cD.editable){if(cD._editMode()==="popup"&&!cD._isMobile){if(cD._editableIsClosing){cD._editContainer.data("kendoWindow").bind("deactivate",cC);
}else{cD._editableIsClosing=true;
cD._editContainer.data("kendoWindow").bind("deactivate",cC).close();
}}else{cC();
}}if(cD._confirmDialog){cD._confirmDialog.close();
cD._confirmDialog.destroy();
cD._confirmDialog=null;
}},_destroyEditView:function(){if(this.editView){this.editView.purge();
this.editView=null;
this.pane.navigate("");
}},_attachModelChange:function(cC){var cD=this;
cD._modelChangeHandler=function(cE){cD._modelChange({field:cE.field,model:this});
};
cC.bind("change",cD._modelChangeHandler);
},_detachModelChange:function(){var cE=this,cC=cE._editContainer,cD=cE._modelForContainer(cC);
if(cD){cD.unbind(p,cE._modelChangeHandler);
}},closeCell:function(cE){var cG=this,cC=cG._editContainer,cD,cH,cF;
if(!cC){return;
}cF=cG._modelForContainer(cC);
if(cE&&cG.trigger("cancel",{container:cC,model:cF})){return;
}cG.trigger(o,{type:cE?"cancel":"save",model:cF,container:cC});
cC.removeClass("k-edit-cell");
cD=bn(cG.columns)[cG.cellIndex(cC)];
cH=cC.parent().removeClass("k-grid-edit-row");
if(cG.lockedContent){cG._relatedRow(cH).removeClass("k-grid-edit-row");
}cG._destroyEditable();
cG._displayCell(cC,cD,cF);
if(cG._shouldClearEditableState){cG._clearEditableState();
}cG.trigger("itemChange",{item:cH,data:cF,ns:cp});
if(cG.lockedContent){f(cH.css("height","")[0],cG._relatedRow(cH).css("height","")[0]);
}},_displayCell:function(cC,cD,cE){var cH=this,cG={storage:{},count:0},cF=ai({},bk.Template,cH.options.templateSettings),cI=bk.template(cH._cellTmpl(cD,cG),cF);
if(cG.count>0){cI=bT(cI,cG.storage);
}cC.empty().html(cI(cE));
cH.angular("compile",function(){return{elements:cC,data:[{dataItem:cE}]};
});
},removeRow:function(cC){if(!this._confirmation(cC)){return;
}this._removeRow(cC);
},_removeRow:function(cG){var cI=this,cE,cF,cC,cH,cD=cI._editMode();
if(cD!=="incell"){cI.cancelRow();
}cG=b(cG);
if(cI.lockedContent){cG=cG.add(cI._relatedRow(cG));
}cG=cG.hide();
cE=cI._modelForContainer(cG);
if(cE&&!cI.trigger(bV,{row:cG,model:cE})){cH=cI.dataSource.options.schema;
if(cI._selectedIds&&cH&&cH.model){cF=a6(cI.dataSource.options.schema.model)?cI.dataSource.options.schema.model.fn.idField:cI.dataSource.options.schema.model.id;
cC=cE[cF];
delete cI._selectedIds[cC];
}cI.dataSource.remove(cE);
if(cD==="inline"||cD==="popup"){cI.dataSource.sync();
}}else{if(cD==="incell"){cI._destroyEditable();
}}},_editMode:function(){var cD="incell",cC=this.options.editable;
if(cC!==true){if(typeof cC=="string"){cD=cC;
}else{cD=cC.mode||cD;
}}return cD;
},editRow:function(cF){var cE;
var cG=this;
if(cF instanceof bK){cE=cF;
}else{cF=b(cF);
cE=cG._modelForContainer(cF);
}var cD=cG._editMode();
var cC;
cG.cancelRow();
if(cE){cF=cG.tbody.children("["+bk.attr("uid")+"="+cE.uid+"]");
cG._attachModelChange(cE);
if(cD==="popup"){cG._createPopupEditor(cE);
}else{if(cD==="inline"){cG._createInlineEditor(cF,cE);
}else{if(cD==="incell"){b(cF).children(U).each(function(){var cH=b(this);
var cI=bn(cG.columns)[cG.cellIndex(cH)];
cE=cG._modelForContainer(cH);
if(cE&&(!cE.editable||cE.editable(cI.field))&&cI.field&&!cI.selectable){cG.editCell(cH);
return false;
}});
}}}cC=cG.editView?cG.editView.element:cG._editContainer;
if(cC){if(!this._editCancelClickHandler){this._editCancelClickHandler=bT(this._editCancelClick,this);
}cC.on(v+bJ,"a.k-grid-cancel",this._editCancelClickHandler);
if(!this._editUpdateClickHandler){this._editUpdateClickHandler=bT(this._editUpdateClick,this);
}cC.on(v+bJ,"a.k-grid-update",this._editUpdateClickHandler);
}}},_editUpdateClick:function(cC){cC.preventDefault();
cC.stopPropagation();
this.saveRow();
},_editCancelClick:function(cE){var cH=this;
var cG=cH.options.navigatable;
var cF=cH.editable.options.model;
var cC=cH.editView?cH.editView.element:cH._editContainer;
cE.preventDefault();
cE.stopPropagation();
if(cH.trigger("cancel",{container:cC,model:cF})){return;
}var cD=cH.items().index(b(cH.current()).parent());
cH.cancelRow();
if(cG){cH._setCurrent(cH.items().eq(cD).children().filter(bz).first());
ax(cH.table,true);
}},_createPopupEditor:function(cP){var cV=this;
var cM="<div "+bk.attr("uid")+'="'+cP.uid+'" class="k-popup-edit-form'+(cV._isMobile?" k-mobile-list":"")+'"><'+(cV._isMobile?"ul":"div")+' class="k-edit-form-container">';
var cF;
var cH;
var cL=[];
var cN;
var cO;
var cW;
var cY;
var cE;
var cX;
var cD;
var cT;
var cG=bn(cV.columns);
var cC;
var cK=bk.guid();
var cJ=cV.options.editable;
var cU=cJ.template;
var cQ=be(cJ)?cJ.window:{};
var cR=ai({},bk.Template,cV.options.templateSettings);
var cS;
if(cV.trigger(k,{model:cP})){return;
}cQ=cQ||{};
if(cU){if(typeof cU===ce){cU=bk.unescape(cU);
}cM+=bk.template(cU,cR)(cP);
for(cN=0,cO=cG.length;
cN<cO;
cN++){cF=cG[cN];
if(cF.command){cT=aC(cF.command,"edit");
if(cT){cH=cT;
}}}}else{for(cN=0,cO=cG.length;
cN<cO;
cN++){cF=cG[cN];
if(cF.selectable){continue;
}if(!cF.command){if(!cV._isMobile){cM+='<div class="k-edit-label"><label for="'+cF.field+'">'+(cF.title||cF.field||"")+"</label></div>";
if(a2(cF,cP)){cL.push({field:cF.field,title:cF.title,format:cF.format,editor:cF.editor,values:cF.values});
cM+="<div "+bk.attr("container-for")+'="'+cF.field+'" class="k-edit-field"></div>';
}else{cS={storage:{},count:0};
cW=bk.template(cV._cellTmpl(cF,cS),cR);
if(cS.count>0){cW=bT(cW,cS.storage);
}cM+='<div class="k-edit-field">'+cW(cP)+"</div>";
}}else{cM+='<li class="k-item">';
if(a2(cF,cP)){cL.push({field:cF.field,title:cF.title,format:cF.format,editor:cF.editor,values:cF.values});
cM+='<label class="k-label"><span class="k-item-title">'+(cF.title||cF.field||"")+"</span>";
cM+='<div id="'+cF.field+"_"+cK+'" '+bk.attr("container-for")+'="'+cF.field+'"></div>';
}else{cS={storage:{},count:0};
cW=bk.template(cV._cellTmpl(cF,cS),cR);
if(cS.count>0){cW=bT(cW,cS.storage);
}cM+='<label class="k-label k-no-click"><span class="k-item-title">'+(cF.title||cF.field||"")+"</span>";
cM+='<span class="k-no-editor">'+cW(cP)+"</span>";
}cM+="</label></li>";
}}else{if(cF.command){cT=aC(cF.command,"edit");
if(cT){cH=cT;
}}}}}if(cH){if(be(cH)){if(be(cH.text)){cY=cH.text.update;
cE=cH.text.cancel;
}if(be(cH.iconClass)){cX=cH.iconClass.update;
cD=cH.iconClass.cancel;
}if(cH.attr){cC=cH.attr;
}}}var cI;
if(!cV._isMobile){cM+='<div class="k-edit-buttons k-state-default">';
cM+=cV._createButton({name:"update",text:cY,attr:cC,iconClass:cX})+cV._createButton({name:"canceledit",text:cE,attr:cC,iconClass:cD});
cM+="</div></div></div>";
cI=cV._editContainer=b(cM).appendTo(cV.wrapper).eq(0).kendoWindow(ai({modal:true,resizable:false,draggable:true,title:cV.options.messages.commands.edit||"Edit",visible:false,close:function(c0){if(c0.userTriggered){c0.sender.element.focus();
if(cV.trigger("cancel",{container:cI,model:cP})){c0.preventDefault();
return;
}var cZ=cV.items().index(b(cV.current()).parent());
cV._editableIsClosing=true;
cV.cancelRow();
if(cV.options.navigatable){cV._setCurrent(cV.items().eq(cZ).children().filter(bz).first());
ax(cV.table,true);
}}}},cQ));
}else{cM+="</ul></div>";
cV.editView=cV.pane.append("<div data-"+bk.ns+'role="view" class="k-grid-edit-form"><div data-'+bk.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(cV.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div data-'+bk.ns+'role="content" class="'+u.content+'">'+cM+"</div></div>");
cI=cV._editContainer=cV.editView.element.find(".k-popup-edit-form");
}cV.editable=cV._editContainer.kendoEditable({fields:cL,model:cP,clearContainer:false,target:cV}).data("kendoEditable");
cV._openPopUpEditor();
cV.trigger(ae,{container:cI,model:cP});
},_openPopUpEditor:function(){var cC=this;
var cD=cC._editContainer?cC._editContainer.data("kendoWindow"):null;
var cE=(cC.options.editable||{}).window||{};
if(!this._isMobile){if(cD){if(!cE.position){cD.center();
}cD.open();
}}else{this.pane.navigate(this.editView,this._editAnimation);
}},_createInlineEditor:function(cH,cG){var cI=this;
var cD;
var cC;
var cE;
var cF=[];
if(cI.trigger(k,{model:cG})){return;
}if(cI.lockedContent){cH=cH.add(cI._relatedRow(cH));
}cH.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){cC=b(this);
cD=bn(cI.columns)[cI.cellIndex(cC)];
if(!cD.command&&a2(cD,cG)){cF.push({field:cD.field,title:cD.title,format:cD.format,editor:cD.editor,values:cD.values});
cC.attr(bk.attr("container-for"),cD.field);
cC.empty();
}else{if(cD.command){cE=aC(cD.command,"edit");
if(cE){cC.empty();
var cN,cL,cM,cK,cJ;
if(be(cE)){if(be(cE.text)){cN=cE.text.update;
cL=cE.text.cancel;
}if(be(cE.iconClass)){cM=cE.iconClass.update;
cK=cE.iconClass.cancel;
}if(cE.attr){cJ=cE.attr;
}}b(cI._createButton({name:"update",text:cN,attr:cJ,iconClass:cM})+cI._createButton({name:"canceledit",text:cL,attr:cJ,iconClass:cK})).appendTo(cC);
}}}});
cI._editContainer=cH;
cI._editContainer.addClass("k-grid-edit-row");
if(cI._shouldClearEditableState){cI._clearEditableState();
}cI.editable=new bk.ui.Editable(cI._editContainer,{target:cI,fields:cF,model:cG,skipFocus:cI._isVirtualInlineEditable()&&cI._editableState&&cI._editableState.field?true:false,clearContainer:false});
if(cH.length>1){f(cH[0],cH[1]);
cI._applyLockedContainersWidth();
}cI.trigger(ae,{container:cH,model:cG});
},cancelRow:function(cE){var cF=this,cC=cF._editContainer,cD;
if(cC){cD=cF._modelForContainer(cC);
if(!cD||cE&&cF.trigger("cancel",{container:cC,model:cD})){return;
}cF._destroyEditable();
cF.dataSource.cancelChanges(cD);
cF._clearEditableState();
if(cF._editMode()!=="popup"){cF._displayRow(cC);
}else{cF._displayRow(cF.tbody.find("["+bk.attr("uid")+"="+cD.uid+"]"));
}}},saveRow:function(){var cF=this;
var cC=this._editContainer;
var cE=this._modelForContainer(cC);
var cD=b.Deferred();
var cG;
if(!cC||!this.editable){return cD.resolve().promise();
}cG=cF.editable&&cF.editable.end();
if(!cG||this.trigger(b1,{container:cC,model:cE})){if(!cG){cF._scrollVirtualWrapper();
}return cD.reject().promise();
}cF._clearEditableState();
return this.dataSource.sync();
},_displayRow:function(cK){var cL=this,cG=cL._modelForContainer(cK),cJ,cH,cI,cF=cK.hasClass("k-state-selected"),cE=cK.hasClass("k-alt");
if(cG){if(cL.lockedContent){cJ=b((cE?cL.lockedAltRowTemplate:cL.lockedRowTemplate)(cG));
cL._relatedRow(cK.last()).replaceWith(cJ);
}cL.angular("cleanup",function(){return{elements:cK.get()};
});
cH=b((cE?cL.altRowTemplate:cL.rowTemplate)(cG));
if(!cK.is(":visible")){cH.hide();
}cK.replaceWith(cH);
cL.trigger("itemChange",{item:cH,data:cG,ns:cp});
if(cJ&&cJ.length){cL.trigger("itemChange",{item:cJ,data:cG,ns:cp});
}var cD=cH;
var cC=[{dataItem:cG}];
if(cJ&&cJ.length){cD=cH.add(cJ);
cC.push({dataItem:cG});
}cL.angular("compile",function(){return{elements:cD.get(),data:cC};
});
if(cF&&(cL.options.selectable||cL._checkBoxSelection)){cL.select(cH.add(cJ));
}if(cJ){f(cH[0],cJ[0]);
}cI=cH.next();
if(cI.hasClass("k-detail-row")&&cI.is(":visible")){cH.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse");
}}},_showMessage:function(cD,cE){var cF=this;
if(!cF._isMobile){return window.confirm(cD.title);
}var cC=cF._confirmDialog=new bk.ui.Confirm(b("<div />").appendTo(document.body),{modal:{preventScroll:true},closable:false,title:false,content:cD.title,messages:{okText:cD.confirmDelete,cancel:cD.cancelDelete},open:function(){cF.content.data(bO,cF.content.css(bO));
cF.content.css(bO,aR);
},close:function(){cF.content.css(bO,cF.content.data(bO));
}});
cC.result.done(function(){cF._removeRow(cE);
}).fail(function(){var cG=cF._confirmDialog;
if(cG){cG.close();
cG.destroy();
}});
return false;
},_confirmation:function(cE){var cF=this,cD=cF.options.editable,cC=cD===true||typeof cD===ce?cF.options.messages.editable.confirmation:cD.confirmation;
if(be(cD)&&typeof cD.mode===ce&&typeof cC!==aA&&typeof cC!==ce&&cC!==false){cC=cF.options.messages.editable.confirmation;
}if(cC!==false&&cC!=null){if(typeof cC===aA){cC=cC(cF._modelForContainer(cE));
}return cF._showMessage({confirmDelete:cD.confirmDelete||cF.options.messages.editable.confirmDelete,cancelDelete:cD.cancelDelete||cF.options.messages.editable.cancelDelete,title:cC===true?cF.options.messages.editable.confirmation:cC},cE);
}return true;
},cancelChanges:function(){var cC=this;
cC.dataSource.cancelChanges();
if(cC._isVirtualEditable()){cC._virtualPageToTop(function(){cC.virtualScrollable.scrollToTop();
});
}},saveChanges:function(){var cC=this;
var cD=cC.editable&&cC.editable.end();
if((cD||!cC.editable)&&!cC.trigger(b2)){cC.dataSource.sync();
}else{if(!cD){cC._scrollVirtualWrapper();
}}},addRow:function(){var cJ=this,cF,cE=cJ.dataSource,cG=cJ._editMode(),cC=cJ.options.editable.createAt||"",cI=cE.pageSize(),cK=cE.view()||[];
var cD=cC.toLowerCase()===l;
var cH;
var cL=cJ._isVirtualEditable();
if(cJ.editable&&cJ.editable.end()||!cJ.editable){if(cG!="incell"){cJ.cancelRow();
}cF=cE.indexOf(cK[0]);
if(cD){cF+=cK.length;
if(cI&&!cE.options.serverPaging&&cI<=cK.length){cF-=1;
}}if(cF<0){if(cE.page()>cE.totalPages()){cF=(cE.page()-1)*cI;
}else{cF=0;
}}if(cJ.options.navigatable&&cG=="incell"){cJ._removeCurrent();
}if(cL){cJ._virtualAddRow();
}else{cH=cE.insert(cF,{});
cJ._editModel(cH);
}}else{cJ._scrollVirtualWrapper();
}},_editModel:function(cG){var cJ=this;
var cD=cJ.options.editable.createAt||"";
var cF=cJ._editMode();
if(cG){var cE=cG.uid,cI=cJ.lockedContent?cJ.lockedTable:cJ.table,cH=cI.find("tr["+bk.attr("uid")+"="+cE+"]"),cC=cH.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(cJ._firstEditableColumnIndex(cH));
if(cF==="inline"&&cH.length){cJ.editRow(cH);
}else{if(cF==="popup"){cJ.editRow(cG);
}else{if(cC.length){cJ.editCell(cC);
}}}if(cD.toLowerCase()=="bottom"&&cJ.lockedContent){cJ.lockedContent[0].scrollTop=cJ.content[0].scrollTop=cJ.table[0].offsetHeight;
}}},_virtualAddRow:function(){var cD=this;
var cC=(cD.options.editable.createAt||"").toLowerCase()===l;
cD._clearEditableState();
if(cC){cD._virtualAddRowAtBottom();
}else{cD._virtualAddRowAtTop();
}},_virtualAddRowAtTop:function(){var cE=this;
var cC=cE.dataSource;
var cF=cE.virtualScrollable;
var cD;
if(cC.page()===1){cD=cC.insert(0,{});
cE._editModel(cD);
cF.scrollToTop();
}else{cE._virtualPageToTop(function(){cD=cC.insert(0,{});
cE._editModel(cD);
cF.scrollToTop();
});
}},_virtualAddRowAtBottom:function(){var cF=this;
var cC=cF.dataSource;
var cG=cF.virtualScrollable;
var cD=cC.total();
var cE;
if(cC.at(cD-1) instanceof bK){cE=cC.insert(cD,{});
cF._virtualPageToBottom(function(){cF._editModel(cE);
cG.scrollToBottom();
});
}else{cF._virtualPageToBottom(function(){cE=cC.insert(cD,{});
cF._editModel(cE);
cG.scrollToBottom();
});
}},_virtualPageToTop:function(cC){var cD=this;
cD._virtualPage(0,cD.dataSource.take(),function(){cC();
});
},_virtualPageToBottom:function(cC){var cG=this;
var cD=cG.dataSource;
var cF=cD.take();
var cH=cD.total();
var cE=cH>cF?cH-cF:0;
cG._virtualPage(cE,cF,function(){cC();
});
},_virtualPage:function(cD,cE,cC){var cF=this;
if(cF._isVirtualEditable()){cF.virtualScrollable._preventScroll=true;
cF.virtualScrollable._page(cD,cE,cC);
}},_firstEditableColumnIndex:function(cE){var cI=this,cC,cD=bn(cI.columns),cF,cG,cH=cI._modelForContainer(cE);
for(cF=0,cG=cD.length;
cF<cG;
cF++){cC=cD[cF];
if(cH&&(!cH.editable||cH.editable(cC.field))&&!cC.command&&cC.field&&cC.hidden!==true){return cF;
}}return -1;
},_toolbar:function(){var cE=this,cG=cE.wrapper,cF=cE.options.toolbar,cD=cE.options.editable,cC;
if(cF){cC=cE.wrapper.find(".k-grid-toolbar");
if(!cC.length){if(!a6(cF)){cF=typeof cF===ce?cF:cE._toolbarTmpl(cF).replace(cn,"\\#");
cF=bT(bk.template(cF),cE);
}cC=b('<div class="k-header k-grid-toolbar" />').html(cF({})).prependTo(cG);
cE.angular("compile",function(){return{elements:cC.get()};
});
}if(cD&&cD.create!==false){cC.on(v+bJ,".k-grid-add",function(cH){cH.preventDefault();
cE.addRow();
}).on(v+bJ,".k-grid-cancel-changes",function(cH){cH.preventDefault();
cE.cancelChanges();
}).on(v+bJ,".k-grid-save-changes",function(cH){cH.preventDefault();
cE.saveChanges();
});
}cC.on(v+bJ,".k-grid-excel",function(cH){cH.preventDefault();
cE.saveAsExcel();
});
cC.on(v+bJ,".k-grid-pdf",function(cH){cH.preventDefault();
cE.saveAsPDF();
});
cC.on(aZ+bJ,".k-grid-search input",function(cH){var cI=cH.currentTarget;
clearTimeout(cE._searchTimeOut);
cE._searchTimeOut=setTimeout(function(){cE._searchTimeOut=null;
var cL=cE.options;
var cM=cL.search?cL.search.fields:null;
var cJ={filters:[],logic:"or"};
var cN=cI.value;
if(!cM){cM=aB(cL.columns);
}if(cE.dataSource.options.endless){cE.dataSource.options.endless=null;
cE._endlessPageSize=cE.dataSource.options.pageSize;
}if(cN){for(var cK=0;
cK<cM.length;
cK++){cJ.filters.push({field:cM[cK],operator:"contains",value:cN});
}}else{cJ={};
}cE.dataSource.filter(cJ);
},300);
});
}},_toolbarTmpl:function(cD){var cH=this,cF,cG,cE="",cC;
if(a0(cD)){for(cF=0,cG=cD.length;
cF<cG;
cF++){cC=typeof cD[cF]==="string"?cD[cF].toLowerCase():(cD[cF].name||"").toLowerCase();
if(cC==="search"){cE+="<span class='k-textbox k-grid-search k-display-flex'>";
cE+="<input autocomplete='off' placeholder='"+cH.options.messages.search+"' title='"+cH.options.messages.search+"' class='k-input' />";
cE+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>";
cE+="</span>";
}else{cE+=cH._createButton(cD[cF]);
}}}return cE;
},_createButton:function(cE){var cI=cE.template||N,cF=typeof cE===ce?cE:cE.name||cE.text,cD=X[cF]?X[cF].className:"k-grid-"+(cF||"").replace(/\s/g,""),cH={className:cD,text:cF,attr:"",iconClass:""},cG=this.options.messages.commands,cC;
if(!cF&&!(be(cE)&&cE.template)){throw new Error("Custom commands should have name specified");
}if(be(cE)){cE=ai(true,{},cE);
if(cE.className&&aW(cH.className,cE.className.split(" "))<0){cE.className+=" "+cH.className;
}else{if(cE.className===cq){cE.className=cH.className;
}}if(cF==="edit"){cE=ai(true,{},cE);
cE.text=be(cE.text)?cE.text.edit:cE.text;
cE.iconClass=be(cE.iconClass)?cE.iconClass.edit:cE.iconClass;
}if(cE.attr){if(be(cE.attr)){cE.attr=cf(cE.attr);
}if(typeof cE.attr===ce){cC=cE.attr.match(/class="(.+?)"/);
if(cC&&aW(cC[1],cE.className.split(" "))<0){cE.className+=" "+cC[1];
}}}cH=ai(true,cH,X[cF],{text:cG[cF]},cE);
}else{cH=ai(true,cH,X[cF],{text:cG[cF]});
}return bk.template(cI)(cH);
},_hasFooters:function(){return !!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0;
},_groupable:function(){var cC=this;
if(cC._groupableClickHandler){cC.table.add(cC.lockedTable).off(v+bJ,cC._groupableClickHandler);
}else{cC._groupableClickHandler=function(cD){var cE=b(this),cG=cE.closest("tr");
var cF=cC._groupRows?cC._groupRows[cC.wrapper.find(".k-grouping-row").index(cG)]:{};
if(cE.hasClass("k-i-collapse")){if(!cC.trigger("groupCollapse",{group:cF,element:cG})){cC.collapseGroup(cG);
}}else{if(!cC.trigger("groupExpand",{group:cF,element:cG})){cC.expandGroup(cG);
}}cD.preventDefault();
cD.stopPropagation();
};
}if(cC._isLocked()){cC.lockedTable.on(v+bJ,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",cC._groupableClickHandler);
}else{cC.table.on(v+bJ,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",cC._groupableClickHandler);
}cC._attachGroupable();
},_attachGroupable:function(){var cF=this,cG=cF.wrapper,cE=cF.options.groupable,cC=aP+"["+bk.attr("field")+"]",cD=cF.content?".k-grid-header:first "+cC:"table:first>.k-grid-header "+cC;
if(cE&&cE.enabled!==false){if(!cG.has("div.k-grouping-header")[0]){b("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(cG);
}if(cF.groupable){cF._destroyGroupable();
}if(m.chrome){cG.find("div.k-grouping-header").css("touch-action","none");
cG.find(cD).css("touch-action","none");
}cF.groupable=new cp.Groupable(cG,ai({},cE,{draggable:cF._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:cF.dataSource,draggableElements:cD,filter:cD,allowDrag:cF.options.reorderable,change:function(cH){if(cF.trigger("group",{groups:cH.groups})){cH.preventDefault();
}else{cF._clearEditableState();
if(cF.dataSource.options.endless){cF.dataSource.options.endless=null;
cF._endlessPageSize=cF.dataSource.options.pageSize;
cF.dataSource._skip=0;
cF.dataSource._pageSize=cF.dataSource._take=cF._endlessPageSize;
cF.dataSource._page=1;
}}}}));
cF._addGroupableOptionsToHeader();
}},_addGroupableOptionsToHeader:function(){var cK=this;
var cF=at(cK.columns);
var cD={};
var cG="";
var cI=cK._headerCells();
var cC="";
var cH;
var cE;
var cJ;
for(cJ=0;
cJ<cF.length;
cJ++){cG=cF[cJ].field;
cD[cF[cJ].field]=cF[cJ];
}for(cJ=0;
cJ<cI.length;
cJ++){cH=cI.eq(cJ);
cC=cH.attr(bk.attr(aj));
cE=cD[cC];
if(cE&&cE.groupable&&cE.groupable.sort){cH.data(aF,cE.groupable.sort);
}}},_destroyGroupable:function(){var cC=this;
if(cC.groupable&&cC.groupable.element){cC.groupable.element.kendoGroupable("destroy");
}cC.groupable=null;
cC._removeGroupableOptionsFromHeader();
},_removeGroupableOptionsFromHeader:function(){var cE=this;
var cC=cE._headerCells();
for(var cD=0;
cD<cC.length;
cD++){cC.eq(cD).removeData(aF);
}},_continuousItems:function(cF,cC){if(!this.lockedContent){return;
}var cL=this;
var cE=cL.table.add(cL.lockedTable);
var cH=b(cF,cE[0]);
var cJ=b(cF,cE[1]);
var cD=cC?br(cL.columns).length:1;
var cI=cC?cL.columns.length-cD:1;
var cK=[];
for(var cG=0;
cG<cH.length;
cG+=cD){bU.apply(cK,cH.slice(cG,cG+cD));
bU.apply(cK,cJ.splice(0,cI));
}return cK;
},_selectable:function(){var cJ=this,cG,cC,cH=[],cF=cJ._isLocked(),cI=cJ.options.selectable;
if(cI){if(cJ.selectable){cJ.selectable.destroy();
}cJ._selectedIds={};
cI=bk.ui.Selectable.parseOptions(cI);
cG=cI.multiple;
cC=cI.cell;
if(cJ._hasDetails()){cH[cH.length]=".k-detail-row";
}if(cJ.options.groupable||cJ._hasFooters()||cJ._groups()){cH[cH.length]=".k-grouping-row,.k-group-footer";
}cH=cH.join(",");
if(cH!==""){cH=":not("+cH+")";
}var cD=cJ.table;
if(cF){cD=cD.add(cJ.lockedTable);
}var cE=">"+(cC?b7:"tbody>tr"+cH);
cJ.selectable=new bk.ui.Selectable(cD,{filter:cE,aria:true,multiple:cG,change:function(){var cK;
if(!cC){cJ._persistSelectedRows();
}if(cJ._checkBoxSelection){cK=cJ.selectable.value();
cJ._uncheckCheckBoxes();
cJ._checkRows(cK);
if(cK.length&&cK.length===cJ.items().length){cJ._toggleHeaderCheckState(true);
}else{cJ._toggleHeaderCheckState(false);
}}cJ.trigger(p);
},useAllItems:cF&&cG&&cC,relatedTarget:function(cL){if(cC||!cF){return;
}var cN;
var cO=b();
for(var cK=0,cM=cL.length;
cK<cM;
cK++){cN=cJ._relatedRow(cL[cK]);
if(aW(cN[0],cL)<0){cO=cO.add(cN);
}}return cO;
},continuousItems:function(){return cJ._continuousItems(cE,cC);
}});
if(cJ.options.navigatable){cD.on("keydown"+bJ,function(cL){var cK=cJ.current();
var cM=cL.target;
if(cL.keyCode===bl.SPACEBAR&&!cL.shiftKey&&b.inArray(cM,cD)>-1&&!cK.is(".k-edit-cell,.k-header")&&cK.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){cL.preventDefault();
cL.stopPropagation();
cK=cC?cK:cK.parent();
if(cF&&!cC){cK=cK.add(cJ._relatedRow(cK));
}if(cG){if(!cL.ctrlKey){cJ.selectable.clear();
}else{if(cK.hasClass(b6)){cJ._deselectCheckRows(cK);
return;
}}}else{cJ.selectable.clear();
}if(!cC){cJ.selectable._lastActive=cK;
}cJ.selectable.value(cK);
}else{if(!cC&&(b(cM).is("td")||b(cM).is("table")&&aW(cM,this._navigatableTables))&&(cL.shiftKey&&cL.keyCode==bl.LEFT||cL.shiftKey&&cL.keyCode==bl.RIGHT||cL.shiftKey&&cL.keyCode==bl.UP||cL.shiftKey&&cL.keyCode==bl.DOWN||cL.keyCode===bl.SPACEBAR&&cL.shiftKey)){cL.preventDefault();
cL.stopPropagation();
cK=cK.parent();
if(cF){cK=cK.add(cJ._relatedRow(cK));
}if(cG){if(!cJ.selectable._lastActive){cJ.selectable._lastActive=cK;
}cJ.selectable.selectRange(cJ.selectable._firstSelectee(),cK);
}else{cJ.selectable.clear();
cJ.selectable.value(cK);
}}}});
}}},_clipboard:function(){var cD=this.options;
var cE=cD.selectable;
if(cE&&cD.allowCopy){var cC=this;
if(!cD.navigatable){cC.table.add(cC.lockedTable).attr("tabindex",0).on("mousedown"+bJ+" keydown"+bJ,".k-detail-cell",function(cF){if(cF.target!==cF.currentTarget){cF.stopImmediatePropagation();
}}).on("mousedown"+bJ,bB+">"+bz,bT(cj,cC));
}cC.copyHandler=bT(cC.copySelection,cC);
cC.updateClipBoardState=function(){if(cC.areaClipBoard){cC.areaClipBoard.val(cC.getTSV()).focus().select();
}};
cC.bind("change",cC.updateClipBoardState);
cC.wrapper.on("keydown",cC.copyHandler);
cC.clearAreaHandler=bT(cC.clearArea,cC);
cC.wrapper.on("keyup",cC.clearAreaHandler);
}},copySelection:function(cC){if(cC instanceof jQuery.Event&&!(cC.ctrlKey||cC.metaKey)||b(cC.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text){return;
}if(!this.areaClipBoard){this.areaClipBoard=b("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper);
}this.areaClipBoard.val(this.getTSV()).focus().select();
},getTSV:function(){var cF=this;
var cL=cF.select();
var cE="\t";
var cC=cF.options.allowCopy;
var cI=true;
if(b.isPlainObject(cC)&&cC.delimeter){cE=cC.delimeter;
}var cM="";
if(cL.length){if(cL.eq(0).is("tr")){cL=cL.find("td:not(.k-group-cell)");
}if(cI){cL.filter(":visible");
}var cJ=[];
var cD=this.columns.length;
var cH=cF._isLocked()&&br(cF.columns).length;
var cG=true;
b.each(cL,function(cQ,cN){cN=b(cN);
var cS=cN.closest("tr");
var cR=cS.index();
var cO=cN.index();
if(cI){cO-=cN.prevAll(":hidden").length;
}if(cH&&cG){cG=b.contains(cF.lockedTable[0],cN[0]);
}if(cF._groups()&&cG){cO-=cF._groups();
}cO=cG?cO:cO+cH;
if(cD>cO){cD=cO;
}var cP=cN.text();
if(!cJ[cR]){cJ[cR]=[];
}cJ[cR][cO]=cP;
});
var cK=cJ.length;
cJ=b.each(cJ,function(cN,cO){if(cO){cJ[cN]=cO.slice(cD);
if(cK>cN){cK=cN;
}}});
b.each(cJ.slice(cK),function(cN,cO){if(cO){cM+=cO.join(cE)+"\r\n";
}else{cM+="\r\n";
}});
}return cM;
},clearArea:function(cC){var cD;
if(this.areaClipBoard&&cC&&cC.target===this.areaClipBoard[0]){if(this.options.navigatable){cD=b(this.current()).closest("table");
}else{cD=this.table;
}ax(cD,true);
}if(this.areaClipBoard){this.areaClipBoard.remove();
this.areaClipBoard=null;
}},_adaptiveColumns:function(){var cC=this;
if(cC._anyColumnHasMediaQuery()){cC._setColumnsMediaVisibility(cC.columns);
cC._attachColumnMediaResizeHandler();
}},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length;
},_columnsWithMediaQuery:function(){return K(this.columns);
},_attachColumnMediaResizeHandler:function(){var cC=this;
cC._detachColumnMediaResizeHandler();
cC._columnMediaResizeHandler=bT(cC._onColumnMediaResize,cC);
b(window).on(b0+bJ,cC._columnMediaResizeHandler);
},_detachColumnMediaResizeHandler:function(){var cC=this;
if(cC._columnMediaResizeHandler){b(window).off(b0+bJ,cC._columnMediaResizeHandler);
}},_onColumnMediaResize:function(){var cC=this;
cC._setColumnsMediaVisibility(cC.columns);
cC._setContentMediaWidth();
},_setColumnsMediaVisibility:function(cD){var cC=cD||[];
for(var cE=0;
cE<cC.length;
cE++){this._setColumnMediaVisibility(cC[cE]);
}},_setColumnMediaVisibility:function(cC){var cD=this;
if(bg(cC.media)){cD._setColumnsMediaVisibility(cC.columns);
}else{if(A(cC)){cD._showColumnByMedia(cC);
if(!cC.hidden){cD._setColumnsMediaVisibility(cC.columns);
}}else{cD._hideColumnByMedia(cC);
}}},_showColumnByMedia:function(cC){if(!cC.hidden){this.showColumn(cC);
}b9(cC);
},_hideColumnByMedia:function(cC){var cD=cC.hidden;
if(!cD){cC._hideByMedia=true;
this.hideColumn(cC);
cC._hideByMedia=false;
cC.hidden=cD;
}b9(cC);
},_setContentMediaWidth:function(){var cR=this;
var cQ=cR.options;
var cP=cR._isLocked();
var cI;
if(cQ.scrollable&&cQ.resizable){if(cP&&cR.lockedFooter){cI=cR.lockedFooter.children("table");
}else{if(cR.footer){cI=cR.footer.find(">.k-grid-footer-wrap>table");
}}if(!cI||!cI[0]){cI=b();
}var cJ=cP?cR.wrapper.find(".k-grid-header-locked").find("table"):cR.wrapper.find(".k-grid-header").find("table");
var cG=cP?cR.lockedTable:cR.table;
var cL=cJ.find("th");
var cK=cJ.find("colgroup");
var cM=cL.length;
var cT=cL.filter(a1).length;
var cN=cL.length-cT;
var cS=0;
if(cJ[0].style.width!==""&&parseFloat(cJ[0].style.width)!==cS){var cH=cJ.css("width");
for(var cO=0;
cO<cM;
cO++){if(a4(cL[cO])){var cF;
var cC=Math.max(cO,cO-cN);
var cD=cK.children()[cC];
var cE=cD?cD.style.width:"";
if(cE!==""){cF=parseFloat(cE);
}else{cJ.css("width","auto");
cF=bN(cL.eq(cO));
cJ.css("width",cH);
}cS+=cF;
}}cG.css("width",cS-1);
cJ.css("width",cS);
cI.css("width",cS);
}}},_minScreenSupport:function(){var cC=this.hideMinScreenCols();
if(cC){this.minScreenResizeHandler=bT(this.hideMinScreenCols,this);
b(window).on("resize",this.minScreenResizeHandler);
}},hideMinScreenCols:function(){var cC=this.columns,cD=window.innerWidth>0?window.innerWidth:screen.width;
return this._iterateMinScreenCols(cC,cD);
},_iterateMinScreenCols:function(cE,cH){var cC=false;
for(var cF=0;
cF<cE.length;
cF++){var cD=cE[cF];
var cG=cD.minScreenWidth;
if(cG!==cq&&cG!==null){cC=true;
if(cG>cH){this.hideColumn(cD);
}else{this.showColumn(cD);
}}if(!cD.hidden&&cD.columns){cC=this._iterateMinScreenCols(cD.columns,cH)||cC;
}}return cC;
},_relatedRow:function(cE){var cD=this.lockedTable;
cE=b(cE);
if(!cD){return cE;
}var cF=cE.closest(this.table.add(this.lockedTable));
var cC=cF.find(">tbody>tr").index(cE);
cF=cF[0]===this.table[0]?cD:this.table;
return cF.find(">tbody>tr").eq(cC);
},_relatedCell:function(cC){var cE=this.lockedTable;
cC=b(cC);
if(!cE){return cC;
}var cF=cC.closest(this.table.add(this.lockedTable));
var cD=cF.find(">tbody>tr>td").index(cC);
cF=cF[0]===this.table[0]?cE:this.table;
return cF.find(">tbody>tr>td").index(cD);
},clearSelection:function(){var cC=this;
if(cC.selectable&&!cC._checkBoxSelection){cC.selectable.clear();
}if(cC._checkBoxSelection){cC._deselectCheckRows(cC.select());
return;
}if(cC.options.persistSelection){cC._persistSelectedRows();
}else{cC._selectedIds={};
}cC.trigger(p);
},select:function(cD){var cG=this,cE=cG.selectable,cF=bk.ui.Selectable.parseOptions(this.options.selectable),cC=cF.cell;
cD=cG.table.add(cG.lockedTable).find(cD);
if(cD.length){if(cE&&!cE.options.multiple){cE.clear();
cD=cD.first();
}if(cG._isLocked()){cD=cD.add(cD.map(function(){if(cC){return cG._relatedCell(this);
}else{return cG._relatedRow(this);
}}));
}if(cE&&!cG._checkBoxSelection){cE.value(cD);
}else{cG._checkRows(cD);
if(cG.select().length===cG.items().length){cG._toggleHeaderCheckState(true);
}if(!cC){cG._persistSelectedRows();
}cG.trigger(p);
}return;
}return cE?cE.value():cG.items().filter("."+b6);
},_toggleHeaderCheckState:function(cC){var cD=this;
if(cC){cD.thead.add(cD.lockedHeader).find("tr "+r).prop("checked",true).attr("aria-checked",true).attr("aria-label","Deselect all rows");
}else{cD.thead.add(cD.lockedHeader).find("tr "+r).prop("checked",false).attr("aria-checked",false).attr("aria-label","Select all rows");
}},_uncheckCheckBoxes:function(){var cD=this;
var cC=cD.table.add(cD.lockedTable);
cC.find("tbody "+r).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row");
},_deselectCheckRows:function(cC){var cD=this;
cC=cD.table.add(cD.lockedTable).find(cC);
if(cD._isLocked()){cC=cC.add(cC.map(function(){return cD._relatedRow(this);
}));
}cC.each(function(){b(this).removeClass(b6).find(r).attr("aria-checked",false).prop("checked",false).attr("aria-label","Select row");
});
cD._toggleHeaderCheckState(false);
cD._persistSelectedRows();
cD.trigger(p);
},_checkRows:function(cC){cC.each(function(){b(this).addClass(b6).find(r).prop("checked",true).attr("aria-label","Deselect row").attr("aria-checked",true);
});
},_persistSelectedRows:function(){var cK=this,cG,cD,cC=cK.items(),cE=cK.dataSource.options,cI=cE.schema,cH,cJ={};
if(!cI||!cI.model||!cK._data){return;
}cH=a6(cI.model)?cI.model.fn.idField:cI.model.id;
if(!cH){return;
}cK.select().each(function(){cD=cK.dataItem(this);
cJ[cD[cH]]=true;
});
for(var cF=0;
cF<cC.length;
cF++){cD=cK.dataItem(cC[cF]);
cG=cD[cH];
if(cJ[cG]){cK._selectedIds[cG]=true;
}else{delete cK._selectedIds[cG];
}}},selectedKeyNames:function(){var cE=this,cC=[];
for(var cD in cE._selectedIds){cC.push(cD);
}cC.sort();
return cC;
},_updateCurrentAttr:function(cC,cE){var cD=b(cC).data("headerId");
b(cC).removeClass(aw).closest("table").removeAttr("aria-activedescendant");
if(cD){cD=cD.replace(this._cellId,"");
b(cC).attr("id",cD);
}else{b(cC).removeAttr("id");
}cE.data("headerId",cE.attr("id")).attr("id",this._cellId).addClass(aw).closest("table").attr("aria-activedescendant",this._cellId);
this._current=cE;
},_scrollCurrent:function(){var cC=this._current;
var cH=this.options.scrollable;
if(!cC||!cH){return;
}var cF=cC.parent();
var cJ=cF.closest("table").parent();
var cE=cJ.is(".k-grid-content-locked,.k-grid-header-locked");
var cD=cJ.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");
var cI=b(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];
if(cD){if(cH.virtual){var cG=Math.max(aW(cF[0],this._items(cF.parent())),0);
this._rowVirtualIndex=this.virtualScrollable.itemIndex(cG);
this.virtualScrollable.scrollIntoView(cF);
}else{this._scrollTo(this._relatedRow(cF)[0],cI);
}}if(this.lockedContent){this.lockedContent[0].scrollTop=cI.scrollTop;
}if(!cE){this._scrollTo(cC[0],cI);
}},current:function(cC){return this._setCurrent(cC,true);
},_setCurrent:function(cD,cF,cE){var cC=this._current;
cD=b(cD);
if(cD.length){if(!cC||cC[0]!==cD[0]){this._updateCurrentAttr(cC,cD);
if(!cE){this._scrollCurrent();
}if(!cF){this.trigger(bA,{element:cD});
}}}if(cD&&cD.length){this._lastCellIndex=cD.parent().children(U).index(cD);
}return this._current;
},_removeCurrent:function(){if(this._current){this._current.removeClass(aw);
this._current=null;
}},_scrollTo:function(cG,cD){var cJ=cG.tagName.toLowerCase();
var cM=cJ==="td"||cJ==="th";
var cH=cG[cM?"offsetLeft":"offsetTop"];
var cI=cG[cM?"offsetWidth":"offsetHeight"];
var cF=cD[cM?"scrollLeft":"scrollTop"];
var cE=cD[cM?"clientWidth":"clientHeight"];
var cC=cH+cI;
var cN=0;
var cL=0;
var cK=0;
if(bf&&cM){var cO=b(cG).closest("table")[0];
if(m.msie){cL=cO.offsetLeft;
}else{if(m.mozilla){cK=cO.offsetLeft-bk.support.scrollbar();
}}}cF=Math.abs(cF+cL-cK);
if(cF>cH){cN=cH;
}else{if(cC>cF+cE){if(cI<=cE){cN=cC-cE;
}else{cN=cH;
}}else{cN=cF;
}}cN=Math.abs(cN+cL)+cK;
cD[cM?"scrollLeft":"scrollTop"]=cN;
},_navigatable:function(){var cF=this;
if(!cF.options.navigatable){return;
}var cC=cF.table.add(cF.lockedTable);
var cD=cF.thead.parent().add(b(">table",cF.lockedHeader));
var cE=cC;
if(cF.options.scrollable){cE=cE.add(cD);
cD.attr(ci,-1);
}this._navigatableTables=cE;
cE.off("mousedown"+bJ+" focus"+bJ+" focusout"+bJ+" keydown"+bJ);
cD.on("keydown"+bJ,bT(cF._openHeaderMenu,cF)).find("a.k-link").attr("tabIndex",-1);
cC.attr(ci,bu.max(cC.attr(ci)||0,0)).on("keydown"+bJ,".k-detail-cell",function(cG){if(cG.target!==cG.currentTarget){cG.stopImmediatePropagation();
}});
cE.on(bk.support.touch?"touchstart"+bJ:"mousedown"+bJ,bB+">"+bz,bT(cj,cF)).on("focus"+bJ,bT(cF._tableFocus,cF)).on("focusout"+bJ,bT(cF._tableBlur,cF)).on("keydown"+bJ,bT(cF._tableKeyDown,cF));
},_openHeaderMenu:function(cC){if(cC.altKey&&cC.keyCode==bl.DOWN){this.current().find(".k-grid-filter, .k-header-column-menu").click();
cC.stopImmediatePropagation();
}},_setTabIndex:function(cC){this._navigatableTables.attr(ci,-1);
cC.attr(ci,0);
},_tableFocus:function(cD){var cC=this.current();
var cE=b(cD.currentTarget);
if(cC&&cC.is(":visible")){cC.addClass(aw);
}else{this._setCurrent(cE.find(ar));
}this._setTabIndex(cE);
},_tableBlur:function(){var cC=this.current();
if(cC){cC.removeClass(aw);
}},_tableKeyDown:function(cE){var cD=this.current();
var cG=this.virtualScrollable&&this.virtualScrollable.fetching();
var cH=b(cE.target);
var cC=!cE.isDefaultPrevented()&&!cH.is(":button,a,:input,a>.k-icon");
if(cG){cE.preventDefault();
return;
}cD=cD?cD:b(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(ar);
if(!cD.length){return;
}var cF=false;
if(cC&&cE.keyCode==bl.UP){cF=this._moveUp(cD,cE.shiftKey);
}if(cC&&cE.keyCode==bl.DOWN){cF=this._moveDown(cD,cE.shiftKey);
}if(cC&&cE.keyCode==(bf?bl.LEFT:bl.RIGHT)){cF=this._moveRight(cD,cE.altKey,cE.shiftKey,cE.ctrlKey,cE.currentTarget);
}if(cC&&cE.keyCode==(bf?bl.RIGHT:bl.LEFT)){cF=this._moveLeft(cD,cE.altKey,cE.shiftKey,cE.ctrlKey,cE.currentTarget);
}if(cC&&cE.keyCode==bl.PAGEDOWN){cF=this._handlePageDown();
}if(cC&&cE.keyCode==bl.PAGEUP){cF=this._handlePageUp();
}if(cC&&cE.keyCode==bl.HOME){cF=this._handleHome(cD,cE.ctrlKey);
}if(cC&&cE.keyCode==bl.END){cF=this._handleEnd(cD,cE.ctrlKey);
}if(cC&&cE.keyCode==bl.SPACEBAR){cF=this._handleSpaceKey(cD,cE.ctrlKey);
}if(cE.keyCode==bl.ENTER||cE.keyCode==bl.F2){cF=this._handleEnterKey(cD,cE.currentTarget,cH);
}if(cE.keyCode==bl.ESC){cF=this._handleEscKey(cD,cE.currentTarget);
}if(cE.keyCode==bl.TAB){cF=this._handleTabKey(cD,cE.currentTarget,cE.shiftKey);
}if(cF){cE.preventDefault();
cE.stopPropagation();
}},_moveLeft:function(cF,cC,cK,cE,cG){var cI,cH;
var cJ=cF.parent();
var cD=cJ.parent();
if(cC){this.collapseRow(cJ);
}else{if(cE&&cF.is(".k-header")&&this.options.reorderable){this._moveColumn(cF,true);
}else{cH=cD.find(bB).index(cJ);
cI=this._prevHorizontalCell(cD,cF,cH);
if(!cI[0]){if(cK){if(this.lockedTable){cI=this._relatedRow(cJ);
if(b.contains(this.lockedTable[0],cJ[0])){cI=cI.prevAll(bj+":first");
}cI=cI.children(U+":last");
}else{cI=this._tabNext(cF,cG,true);
}}else{cD=this._horizontalContainer(cD);
cI=this._prevHorizontalCell(cD,cF,cH);
if(cI[0]!==cF[0]){ax(cD.parent(),true);
}}}this._setCurrent(cI);
}}return true;
},_moveRight:function(cF,cC,cK,cE,cG){var cI,cH;
var cJ=cF.parent();
var cD=cJ.parent();
if(cC){this.expandRow(cJ);
}else{if(cE&&cF.is(".k-header")&&this.options.reorderable){this._moveColumn(cF,false);
}else{cH=cD.find(bB).index(cJ);
cI=this._nextHorizontalCell(cD,cF,cH);
if(!cI[0]){if(cK){if(this.lockedTable){cI=this._relatedRow(cJ);
if(b.contains(this.table[0],cJ[0])){cI=cI.nextAll(bj+":first");
}cI=cI.children(U+":first");
}else{cI=this._tabNext(cF,cG,false);
}}else{cD=this._horizontalContainer(cD,true);
cI=this._nextHorizontalCell(cD,cF,cH);
if(cI[0]!==cF[0]){ax(cD.parent(),true);
}}}this._setCurrent(cI);
}}return true;
},_moveUp:function(cD,cF){var cC=cD.parent().parent();
var cE;
if(cF){cE=cD.parent();
cE=cE.prevAll(bj+":first");
cE=cD.parent().is(bj)?cE.children().eq(cD.index()):cE.children(U+":last");
}else{cE=this._prevVerticalCell(cC,cD);
if(!cE[0]){this._lastCellIndex=0;
cC=this._verticalContainer(cC,true);
cE=this._prevVerticalCell(cC,cD);
if(cE[0]){ax(cC.parent(),true);
}}}var cG=this._lastCellIndex||0;
this._setCurrent(cE);
this._lastCellIndex=cG;
return true;
},_moveDown:function(cD,cF){var cC=cD.parent().parent();
var cE;
if(cF){cE=cD.parent();
cE=cE.nextAll(bj+":first");
cE=cD.parent().is(bj)?cE.children().eq(cD.index()):cE.children(U+":first");
}else{cE=this._nextVerticalCell(cC,cD);
if(!cE[0]){this._lastCellIndex=0;
cC=this._verticalContainer(cC);
cE=this._nextVerticalCell(cC,cD);
if(cE[0]){ax(cC.parent(),true);
}}}var cG=this._lastCellIndex||0;
this._setCurrent(cE);
this._lastCellIndex=cG;
return true;
},_moveColumn:function(cE,cG){var cF=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible");
var cD=cw(au(this.columns));
var cJ=cF.index(b(cE));
var cI=cG?-1:1;
var cC=cD[cJ];
var cH=cl(cD,this.columns,cJ,cJ+cI);
if(cH>=0){this.reorderColumn(cH,cC,cG);
}},_handleHome:function(cD,cC){var cH=cD.parent();
var cI=cH.parent();
var cF=this.lockedTable&&this.lockedTable.children("tbody")[0]===cI[0];
var cE=cI[0]===this.tbody[0];
var cG;
if(cC){if(this.lockedTable){cG=this.lockedTable.find(aq+">"+bz+":first");
}else{cG=this.table.find(aq+">"+bz+":first");
}}else{if(cE||cF){if(cE&&this.lockedTable){cH=this._relatedRow(cH);
}cG=cH.children(U+":first");
}}if(cG&&cG.length){this._setCurrent(cG);
return true;
}},_handleEnd:function(cD,cC){var cH=cD.parent();
var cI=cH.parent();
var cF=this.lockedTable&&this.lockedTable.children("tbody")[0]===cI[0];
var cE=cI[0]===this.tbody[0];
var cG;
if(cC){cG=this.table.find(bm+">"+bz+":last");
}else{if(cE||cF){if(!cE&&this.lockedTable){cH=this._relatedRow(cH);
}cG=cH.children(U+":last");
}}if(cG&&cG.length){this._setCurrent(cG);
return true;
}},_handlePageDown:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()+1);
return true;
},_handlePageUp:function(){if(!this.options.pageable){return false;
}this.dataSource.page(this.dataSource.page()-1);
return true;
},_handleTabKey:function(cD,cE,cG){var cF=this.options.editable&&this._editMode()=="incell";
var cC;
if(!cF||cD.is("th")){return false;
}cC=b(c()).closest(".k-edit-cell");
if(cC[0]&&cC[0]!==cD[0]){cD=cC;
}cC=this._tabNext(cD,cE,cG);
if(cC.length){this._handleEditing(cD,cC,cC.closest("table"));
return true;
}return false;
},_handleEscKey:function(cD,cF){var cC=c();
var cG=this._editMode()=="incell";
if(!bb(cD)){if(cD.has(cC).length){ax(cF,true);
return true;
}return false;
}if(cG){this.closeCell(true);
}else{var cE=b(cD).parent().index();
if(cC){cC.blur();
}this.cancelRow(true);
if(cE>=0){this._setCurrent(this.items().eq(cE).children(bz).first());
}}if(m.msie&&m.version<9){document.body.focus();
}ax(cF,true);
return true;
},_toggleCurrent:function(cC,cD){var cE=cC.parent();
if(cE.is(".k-grouping-row")){cE.find(".k-icon:first").click();
return true;
}if(!cD&&cE.is(".k-master-row")){cE.find(".k-icon:first").click();
return true;
}return false;
},_handleSpaceKey:function(cE,cD){var cI=this;
if(!cD||!cI.groupable||!cE.hasClass("k-header")){return;
}var cF=cI.groupable.descriptors();
var cG=cE.attr(bk.attr("field"));
var cC=cI.groupable.aggregates();
var cH=cE.attr(bk.attr("title"))||cG;
if(cI.groupable._canDrag(cE)){cF.push({field:cG,dir:"asc",aggregates:cC||[]});
cH+=" "+cI.options.messages.ungroupHeader;
}else{cF=b.grep(cF,function(cJ){return cJ.field!==cG;
});
cH+=" "+cI.options.messages.groupHeader;
}cE.attr("aria-label",cH);
cI.dataSource.group(cF);
return true;
},_handleEnterKey:function(cD,cE,cI){var cF=this.options.editable&&this.options.editable.update!==false;
var cC=cI.closest("[role=gridcell]");
var cH;
if(!cI.is("table")&&!b.contains(cD[0],cI[0])){cD=cC;
}if(cD.is("th")){cH=cD.find(".k-link");
if(cH.length){cH.click();
}else{cD.find(r).focus();
}return true;
}if(this._toggleCurrent(cD,cF)){return true;
}var cG=cD.find(":kendoFocusable:first");
if(cG[0]&&!cD.hasClass("k-edit-cell")&&cD.hasClass("k-state-focused")){cG.focus();
return true;
}if(cF&&!cI.is(":button,.k-button,textarea")){if(!cC[0]){cC=cD;
}this._handleEditing(cC,false,cE);
return true;
}return false;
},_nextHorizontalCell:function(cI,cD,cF){var cC=cD.nextAll(U);
if(!cC.length){var cH=cI.find(bB);
var cG=cH.index(cD.parent());
if(cG==-1){if(cD.hasClass("k-header")){var cE=[];
bt([br(this.columns)[0]],t(cH.eq(0).children(":visible").first()),cE,0,0);
if(cE[cF]){return cE[cF][0];
}return cD;
}if(cD.parent().hasClass("k-filter-row")){return cH.last().children(U).first();
}return cH.eq(cF).children(U).first();
}}return cC.first();
},_prevHorizontalCell:function(cJ,cE,cG){var cC=cE.prevAll(U);
if(!cC.length){var cI=cJ.find(bB);
var cH=cI.index(cE.parent());
if(cH==-1){if(cE.hasClass("k-header")){var cF=[];
var cD=br(this.columns);
bt([cD[cD.length-1]],t(cI.eq(0).children().last()),cF,0,0);
if(cF[cG]){return cF[cG][0];
}return cE;
}if(cE.parent().hasClass("k-filter-row")){return cI.last().children(U).last();
}return cI.eq(cG).children(U).last();
}}return cC.first();
},_currentDataIndex:function(cF,cC){var cD=cC.attr("data-index");
if(!cD){return cq;
}var cE=br(this.columns).length;
if(cE&&!cF.closest("div").hasClass("k-grid-content-locked")[0]){return cD-cE;
}return cD;
},_prevVerticalCell:function(cD,cE){var cC;
var cG=cE.parent();
var cI=cD.children(bB);
var cH=cI.index(cG);
var cF=this._currentDataIndex(cD,cE);
if(cF||cE.hasClass("k-header")){cC=bR(cE);
return cC.eq(cC.length-2);
}cF=Math.max(cG.children(U).index(cE),this._lastCellIndex||0);
if(cG.hasClass("k-filter-row")){return bo(cD).filter(a1).eq(cF);
}if(cH==-1){cG=cD.find("tr.k-filter-row:visible");
if(!cG[0]){if((this._hasDetails()||cE.parent().find(".k-hierarchy-cell").length)&&cF){cF--;
}return bo(cD).filter(a1).eq(cF);
}}else{cG=cH===0?b():cI.eq(cH-1);
}cC=cG.children(U);
if(cC.length>cF){return cC.eq(cF);
}return cC.eq(0);
},_nextVerticalCell:function(cD,cE){var cC;
var cK=cE.parent();
var cM=cD.children(bB);
var cL=cM.index(cK);
var cI=this._currentDataIndex(cD,cE);
if(cL!=-1&&cI===cq&&cE.hasClass("k-header")){return t(cE).eq(1);
}cI=cI?parseInt(cI,10):cK.children(U).index(cE);
cI=Math.max(cI,this._lastCellIndex||0);
if(cL==-1){cK=cM.eq(0);
if(this._hasDetails()||cK.find(".k-hierarchy-cell").length){cI++;
}}else{cK=cM.eq(cL+cE[0].rowSpan);
}var cN=cI;
if(this._currentDataIndex(cD,cE)!==cq){var cF=cK.children(":not(.k-group-cell):not(.k-hierarchy-cell)");
var cG=cF.filter(":hidden");
for(var cH=0,cJ=cG.length;
cH<cJ;
cH++){if(cF.index(cG[cH])<cI){cN--;
}}}cI=cN;
cC=cK.children(U);
if(cC.length>cI){return cC.eq(cI);
}return cC.eq(0);
},_verticalContainer:function(cC,cH){var cG=cC.parent();
var cE=this._navigatableTables.length;
var cF=Math.floor(cE/2);
var cD=aW(cG[0],this._navigatableTables);
if(cH){cF*=-1;
}cD+=cF;
if(cD>=0||cD<cE){cG=this._navigatableTables.eq(cD);
}return cG.find(cH?">thead":">tbody");
},_horizontalContainer:function(cC,cF){var cE=this._navigatableTables.length;
if(cE<=2){return cC;
}var cG=cC.parent();
var cD=aW(cG[0],this._navigatableTables);
cD+=cF?1:-1;
if(cF&&(cD==2||cD==cE)){return cC;
}if(!cF&&(cD==1||cD<0)){return cC;
}return this._navigatableTables.eq(cD).find("thead, tbody");
},_tabNext:function(cD,cE,cC){var cG=true;
var cF=cC?cD.prevAll(U+":first"):cD.nextAll(":visible:first");
if(!cF.length){cF=cD.parent();
if(this.lockedTable){cG=cC&&cE==this.lockedTable[0]||!cC&&cE==this.table[0];
cF=this._relatedRow(cF);
}if(cG){cF=cF[cC?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first");
}cF=cF.children(U+(cC?":last":":first"));
}return cF;
},_handleEditing:function(cD,cK,cM){var cN=this,cC=b(c()),cJ=cN._editMode(),cI=m.msie,cL=cI&&m.version<9,cF=cN._editContainer,cG,cE=cN.options.editable&&cN.options.editable.update!==false,cH;
cM=b(cM);
if(cJ=="incell"){cH=cD.hasClass("k-edit-cell");
}else{cH=cD.parent().hasClass("k-grid-edit-row");
}if(cN.editable){if(b.contains(cF[0],cC[0])){if(m.opera||cL){cC.blur().change().triggerHandler("blur");
}else{cC.blur();
if(cI){cC.blur();
}}}if(!cN.editable){ax(cM);
return;
}if(cN.editable.end()){if(cJ=="incell"){cN.closeCell();
}else{cN.saveRow();
cH=true;
}}else{if(cJ=="incell"){cN._setCurrent(cF);
}else{cN._setCurrent(cF.children().filter(U).first());
}cG=cF.find(":kendoFocusable:first")[0];
if(cG){cG.focus();
}return;
}}if(cK){cN._setCurrent(cK);
}if(cL){document.body.focus();
}ax(cM,true);
if(!cE){return;
}if(!cH&&!cK||cK){if(cJ===aX){if(!b(cN.current()).hasClass(aU)){cN.editCell(cN.current());
}}else{cN.editRow(cN.current().parent());
}}},_wrapper:function(){var cE=this,cD=cE.table,cC=cE.options.height,cF=cE.element;
if(!cF.is("div")){cF=cF.wrap("<div/>").parent();
}cE.wrapper=cF.addClass("k-grid k-widget k-display-block");
if(cC){cE.wrapper.css(aQ,cC);
cD.css(aQ,"auto");
}cE._initMobile();
},_initMobile:function(){var cD=this.options;
var cE=this;
this._isMobile=cD.mobile===true&&bk.support.mobileOS||cD.mobile==="phone"||cD.mobile==="tablet";
if(this._isMobile){var cC=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+bk.ns+'stretch="true" data-'+bk.ns+'role="view" data-'+bk.ns+'init-widgets="false"></div>').parent();
this.pane=this._createPane(cC);
this.view=this.pane.view();
if(cD.height){this.pane.element.parent().css(aQ,cD.height);
}else{this.pane.element.parent().css(aQ,this.wrapper[0].style.height);
}this._editAnimation="slide";
cE.wrapper.on("transitionend"+bJ,function(cF){cF.stopPropagation();
});
cE.wrapper.on("contextmenu"+bJ,"th a",function(cF){cF.preventDefault();
return false;
});
this.view.bind("showStart",function(){if(cE._isLocked()){cE._updateTablesWidth();
cE._applyLockedContainersWidth();
cE._syncLockedContentHeight();
cE._syncLockedHeaderHeight();
cE._syncLockedFooterHeight();
}});
}},_createPane:function(cC){var cD=bk.Pane.wrap(cC,{viewEngine:{viewOptions:{renderOnInit:true,wrap:false,wrapInSections:true,detachOnHide:false,detachOnDestroy:false}}});
return cD;
},_tbody:function(){var cE=this,cC=cE.table,cD;
cD=cC.find(">tbody");
if(!cD.length){cD=b("<tbody/>").appendTo(cC);
}cE.tbody=cD.attr("role","rowgroup");
},_scrollable:function(){var cM=this,cF,cL,cH=cM.options,cJ=cH.scrollable,cE=cJ!==true&&cJ.virtual&&!cM.virtualScrollable,cK=!bk.support.kineticScrollNeeded||cE?bk.support.scrollbar():0,cG;
if(cJ){cF=cM.wrapper.children(".k-grid-header");
if(!cF[0]){cF=b('<div class="k-grid-header" />').insertBefore(cM.table);
}cF.css(bf?"padding-left":"padding-right",cJ.virtual?cK+1:cK);
cL=b('<table role="grid" />');
if(a9){cL.attr("cellspacing",0);
}cL.width(cM.table[0].style.width);
cL.append(cM.thead);
cF.empty().append(b('<div class="k-grid-header-wrap k-auto-scrollable" />').append(cL));
cM.content=cM.table.parent();
if(cM.content.is(".k-virtual-scrollable-wrap, "+ad+u.scrollContainer)){cM.content=cM.content.parent();
}if(!cM.content.is(".k-grid-content, .k-virtual-scrollable-wrap")){cM.content=cM.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent();
}if(cE){cM._createVirtualScrollable();
}cG=cF.children(".k-grid-header-wrap");
cM.scrollables=cG.add(cM.content);
var cD=cM.wrapper.find(".k-grid-footer");
if(cD.length){cM.scrollables=cM.scrollables.add(cD.children(".k-grid-footer-wrap"));
}cG.unbind("scroll"+bJ).bind("scroll"+bJ,function(cO){if(cM._scrollLeft!==this.scrollLeft){cM.scrollables.not(cO.currentTarget).scrollLeft(this.scrollLeft);
}});
if(cJ.virtual){cM.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+bJ).bind("scroll"+bJ,function(){cM.scrollables.scrollLeft(this.scrollLeft);
if(cM.lockedContent){cM.lockedContent[0].scrollTop=this.scrollTop;
}});
}else{var cC=cJ.endless;
var cI=cM.dataSource.options.pageSize;
if(cC){cM._endlessPageSize=cI;
}cM.content.unbind("scroll"+bJ).bind("scroll"+bJ,function(cO){cM._scrollLeft=this.scrollLeft;
cM.scrollables.not(cO.currentTarget).scrollLeft(cM._scrollLeft);
if(cM.lockedContent&&cO.currentTarget==cM.content[0]){cM.lockedContent[0].scrollTop=this.scrollTop;
}if(cC){if(this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!cM._endlessFetchInProgress&&cM._endlessPageSize<cM.dataSource.total()){cM._skipRerenderItemsCount=cM._endlessPageSize;
cM._endlessPageSize=cM._endlessPageSize+cI;
cM.dataSource.options.endless=true;
cM._endlessFetchInProgress=true;
cM.dataSource.pageSize(cM._endlessPageSize);
}}});
var cN=cM.content.data("kendoTouchScroller");
if(cN){cN.destroy();
}cN=bk.touchScroller(cM.content);
if(cN&&cN.movable){cM.touchScroller=cN;
cN.movable.bind("change",function(cO){cM.scrollables.scrollLeft(-cO.sender.x);
if(cM.lockedContent){cM.lockedContent.scrollTop(-cO.sender.y);
}});
cM.one(V,function(cO){cO.sender.wrapper.addClass("k-grid-backface");
});
}}}},_createVirtualScrollable:function(){var cC=this;
if(cC.virtualScrollable){cC.virtualScrollable.destroy();
}cC.virtualScrollable=new cv(cC.content,{dataSource:cC.dataSource,itemHeight:function(){return cC._averageRowHeight();
},page:function(){cC._restoreEditableState();
},scroll:function(){cC._focusEditable();
}});
cC.virtualScrollable.bind(bQ,bT(cC._onVirtualPaging,cC));
},_onVirtualPaging:function(){var cC=this;
cC._cacheEditableState();
if(cC._isVirtualIncellEditable()){cC._shouldClearEditableState=false;
cC.closeCell();
cC._shouldClearEditableState=true;
}},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable();
},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===aY;
},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===aX;
},_isVirtualPopupEditable:function(){return this.virtualScrollable&&this._editMode()==="popup";
},_scrollVirtualWrapper:function(){var cD=this;
var cC=cD.virtualScrollable;
if(cD._isVirtualInlineEditable()||cD._isVirtualIncellEditable()){if(cC._isScrolledToBottom()){cC._scrollWrapperToBottom();
}else{if(cC._isScrolledToTop()){cC._scrollWrapperToTop();
}}}},_scrollVirtualWrapperOnColumnResize:function(){var cC=this.virtualScrollable;
if(cC){cC._scrollWrapperOnColumnResize();
}},_restoreEditableState:function(){var cJ=this;
var cE=cJ._editableState||{};
var cF=cE.model;
var cD=cJ.dataSource;
var cH=cJ._isVirtualInlineEditable();
var cG=cJ._isVirtualIncellEditable();
var cI;
var cC;
if((cH||cG)&&cF&&cD._getByUid(cF.uid,cD.view())){if(cH){cJ._shouldClearEditableState=false;
cJ.editRow(cF);
cJ._focusEditable();
}else{if(cG){cI=cJ.tbody.children(j(cr,cF.uid));
cC=b(cI).children(j(aj,cE.field));
if(cC[0]){cJ._shouldClearEditableState=false;
cJ.editCell(cC);
cJ._focusEditable();
}}}}cJ._shouldClearEditableState=true;
},_focusEditable:function(){var cE=this;
var cD=(cE._editableState||{}).field;
var cC=cE._editContainer;
if(cC&&!Q(cC[0],c())&&cE._canFocusEditable()){if(cE._isVirtualInlineEditable()){cC.find(j(P,cD)).find(av).eq(0).focus();
}else{if(cE._isVirtualIncellEditable()){cC.find(av).eq(0).focus();
}}}},_canFocusEditable:function(){var cC=this;
return(cC._isVirtualIncellEditable()||cC._isVirtualInlineEditable())&&cC.virtualScrollable._isElementVisible(cC._editContainer);
},_cacheEditableState:function(){var cH=this;
var cD=cH._editContainer;
var cE=cD?cH._modelForContainer(cD):null;
var cG=cH._isVirtualInlineEditable();
var cF=cH._isVirtualIncellEditable();
var cC;
var cI;
if((cG||cF)&&cE){cH._clearEditableState();
cC=b(c());
if(cD&&cC[0]&&Q(cD[0],cC[0])){cC.change();
cI=bk.widgetInstance(cC,bk.ui);
if(cI&&a6(cI.value)&&cC.is(aZ)){cI.value(cC.val());
cI.trigger(p);
}}if(cG){cH._editableState={model:cE,field:cC.closest("["+bk.attr(P)+"]").attr(bk.attr(P))};
}else{if(cF){cH._editableState={model:cE,field:cD.attr(bk.attr(aj))};
}}}},_clearEditableState:function(){var cC=this;
if(cC.virtualScrollable){cC._editableState=null;
}},_destroyVirtualScrollable:function(){var cC=this;
cC._clearEditableState();
if(cC.virtualScrollable&&cC.virtualScrollable.element){cC.virtualScrollable.destroy();
}cC.virtualScrollable=null;
},_renderNoRecordsContent:function(){var cD=this;
if(cD.options.noRecords){var cC=cD.table.parent().children("."+bF);
if(cC.length){cD.angular("cleanup",function(){return{elements:cC.get()};
});
cC.remove();
}if(!cD.dataSource||!cD.dataSource.view().length){cC=b(cD.noRecordsTemplate({})).insertAfter(cD.table);
cD.angular("compile",function(){return{elements:cC.get(),data:[{}]};
});
}}},_setContentWidth:function(cG){var cH=this,cE="k-grid-content-expander",cD='<div class="'+cE+'"></div>',cF=cH.resizable,cC;
if(cH.options.scrollable&&cH.wrapper.is(":visible")){cC=cH.table.parent().children("."+cE);
cH._setContentWidthHandler=bT(cH._setContentWidth,cH);
if(!cH.dataSource||!cH.dataSource.view().length){if(!cC[0]){cC=b(cD).appendTo(cH.table.parent());
if(cF){cF.bind("resize",cH._setContentWidthHandler);
}}if(cH.thead){cC.width(cH.thead.width());
if(!isNaN(parseFloat(cG,10))){cH.content.scrollLeft(cG);
}}}else{if(cC[0]){cC.remove();
if(cF){cF.unbind("resize",cH._setContentWidthHandler);
}}}cH._applyLockedContainersWidth();
cH._syncLockedContentHeight();
if(cH.lockedHeader&&cH.table[0].clientWidth===0){cH.table[0].style.width="1px";
}}},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var cG=this.thead.parent(),cH=cG.parent(),cD=this.wrapper[0].clientWidth,cF=this._groups(),cK=bk.support.scrollbar(),cC=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),cI=cG.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),cL=J(cC),cJ=J(cI),cE;
if(cF>0){cL+=bN(this.lockedHeader.find(".k-group-cell:first"))*cF;
}if(cL>=cD){cL=cD-3*cK;
}this.lockedHeader.add(this.lockedContent).width(cL);
cH[0].style.width=cH.parent().width()-cL-2+"px";
cG.add(this.table).width(cJ);
if(this.virtualScrollable&&!a8){cD-=cK;
}this.content[0].style.width=cD-cL-2+"px";
if(this.lockedFooter&&this.lockedFooter.length){this.lockedFooter.width(cL);
cE=this.footer.find(".k-grid-footer-wrap");
cE[0].style.width=cH[0].clientWidth+"px";
cE.children().first().width(cJ);
}}},_setContentHeight:function(){var cI=this,cF=cI.options,cD,cC=cI.wrapper.children(".k-grid-header"),cH=bk.support.scrollbar();
var cG=(cF.scrollable||{}).height;
if(cF.scrollable&&cI.wrapper.is(":visible")){if(cG&&cI.content[0].style.height===""){cI.content[0].style.height=cG;
}cD=cI.wrapper.innerHeight();
cD-=bM(cC);
if(cI.pager&&cI.pager.element.is(":visible")){cD-=bM(cI.pager.element);
}if(cF.groupable){cD-=bM(cI.wrapper.children(".k-grouping-header"));
}if(cF.toolbar){cD-=bM(cI.wrapper.children(".k-grid-toolbar"));
}if(cI.footerTemplate){cD-=bM(cI.wrapper.children(".k-grid-footer"));
}var cE=function(cJ){var cK,cL;
if(cJ[0].style.height){return true;
}else{cK=cJ.height();
}cJ.height("auto");
cL=cJ.height();
if(cK!=cL){cJ.height("");
return true;
}cJ.height("");
return false;
};
if(cE(cI.wrapper)){if(cD>cH*2){if(cI.lockedContent){cH=cI.table[0].offsetWidth>cI.table.parent()[0].clientWidth?cH:0;
cI.lockedContent.height(cD-cH);
}cI.content.height(cD);
}else{cI.content.height(cH*2+1);
}}}},_averageRowHeight:function(){var cF=this,cD=cF._items(cF.tbody).length,cE=cF._rowHeight;
if(cD===0){return cE;
}if(!cF._rowHeight){cF._rowHeight=cE=bM(cF.table)/cD;
cF._sum=cE;
cF._measures=1;
}var cC=bM(cF.table)/cD;
if(cE!==cC){cF._measures++;
cF._sum+=cC;
cF._rowHeight=cF._sum/cF._measures;
}return cE;
},_dataSource:function(){var cF=this,cD=cF.options,cE,cC=cD.dataSource;
cC=a0(cC)?{data:cC}:cC;
if(be(cC)){ai(cC,{table:cF.table,fields:cF.columns});
cE=cD.pageable;
if(be(cE)&&cE.pageSize!==cq){cC.pageSize=cE.pageSize;
}}if(cF.dataSource&&cF._refreshHandler){cF.dataSource.unbind(p,cF._refreshHandler).unbind(bS,cF._progressHandler).unbind(ag,cF._errorHandler);
}else{cF._refreshHandler=bT(cF.refresh,cF);
cF._progressHandler=bT(cF._requestStart,cF);
cF._errorHandler=bT(cF._error,cF);
}cF.dataSource=W.create(cC).bind(p,cF._refreshHandler).bind(bS,cF._progressHandler).bind(ag,cF._errorHandler);
},_error:function(){this._progress(false);
},_requestStart:function(){this._progress(true);
},_modelChange:function(cG){var cS=this,cR=cS.tbody,cL=cG.model,cO=cS.tbody.find("tr["+bk.attr("uid")+"="+cL.uid+"]"),cN,cD,cF,cI=cO.hasClass("k-alt"),cT,cH=cS._items(cR).index(cO),cJ=cS.lockedContent,cP,cQ,cE,cM,cK;
if(cJ){cN=cS._relatedRow(cO);
}if(cO.add(cN).children(".k-edit-cell").length&&!cS.options.rowTemplate){cO.add(cN).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){cD=b(this);
cF=bn(cS.columns)[cS.cellIndex(cD)];
if(cF.field===cG.field){if(!cD.hasClass("k-edit-cell")){cS._displayCell(cD,cF,cL);
}else{cD.addClass("k-dirty-cell");
}}});
}else{if(!cO.hasClass("k-grid-edit-row")){cQ=b().add(cO);
if(cJ){cT=(cI?cS.lockedAltRowTemplate:cS.lockedRowTemplate)(cL);
cQ=cQ.add(cN);
cN.replaceWith(cT);
}cS.angular("cleanup",function(){return{elements:cQ.get()};
});
cT=(cI?cS.altRowTemplate:cS.rowTemplate)(cL);
cO.replaceWith(cT);
cT=cS._items(cR).eq(cH);
var cC=[{dataItem:cL}];
if(cJ){cO=cO.add(cN);
cN=cS._relatedRow(cT)[0];
f(cT[0],cN);
cT=cT.add(cN);
cC.push({dataItem:cL});
}cS.angular("compile",function(){return{elements:cT.get(),data:cC};
});
cP=cS.options.selectable;
if((cP||cS._checkBoxSelection)&&cO.hasClass("k-state-selected")){cS.select(cT);
}cM=cQ.children(":not(.k-group-cell,.k-hierarchy-cell)");
cE=cT.children(":not(.k-group-cell,.k-hierarchy-cell)");
for(cH=0,cK=cS.columns.length;
cH<cK;
cH++){cF=cS.columns[cH];
cD=cE.eq(cH);
if(cP&&cM.eq(cH).hasClass("k-state-selected")){cD.addClass("k-state-selected");
}}cS.trigger("itemChange",{item:cT,data:cL,ns:cp});
}}},_pageable:function(){var cD=this,cE,cC=cD.options.pageable;
if(cC){cE=cD.wrapper.children("div.k-grid-pager");
if(!cE.length){cE=b('<div class="k-pager-wrap k-grid-pager"/>').appendTo(cD.wrapper);
}if(cD.pager){cD.pager.destroy();
}if(typeof cC==="object"&&cC instanceof bk.ui.Pager){cD.pager=cC;
}else{cD.pager=new bk.ui.Pager(cE,ai({},cC,{dataSource:cD.dataSource}));
}cD.pager.bind("pageChange",function(cF){if(cD.trigger("page",{page:cF.index})){cF.preventDefault();
}});
cD._togglePagerVisibility();
}},_footer:function(){var cJ=this,cC=cJ.dataSource.aggregates(),cG="",cE=cJ.footerTemplate,cI=cJ.options,cF,cD=cJ.footer||cJ.wrapper.find(".k-grid-footer");
if(cE){cG=b(cJ._wrapFooter(cE(cC)));
if(cD.length){var cK=cG;
cJ.angular("cleanup",function(){return{elements:cD.get()};
});
cD.replaceWith(cK);
cD=cJ.footer=cK;
}else{if(cI.scrollable){cD=cJ.footer=cI.pageable?cG.insertBefore(cJ.wrapper.children("div.k-grid-pager")):cG.appendTo(cJ.wrapper);
}else{cD=cJ.footer=cG.insertBefore(cJ.tbody);
}}cJ.angular("compile",function(){return{elements:cD.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:bs(cJ.columns,function(cL){return{column:cL,aggregate:cC[cL.field]};
})};
});
}else{if(cD&&!cJ.footer){cJ.footer=cD;
}}if(cD.length){if(cI.scrollable){cF=cD.attr("tabindex",-1).children(".k-grid-footer-wrap");
cJ.scrollables=b(cJ.scrollables.filter(function(){return !b(this).is(".k-grid-footer-wrap");
}).toArray()).add(cF);
}if(cJ._footerWidth){cD.find("table").css("width",cJ._footerWidth);
}if(cF){var cH=cJ.content.scrollLeft();
if(cI.scrollable!==true&&cI.scrollable.virtual){cH=cJ.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft();
}cF.scrollLeft(cH);
}}if(cJ.lockedContent){cJ._appendLockedColumnFooter();
cJ._applyLockedContainersWidth();
cJ._syncLockedFooterHeight();
}},_wrapFooter:function(cC){var cF=this,cD="",cE=!bk.support.mobileOS?bk.support.scrollbar():0;
if(cF.options.scrollable){cD=b('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(a9?' cellspacing="0"':"")+"><tbody>"+cC+"</tbody></table></div></div>");
cF._appendCols(cD.find("table"));
cD.css(bf?"padding-left":"padding-right",cE);
return cD;
}return'<tfoot class="k-grid-footer">'+cC+"</tfoot>";
},_columnMenu:function(){var cW=this,cQ,cI=bn(cW.columns),cG,cT=cW.options,cH=cT.columnMenu,cR,cU,cJ,cE,cL=aD(cW.columns,function(cX){return cX.columns!==cq;
}).length>0,cO=this._isMobile,cN=function(cX){cW.trigger(B,{field:cX.field,container:cX.container});
},cS=function(cX){cW.trigger(C,{field:cX.field,container:cX.container});
},cF=function(cX){ax(cX.closest("table"),true);
},cV=function(cX){if(cW.trigger("sort",{sort:cX.sort})){cX.preventDefault();
}else{cW._clearEditableState();
if(cW.dataSource.options.endless){cW.dataSource.options.endless=null;
cW._endlessPageSize=cW.dataSource.options.pageSize;
cW.dataSource.pageSize(cW.dataSource.options.pageSize);
}}},cK=function(cX){if(cW.trigger("filter",{filter:cX.filter,field:cX.field})){cX.preventDefault();
}else{cW._clearEditableState();
if(cW.dataSource.options.endless){cW.dataSource.options.endless=null;
cW._endlessPageSize=cW.dataSource.options.pageSize;
cW.dataSource.pageSize(cW.dataSource.options.pageSize);
}}},cC=cT.$angular;
if(cH){if(typeof cH=="boolean"){cH={};
}cW._setColumnsMediaVisibility(cI);
cE=bo(cW.thead);
for(var cM=0,cP=cE.length;
cM<cP;
cM++){cG=cI[cM];
var cD=cE.eq(cM);
if(!cG.command&&(cG.field||cD.attr("data-"+bk.ns+"field"))){cQ=cD.data("kendoColumnMenu");
if(cQ){cQ.destroy();
}cU=cG.sortable!==false&&cH.sortable!==false&&cT.sortable!==false?ai({},cT.sortable,{compare:(cG.sortable||{}).compare}):false;
cJ=cT.filterable&&cG.filterable!==false&&cH.filterable!==false?ai({pane:cW.pane},cT.filterable,cG.filterable):false;
if(cG.filterable&&cG.filterable.dataSource){cJ.forceUnique=false;
cJ.checkSource=cG.filterable.dataSource;
}if(cJ){cJ.format=cG.format;
}cR={dataSource:cW.dataSource,values:cG.values,columns:cH.columns,sortable:cU,filterable:cJ,messages:cH.messages,owner:cW,closeCallback:cF,init:cN,open:cS,pane:cW.pane,sort:cV,filtering:cK,filter:cO?":not(.k-column-active)":"",lockedColumns:!cL&&cG.lockable!==false&&br(cI).length>0};
if(cC){cR.$angular=cC;
}cD.kendoColumnMenu(cR);
}}}},_headerCells:function(){return b(this.thead).find("th").filter(function(){var cC=b(this);
return !cC.hasClass("k-group-cell")&&!cC.hasClass("k-hierarchy-cell");
});
},_filterable:function(){var cP=this,cG=bn(cP.columns),cK,cD,cC,cJ=function(cQ){cP.trigger(al,{field:cQ.field,container:cQ.container});
},cE=function(cQ){ax(cQ.closest("table"),true);
},cI=function(cQ){if(cP.trigger("filter",{filter:cQ.filter,field:cQ.field})){cQ.preventDefault();
}else{cP._clearEditableState();
if(cP.dataSource.options.endless){cP.dataSource.options.endless=null;
cP._endlessPageSize=cP.dataSource.options.pageSize;
cP.dataSource.pageSize(cP.dataSource.options.pageSize);
}}},cL=function(cQ){cP.trigger(am,{field:cQ.field,container:cQ.container});
},cH=cP.options.filterable;
if(cH&&typeof cH.mode==ce&&cH.mode.indexOf("menu")==-1){cH=false;
}if(cH&&!cP.options.columnMenu){cD=bo(cP.thead);
for(var cM=0,cN=cD.length;
cM<cN;
cM++){cC=cD.eq(cM);
if(cG[cM].filterable!==false&&!cG[cM].command&&(cG[cM].field||cC.attr("data-"+bk.ns+"field"))){cK=cC.data("kendoFilterMenu");
if(cK){cK.destroy();
}cK=cC.data("kendoFilterMultiCheck");
if(cK){cK.destroy();
}var cF=cG[cM].filterable;
var cO=ai({},cH,cF,{dataSource:cP.dataSource,values:cG[cM].values,format:cG[cM].format,closeCallback:cE,title:cG[cM].title||cG[cM].field,init:cJ,open:cL,pane:cP.pane,change:cI});
if(cF&&cF.messages){cO.messages=ai(true,{},cH.messages,cF.messages);
}if(cF&&cF.dataSource){cO.forceUnique=false;
cO.checkSource=cF.dataSource;
}if(cF&&cF.multi){cC.kendoFilterMultiCheck(cO);
}else{cC.kendoFilterMenu(cO);
}}}}},_filterRow:function(){var cR=this;
if(!cR._hasFilterRow()){return;
}var cO;
var cC=cR.options.$angular;
var cF=bn(cR.columns),cI=cR.options.filterable,cN=cR.thead.find(".k-filter-row"),cJ=function(cS){if(cR.trigger("filter",{filter:cS.filter,field:cS.field})){cS.preventDefault();
}else{cR._clearEditableState();
if(cR.dataSource.options.endless){cR.dataSource.options.endless=null;
cR._endlessPageSize=cR.dataSource.options.pageSize;
cR.dataSource.pageSize(cR.dataSource.options.pageSize);
}}};
this._updateHeader(this.dataSource.group().length);
for(var cK=0;
cK<cF.length;
cK++){var cP,cE=cF[cK],cM=cR.options.filterable.operators,cG=false,cQ=b("<th/>"),cH=cE.field;
if(cE.hidden){cQ.hide();
}cN.append(cQ);
if(cH&&cE.filterable!==false){var cD=cE.filterable&&cE.filterable.cell||{};
cP=cR.options.dataSource;
if(cP instanceof W){cP=cR.options.dataSource.options;
}var cL=ai(true,{},cI.messages);
if(cE.filterable){ai(true,cL,cE.filterable.messages);
}if(cD.enabled===false){cQ.html("&nbsp;");
continue;
}if(cD.dataSource){cP=cD.dataSource;
cG=true;
}if(cE.filterable&&cE.filterable.operators){cM=cE.filterable.operators;
}cO={column:cE,dataSource:cR.dataSource,suggestDataSource:cP,customDataSource:cG,field:cH,messages:cL,values:cE.values,template:cD.template,delay:cD.delay,inputWidth:cD.inputWidth,suggestionOperator:cD.suggestionOperator,minLength:cD.minLength,dataTextField:cD.dataTextField,operator:cD.operator,operators:cM,showOperators:cD.showOperators,change:cJ};
if(cC){cO.$angular=cC;
}b("<span/>").attr(bk.attr("field"),cH).appendTo(cQ).kendoFilterCell(cO);
}else{cQ.html("&nbsp;");
}}},_sortable:function(){var cL=this,cF=bn(cL.columns),cE,cJ,cC,cI=cL.options.sortable,cK=function(cM){if(cL.trigger("sort",{sort:cM.sort})){cM.preventDefault();
}else{cL._clearEditableState();
}};
if(cI){var cD=bo(cL.thead);
for(var cG=0,cH=cD.length;
cG<cH;
cG++){cE=cF[cG];
if(cE.sortable!==false&&!cE.command&&cE.field){cC=cD.eq(cG);
cJ=cC.data("kendoColumnSorter");
if(cJ){cJ.destroy();
}cC.attr("data-"+bk.ns+"field",cE.field).kendoColumnSorter(ai({},cI,cE.sortable,{dataSource:cL.dataSource,aria:true,filter:":not(.k-column-active)",change:cK}));
}}cD=null;
}},_columns:function(cD){var cK=this,cJ=cK.table,cF,cC=cJ.find("col"),cI,cG=cK.element.find("thead tr"),cE=cK.options.dataSource;
cD=cD.length?cD:bs(cJ.find("th"),function(cR,cO){cR=b(cR);
var cQ=cR.attr(bk.attr("sortable")),cM=cR.attr(bk.attr("filterable")),cT=cR.attr(bk.attr("type")),cN=cR.attr(bk.attr("groupable")),cL=cR.attr(bk.attr("field")),cS=cR.attr(bk.attr("title")),cP=cR.attr(bk.attr("menu"));
if(!cL){cL=cR.text().replace(/\s|[^A-z0-9]/g,"");
}return{field:cL,type:cT,title:cS,sortable:cQ!=="false",filterable:cM!=="false",groupable:cN!=="false",menu:cP,template:cR.attr(bk.attr("template")),width:cC.eq(cO).css("width")};
});
cF=!(cK.table.find("tbody tr").length>0&&(!cE||!cE.transport));
if(cK.options.scrollable){var cH=cD;
cI=br(cD);
cD=bD(cD);
if(cI.length>0&&cD.length===0){throw new Error("There should be at least one non locked column");
}bI(cK.element.find("tr:has(th):first"),cH);
cD=cI.concat(cD);
}if(cG.length&&cD.length){cK._updateColumnIDs(cD,cG.first());
}cK.columns=bH(cD,cF);
if(b.grep(bn(cK.columns),function(cL){return cL.selectable;
}).length){cK._selectedIds={};
cK._checkBoxSelection=true;
cK.wrapper.on(v+bJ,"tbody > tr "+r,bT(cK._checkboxClick,cK));
cK.wrapper.on(v+bJ,"thead > tr "+r,bT(cK._headerCheckboxClick,cK));
}},_updateColumnIDs:function(cC,cG){if(!cC.length){return;
}var cF=cG.find("th");
var cE;
for(var cD=0;
cD<cC.length;
cD++){cE=cF.eq(cD).attr("id");
if(cE){cC[cD].headerAttributes=ai(cC[cD].headerAttributes,{id:cE});
}}this._updateColumnIDs(s(cC),cG.next());
},_headerCheckboxClick:function(cE){var cG=this,cC=b(cE.target),cD=cC.prop("checked"),cF=cC.closest(".k-grid.k-widget").getKendoGrid();
if(cG!==cF){return;
}if(cD){cG.select(cF.items());
}else{cG.clearSelection();
}},_checkboxClick:function(cC){var cF=this,cE=b(cC.target).closest("tr"),cD=!cE.hasClass(b6);
if(cF!==cE.closest(".k-grid.k-widget").getKendoGrid()){return;
}if(cD){cF.select(cE);
}else{cF._deselectCheckRows(cE);
}},_groups:function(){var cC=this.dataSource.group();
return cC?cC.length:0;
},_tmpl:function(cP,cF,cC,cR){var cU=this,cQ=ai({},bk.Template,cU.options.templateSettings),cO=cQ.paramName,cL,cM=cF.length,cT,cS={storage:{},count:0},cE,cV,cK=cU._hasDetails(),cD=[],cJ=cU._groups(),cN=cU.options.navigatable;
var cI=bk.attr("field");
var cH;
var cG="";
if(!cP){cP="<tr";
if(cC){cD.push("k-alt");
}if(cK){cD.push("k-master-row");
}if(cD.length){cP+=' class="'+cD.join(" ")+'"';
}if(cM){cP+=" "+bk.attr("uid")+'="#='+bk.expr("uid",cQ.paramName)+'#"';
}cP+=" role='row'>";
if(cJ>0&&!cR){cP+=aJ(cJ);
}if(cK){cP+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+h+'="'+ah+'" tabindex="-1"></a></td>';
}for(cL=0;
cL<cM;
cL++){cE=cF[cL];
cT=cE.template;
cV=typeof cT;
cH=cE.field;
if(cU._editMode()===aX&&cH){cE.attributes=cE.attributes||{};
if(cU.virtualScrollable){cE.attributes[cI]=cH;
}cG=cU._dirtyCellTemplate(cH,cO);
cE.attributes["class"]=cE.attributes["class"]||"";
if(cE.attributes["class"].indexOf(cG)<0){cE.attributes["class"]+=cG;
}}if(cE.command){cE.attributes=cE.attributes||{};
if(typeof cE.attributes["class"]!=="undefined"){cE.attributes["class"]+=" k-command-cell";
}else{cE.attributes["class"]="k-command-cell";
}}cP+="<td"+cf(cE.attributes);
if(cN){cP+=" aria-describedby='"+cE.headerAttributes.id+"'";
}cP+=" role='gridcell'>";
cP+=cU._cellTmpl(cE,cS);
cP+="</td>";
}cP+="</tr>";
}cP=bk.template(cP,cQ);
if(cS.count>0){return bT(cP,cS.storage);
}return cP;
},_dirtyCellTemplate:function(cD,cE){var cC;
if(cD&&cE){cC=cD.charAt(0)==="["?bk.expr(cD,cE+".dirtyFields"):cE+".dirtyFields['"+cD+"']";
return"#= "+cE+" && "+cE+".dirty && "+cE+".dirtyFields && "+cC+" ? ' k-dirty-cell' : '' #";
}return"";
},_headerCellText:function(cC){var cG=this,cD=ai({},bk.Template,cG.options.templateSettings),cE=cC.headerTemplate,cH=typeof cE,cF=cC.title||cC.field||"";
if(cH===aA){cF=bk.template(cE,cD)({});
}else{if(cH===ce){cF=cE;
}}return cF;
},_cellTmpl:function(cC,cL){var cN=this,cK=ai({},bk.Template,cN.options.templateSettings),cM=cC.template,cJ=cK.paramName,cE=cC.field,cG="",cH,cI,cF=cC.format,cO=typeof cM,cD=cC.values;
if(cC.command){if(a0(cC.command)){for(cH=0,cI=cC.command.length;
cH<cI;
cH++){if(cC.command[cH].visible){cG+=bk.format("#= {0}(data)? '{1}':'' #",cC.command[cH].visible,cN._createButton(cC.command[cH]).replace(cn,"\\#").replace(/'/gi,"\\'"));
}else{cG+=cN._createButton(cC.command[cH]).replace(cn,"\\#");
}}return cG;
}return cN._createButton(cC.command).replace(cn,"\\#");
}if(cC.selectable){return b5;
}cG+=cN._dirtyIndicatorTemplate(cE,cJ);
if(cO===aA){cL.storage["tmpl"+cL.count]=cM;
cG+="#=this.tmpl"+cL.count+"("+cJ+")#";
cL.count++;
}else{if(cO===ce){cG+=cM;
}else{if(cD&&cD.length&&be(cD[0])&&"value" in cD[0]&&cE){cG+="#var v ="+bk.stringify(S(cD)).replace(cn,"\\#")+"#";
cG+="#var f = v[";
if(!cK.useWithBlock){cG+=cJ+".";
}cG+=cE+"]#";
cG+="${f != null ? f : ''}";
}else{cG+=cC.encoded?"#:":"#=";
if(cF){cG+='kendo.format("'+cF.replace(az,"\\$1")+'",';
}if(cE){cE=bk.expr(cE,cJ);
cG+=cE+"==null?'':"+cE;
}else{cG+="''";
}if(cF){cG+=")";
}cG+="#";
}}}return cG;
},_dirtyIndicatorTemplate:function(cD,cE){var cC;
if(cD&&cE){cC=cD.charAt(0)==="["?bk.expr(cD,cE+".dirtyFields"):cE+".dirtyFields['"+cD+"']";
return"#= "+cE+" && "+cE+".dirty && "+cE+".dirtyFields && "+cC+" ? '<span class=\"k-dirty\"></span>' : '' #";
}return"";
},_templates:function(){var cM=this,cL=cM.options,cG=cM.dataSource,cK=cG.group(),cH=cM.footer||cM.wrapper.find(".k-grid-footer"),cC=cG.aggregate(),cD=bn(cM.columns),cF=bn(br(cM.columns)),cE=cL.scrollable?bn(bD(cM.columns)):cD,cI=aD(cw(cF),function(cN,cO){return cN.groupHeaderColumnTemplate&&cO!==0;
}),cJ=aD(cw(cE),function(cN){return cN.groupHeaderColumnTemplate;
});
if(cL.scrollable&&cF.length){if(cL.rowTemplate||cL.altRowTemplate){throw new Error("Having both row template and locked columns is not supported");
}cM.rowTemplate=cM._tmpl(cL.rowTemplate,cE,false,true);
cM.altRowTemplate=cM._tmpl(cL.altRowTemplate||cL.rowTemplate,cE,true,true);
cM.lockedRowTemplate=cM._tmpl(cL.rowTemplate,cF);
cM.lockedAltRowTemplate=cM._tmpl(cL.altRowTemplate||cL.rowTemplate,cF,true);
}else{cM.rowTemplate=cM._tmpl(cL.rowTemplate,cE);
cM.altRowTemplate=cM._tmpl(cL.altRowTemplate||cL.rowTemplate,cE,true);
}if(cM._hasDetails()){cM.detailTemplate=cM._detailTmpl(cL.detailTemplate||"");
}if(cM._group&&!a5(cC)||!a5(cC)&&!cH.length||aD(cD,function(cN){return cN.footerTemplate;
}).length){cM.footerTemplate=cM._footerTmpl(cD,cC,"footerTemplate","k-footer-template");
}if(cK&&aD(cD,function(cN){return cN.groupFooterTemplate;
}).length){cC=b.map(cK,function(cN){return cN.aggregates;
});
cM.groupFooterTemplate=cM._footerTmpl(cE,cC,"groupFooterTemplate","k-group-footer",cF.length);
if(cL.scrollable&&cF.length){cM.lockedGroupFooterTemplate=cM._footerTmpl(cF,cC,"groupFooterTemplate","k-group-footer");
}}if(cK&&(cI.length||cJ.length)){cC=b.map(cK,function(cN){return cN.aggregates;
});
cM.groupHeaderColumnTemplate=cM._groupHeaderTmpl(cw(cE),cC,"groupHeaderColumnTemplate","k-grouping-row",cF.length,cJ);
if(cL.scrollable&&cF.length){cM.lockedGroupHeaderColumnTemplate=cM._groupHeaderTmpl(cw(cF),cC,"groupHeaderColumnTemplate","k-grouping-row",0,cI);
}}else{cM.groupHeaderColumnTemplate=null;
cM.lockedGroupHeaderColumnTemplate=null;
}if(cM.options.noRecords){cM.noRecordsTemplate=cM._noRecordsTmpl();
}},_noRecordsTmpl:function(){var cL='<div class="{0}">{1}</div>';
var cC='<div class="k-grid-norecords-template"{1}>{0}</div>';
var cF=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"";
var cH={storage:{},count:0};
var cG=b.extend({},bk.Template,this.options.templateSettings);
var cE=cG.paramName;
var cI;
var cD="";
var cK;
var cJ;
if(this.options.noRecords.template){cI=this.options.noRecords.template;
}else{cI=bk.format(cC,this.options.messages.noRecords,cF);
}cK=typeof cI;
if(cK==="function"){cH.storage["tmpl"+cH.count]=cI;
cD+="#=this.tmpl"+cH.count+"("+cE+")#";
cH.count++;
}else{if(cK==="string"){cD+=cI;
}}cJ=bk.template(bk.format(cL,bF,cD),cG);
if(cH.count>0){cJ=b.proxy(cJ,cH.storage);
}return cJ;
},_footerTmpl:function(cE,cC,cS,cM,cP){var cT=this,cO=ai({},bk.Template,cT.options.templateSettings),cL=cO.paramName,cI="",cJ,cK,cR,cU,cQ={},cF=0,cN={},cH=cT._groups(),cG=cT.dataSource._emptyAggregates(cC),cD;
cI+='<tr class="'+cM+'">';
if(cH>0&&!cP){cI+=aJ(cH);
}if(cT._hasDetails()){cI+='<td class="k-hierarchy-cell">&nbsp;</td>';
}for(cJ=0,cK=cE.length;
cJ<cK;
cJ++){cD=cE[cJ];
cR=cD[cS];
cU=typeof cR;
cI+="<td"+cf(cD.footerAttributes)+">";
if(cR){if(cU!==aA){cN=cG[cD.field]?ai({},cO,{paramName:cL+"['"+cD.field+"']"}):{};
cR=bk.template(cR,cN);
}cQ["tmpl"+cF]=cR;
cI+="#=this.tmpl"+cF+"("+cL+")#";
cF++;
}else{cI+="&nbsp;";
}cI+="</td>";
}cI+="</tr>";
cI=bk.template(cI,cO);
if(cF>0){return bT(cI,cQ);
}return cI;
},_groupHeaderTmpl:function(cE,cC,cT,cN,cQ,cH){var cU=this,cP=ai({},bk.Template,cU.options.templateSettings),cM=cP.paramName,cJ="",cK,cL,cS,cV,cR={},cF=0,cO={},cG=cU.dataSource._emptyAggregates(cC),cD,cI=cH.length?aW(cH[0],cE):-1;
cJ+='<tr role="row" class="'+cN+'">';
if(!cQ){cJ+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #';
}if(cU._hasDetails()){cJ+='<td class="k-hierarchy-cell">&nbsp;</td>';
}if(cI<0){cJ+=!cQ?aG(cE.length):"";
return;
}if(cI<bv&&cH.length<=1&&!cQ){cJ+=!cQ?aG(cE.length):"";
return bk.template(cJ,cP);
}if(cI<bv){cI=!cQ?1:0;
cJ+=!cQ?aG(cI):"";
}else{cJ+=!cQ?aG(cI):aI(cI);
}for(cK=cI,cL=cE.length;
cK<cL;
cK++){cD=cE[cK];
cS=cD[cT];
cV=typeof cS;
cJ+="<td>";
if(cS){if(cV!==aA){cO=cG[cD.field]?ai({},cP,{paramName:cM+"['"+cD.field+"']"}):{};
cS=bk.template(cS,cO);
}cR["tmpl"+cF]=cS;
cJ+="#=this.tmpl"+cF+"("+cM+")#";
cF++;
}else{cJ+="&nbsp;";
}cJ+="</td>";
}cJ+="</tr>";
cJ=bk.template(cJ,cP);
if(cF>0){return bT(cJ,cR);
}return cJ;
},_detailTmpl:function(cH){var cK=this,cE="",cG=ai({},bk.Template,cK.options.templateSettings),cF=cG.paramName,cJ={},cI=0,cD=cK._groups(),cC=cw(bn(cK.columns)).length,cL=typeof cH;
cE+='<tr class="k-detail-row">';
if(cD>0){cE+=aJ(cD);
}cE+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(cC?' colspan="'+cC+'"':"")+">";
if(cL===aA){cJ["tmpl"+cI]=cH;
cE+="#=this.tmpl"+cI+"("+cF+")#";
cI++;
}else{cE+=cH;
}cE+="</td></tr>";
cE=bk.template(cE,cG);
if(cI>0){return bT(cE,cJ);
}return cE;
},_hasDetails:function(){var cC=this;
return cC.options.detailTemplate!==null||(cC._events[ac]||[]).length;
},_hasFilterRow:function(){var cE=this.options.filterable;
var cF=cE&&typeof cE.mode==ce&&cE.mode.indexOf("row")!=-1;
var cC=this.columns;
var cD=b.grep(cC,function(cG){return cG.filterable===false;
});
if(cC.length&&cD.length==cC.length){cF=false;
}return cF;
},_details:function(){var cC=this;
if(cC.options.scrollable&&cC._hasDetails()&&br(cC.columns).length){throw new Error("Having both detail template and locked columns is not supported");
}cC.table.on(v+bJ,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(cK){var cF=b(this),cG=cF.closest("td.k-hierarchy-cell"),cL=cF.hasClass("k-i-expand"),cN=cF.closest("tr.k-master-row"),cI,cJ=cC.detailTemplate,cH,cM=cC._hasDetails(),cE=cL?w:ah,cD=cL?true:false;
cF.toggleClass("k-i-expand",!cL).toggleClass("k-i-collapse",cL).attr(h,cE);
cG.attr("aria-expanded",cD);
cI=cN.next();
if(cM&&!cI.hasClass("k-detail-row")){cH=cC.dataItem(cN);
cI=b(cJ(cH)).addClass(cN.hasClass("k-alt")?"k-alt":"").insertAfter(cN);
cC.angular("compile",function(){return{elements:cI.get(),data:[{dataItem:cH}]};
});
cC.trigger(ac,{masterRow:cN,detailRow:cI,data:cH,detailCell:cI.find(".k-detail-cell")});
}cC.trigger(cL?ab:aa,{masterRow:cN,detailRow:cI});
cI.toggle(cL);
cK.preventDefault();
return false;
});
},dataItem:function(cH){cH=b(cH)[0];
if(!cH){return null;
}var cG=this.tbody.children(),cC=/k-grouping-row|k-detail-row|k-group-footer/,cE=cH.sectionRowIndex,cF,cD;
cD=cE;
for(cF=0;
cF<cE;
cF++){if(cC.test(cG[cF].className)){cD--;
}}return this._data[cD];
},expandRow:function(cC){b(cC).find("> td .k-i-expand").click();
},collapseRow:function(cC){b(cC).find("> td .k-i-collapse").click();
},_createHeaderCells:function(cC,cL){var cO=this,cG,cN,cM,cF="",cJ,cP,cK=cO.options.messages,cI=bn(cO.columns),cE=cO.dataSource.group(),cD;
for(cG=0,cJ=cC.length;
cG<cJ;
cG++){cN=cC[cG].column||cC[cG];
cM=cO._headerCellText(cN);
cD="";
var cH=aW(cN,cI);
if(cN.selectable){cF+="<th scope='col'"+cf(cN.headerAttributes);
if(cL&&!cC[cG].colSpan){cF+=" rowspan='"+cL+"'";
}if(cH>-1){cF+=bk.attr("index")+"='"+cH+"'";
}cM=cN.headerTemplate?cM:bk.template(b4)({});
cF+=">"+cM+"</th>";
}else{if(cN.command){cF+="<th scope='col'"+cf(cN.headerAttributes);
if(cL&&!cC[cG].colSpan){cF+=" rowspan='"+cL+"'";
}if(cH>-1){cF+=bk.attr("index")+"='"+cH+"'";
}cF+=">"+cM+"</th>";
}else{if(cN.field){cD=bk.attr("field")+"='"+cN.field+"' ";
}cF+="<th scope='col' role='columnheader' "+cD;
cF+=" aria-haspopup='true'";
if(cL&&!cC[cG].colSpan){cF+=" rowspan='"+cL+"'";
}if(cC[cG].colSpan>1){cF+='colspan="'+(cC[cG].colSpan-aS(cN.columns))+'" ';
cF+=bk.attr("colspan")+"='"+cC[cG].colSpan+"'";
}else{if(cC[cG].colSpan===1){cF+=bk.attr("colspan")+"='"+cC[cG].colSpan+"'";
}}if(cN.title){cP=cN.title.replace('"',"&quot;").replace(/'/g,"'");
cF+=bk.attr("title")+'="'+cP+'" ';
}if(cN.groupable!==cq){cF+=bk.attr("groupable")+"='"+cN.groupable+"' ";
}if(a3(cO,cN)){cF+="aria-label='"+(cP||cN.field)+" ";
cF+=a7(cE,cN.field)?cK.ungroupHeader:cK.groupHeader;
cF+="' ";
}if(cN.aggregates&&cN.aggregates.length){cF+=bk.attr("aggregates")+"='"+cN.aggregates+"'";
}if(cH>-1){cF+=bk.attr("index")+"='"+cH+"'";
}cF+=cf(cN.headerAttributes);
cF+=">"+cM+"</th>";
}}}return cF;
},_appendLockedColumnContent:function(){var cG=this.columns,cI,cC=this.table.find("colgroup"),cE=cC.find("col:not(.k-group-col,.k-hierarchy-col)"),cJ,cK=b(),cL=0,cH,cF,cM,cD=0;
for(cI=0,cJ=cG.length;
cI<cJ;
cI++){if(cG[cI].locked){if(bh(cG[cI])){cF=1;
if(cG[cI].columns){cF=bn(cG[cI].columns).length-aS(cG[cI].columns);
}cF=cF||1;
for(cM=0;
cM<cF;
cM++){cK=cK.add(cE.eq(cI+cD+cM-cL));
}cD+=cF-1;
}else{cL++;
}}}cH=b('<div class="k-grid-content-locked"><table'+(a9?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>");
cC.detach();
cH.find("colgroup").append(cK);
cC.insertBefore(this.table.find("tbody"));
this.lockedContent=cH.insertBefore(this.content);
this.lockedTable=cH.children("table");
},_appendLockedColumnFooter:function(){var cL=this;
var cE=cL.footer;
var cC=cE.find(".k-footer-template>td");
var cD=cE.find(".k-grid-footer-wrap>table>colgroup>col");
var cG=b('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>');
var cH,cI;
var cF=cL._groups();
var cJ=b(),cK=b();
cJ=cJ.add(cC.filter(".k-group-cell"));
for(cH=0,cI=bn(br(cL.columns)).length;
cH<cI;
cH++){cJ=cJ.add(cC.eq(cH+cF));
}cK=cK.add(cD.filter(".k-group-col"));
for(cH=0,cI=cw(bn(cy(cL.columns))).length;
cH<cI;
cH++){cK=cK.add(cD.eq(cH+cF));
}cJ.appendTo(cG.find("tr"));
cK.appendTo(cG.find("colgroup"));
cL.lockedFooter=cG.prependTo(cE);
},_appendLockedColumnHeader:function(cJ){var cZ=this,cI=this.columns,cR,cQ,cU,cE,c0,c1,cY,cP,cL,cV=[],cW=0,cG=b(),cO=cZ._hasFilterRow(),cM=0,cN=b(),cC,cT=0,cD=b();
cE=cZ.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)");
cP=cZ.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)");
cL=cZ.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");
var cF=0;
for(cR=0,cU=cI.length;
cR<cU;
cR++){if(cI[cR].locked){cC=cP.eq(cR);
cT=bn(cI[cR].columns||[]).length;
if(bh(cI[cR])){var cH=null;
if(cI[cR].columns){cH=cT-aS(cI[cR].columns);
}cH=cH||1;
for(var cX=0;
cX<cH;
cX++){cG=cG.add(cE.eq(cR+cF+cX-cW));
}cF+=cH-1;
}bt([cI[cR]],t(cC),cV,0,0);
cT=cT||1;
for(var cS=0;
cS<cT;
cS++){cN=cN.add(cL.eq(cM+cS));
}cM+=cT;
}if(cI[cR].columns){cW+=aS(cI[cR].columns);
}if(!bh(cI[cR])){cW++;
}}if(cV.length){cQ='<div class="k-grid-header-locked" style="width:1px"><table'+(a9?' cellspacing="0"':"")+"><colgroup/><thead>";
cQ+=new Array(cV.length+1).join("<tr></tr>");
cQ+=(cO?'<tr class="k-filter-row" />':"")+"</thead></table></div>";
cY=b(cQ);
cE=cY.find("colgroup");
cE.append(cZ.thead.prev().find("col.k-group-col").add(cG));
c0=cY.find("thead tr:not(.k-filter-row)");
for(cR=0,cU=cV.length;
cR<cU;
cR++){cD=co(cV[cR]);
c0.eq(cR).append(cZ.thead.find("tr:eq("+cR+") .k-group-cell").add(cD));
}var cK=bW(this.thead);
if(cV.length<cK){bY(cY,cK-cV.length);
}c1=cY.find(".k-filter-row");
c1.append(cZ.thead.find(".k-filter-row .k-group-cell").add(cN));
this.lockedHeader=cY.prependTo(cJ);
this.thead.find(".k-group-cell").remove();
return true;
}return false;
},_removeLockedContainers:function(){var cC=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);
bk.destroy(cC);
cC.off(bJ).remove();
this.lockedHeader=this.lockedContent=this.lockedFooter=null;
this.selectable=null;
},_thead:function(){var cQ=this,cE=cQ.columns,cH=cQ._hasDetails()&&cE.length,cI=cQ._hasFilterRow(),cN,cM="",cR=cQ.table.find(">thead"),cK=cQ.element.find("thead:first").length>0,cL=cQ.options.messages.expandCollapseColumnHeader,cS;
if(!cR.length){cR=b("<thead/>").insertBefore(cQ.tbody);
}if(cQ.lockedHeader&&cQ.thead){cS=cQ.thead.find("tr:has(th):not(.k-filter-row)").html("");
cS.remove();
cS=b();
cQ._removeLockedContainers();
}else{if(cK){cS=cQ.element.find("thead:first tr:has(th):not(.k-filter-row)");
}else{cS=cQ.element.find("tr:has(th):first");
}}if(!cS.length){cS=cR.children().first();
if(!cS.length){var cO=[{rowSpan:1,cells:[],index:0}];
cQ._prepareColumns(cO,cE);
for(cN=0;
cN<cO.length;
cN++){cM+="<tr>";
if(cH){cM+='<th class="k-hierarchy-cell" scope="col">'+cL+"</th>";
}cM+=cQ._createHeaderCells(cO[cN].cells,cO[cN].rowSpan);
cM+="</tr>";
}cS=b(cM);
}}else{for(cN=0;
cN<cE.length;
cN++){var cD=aW(cE[cN],bn(cE));
var cC=bo(cS.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(cD);
if(cE[cN].hidden&&cD>=0){cC[0].style.display="none";
}}cQ._updateHeadersAttr(s(cE));
}if(cI){var cG=b("<tr/>");
cG.addClass("k-filter-row");
if(cH||cS.find(".k-hierarchy-cell").length){cG.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');
}var cF=(cQ.thead||cR).find(".k-filter-row");
if(cF.length){bk.destroy(cF);
cF.remove();
}cR.append(cG);
}if(!cS.children().length){cM="";
if(cH){cM+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>';
}cM+=cQ._createHeaderCells(cE);
cS.html(cM);
}else{if(cH&&!cS.find(".k-hierarchy-cell")[0]){cS.prepend('<th class="k-hierarchy-cell" scope="col">'+(cL?cL:"&nbsp;")+"</th>");
}}cS.attr("role","row").find("th").addClass("k-header");
if(!cQ.options.scrollable){cR.addClass("k-grid-header");
}cS.find("script").remove().end().prependTo(cR);
if(cQ.thead){cQ._destroyColumnAttachments();
}this.angular("cleanup",function(){return{elements:cR.find("th"+bz).get()};
});
this.angular("compile",function(){return{elements:cR.find(aP).get(),data:bs(cE,function(cT){return{column:cT};
})};
});
cQ.thead=cR.attr("role","rowgroup");
cQ._sortable();
cQ._filterable();
cQ._filterRow();
cQ._scrollable();
cQ._columnMenu();
var cP;
var cJ=this.options.scrollable&&br(this.columns).length;
if(cJ){cP=cQ._appendLockedColumnHeader(cQ.thead.closest(".k-grid-header"));
cQ._appendLockedColumnContent();
cQ.lockedContent.bind("DOMMouseScroll"+bJ+" mousewheel"+bJ,bT(cQ._wheelScroll,cQ));
cQ._updateLockedCols();
}cQ._updateCols();
cQ._updateColumnCellIndex();
cQ._updateFirstColumnClass();
cQ._resizable();
cQ._draggable();
cQ._reorderable();
cQ._updateHeader(cQ._groups());
if(cJ){if(cP){cQ._syncLockedHeaderHeight();
}cQ._applyLockedContainersWidth();
}if(cQ.groupable){cQ._attachGroupable();
}},_retrieveFirstColumn:function(cD,cF){var cE=b();
if(cF.length&&cD[0]){var cC=cD[0];
while(cC.columns&&cC.columns.length){cC=cC.columns[0];
cF=cF.filter(":not(:first())");
}cE=cE.add(cF);
}return cE;
},_updateFirstColumnClass:function(){var cF=this,cC=cF.columns||[],cD=cF._hasDetails()&&cC.length;
if(!cD&&!cF._groups()){var cG=cF.thead.find(">tr:not(.k-filter-row):not(:first)");
cC=bD(cC);
var cE=cF._retrieveFirstColumn(cC,cG);
if(cF._isLocked()){cG=cF.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)");
cC=br(cF.columns);
cE=cE.add(cF._retrieveFirstColumn(cC,cG));
}cE.each(function(){var cH=b(this).find("th");
cH.removeClass("k-first");
cH.eq(0).addClass("k-first");
});
}},_prepareColumns:function(cJ,cE,cG,cH){var cI=cH||cJ[cJ.length-1];
var cD=cJ[cI.index+1];
var cK=0;
for(var cF=0;
cF<cE.length;
cF++){var cC={column:cE[cF],colSpan:0};
cI.cells.push(cC);
if(cE[cF].columns&&cE[cF].columns.length){if(!cD){cD={rowSpan:0,cells:[],index:cJ.length};
cJ.push(cD);
}cC.colSpan=cE[cF].columns.length;
this._prepareColumns(cJ,cE[cF].columns,cC,cD);
cK+=cC.colSpan-1;
cI.rowSpan=cJ.length-cI.index;
}}if(cG){cG.colSpan+=cK;
}},_wheelScroll:function(cE){if(cE.ctrlKey){return;
}var cC=this.content;
if(this.options.scrollable.virtual){cC=this.virtualScrollable.verticalScrollbar;
}var cF=cC.scrollTop(),cD=bk.wheelDeltaY(cE);
if(cD){if(cC[0].scrollHeight>cC[0].clientHeight&&(cC[0].scrollTop<cC[0].scrollHeight-cC[0].clientHeight&&cD<0||cC[0].scrollTop>0&&cD>0)){cE.preventDefault();
}cC.scrollTop(cF+-cD);
}},_isLocked:function(){return this.lockedHeader!=null;
},_updateHeaderCols:function(){var cC=this.thead.parent().add(this.table);
if(this._isLocked()){bG(cC,cx(cz(this.columns)),this._hasDetails(),0);
}else{bG(cC,cx(cw(this.columns)),this._hasDetails(),0);
}},_updateColumnSorters:function(){var cJ=this;
var cD=bo(cJ.thead);
var cF=bn(cJ.columns);
var cE;
var cC;
var cI;
if(!cJ.options.sortable){return;
}for(var cG=0,cH=cD.length;
cG<cH;
cG++){cE=cF[cG];
if(cE.sortable!==false&&!cE.command&&cE.field){cC=cD.eq(cG);
cI=cC.data("kendoColumnSorter");
if(cI){cI.refresh();
}}}},_updateHeadersAttr:function(cC){if(!cC.length){return;
}var cF=this;
for(var cD=0;
cD<cC.length;
cD++){if(cC[cD].headerAttributes){var cE=cF.element.find("[id='"+cC[cD].headerAttributes.id+"']");
cE.attr("headers",cC[cD].headerAttributes.headers);
}}cF._updateHeadersAttr(s(cC));
},_updateCols:function(cC){cC=cC||this.thead.parent().add(this.table);
this._appendCols(cC,this._isLocked());
},_updateLockedCols:function(cC){if(this._isLocked()){cC=cC||this.lockedHeader.find("table").add(this.lockedTable);
bG(cC,cx(cy(this.columns)),this._hasDetails(),this._groups());
}},_appendCols:function(cD,cC){if(cC){bG(cD,cx(cz(this.columns)),this._hasDetails(),0);
}else{bG(cD,cx(cw(this.columns)),this._hasDetails(),this._groups());
}},_autoColumns:function(cE){if(cE&&cE.toJSON){var cF=this,cD,cC;
cE=cE.toJSON();
cC=!(cF.table.find("tbody tr").length>0&&(!cF.dataSource||!cF.dataSource.transport));
for(cD in cE){cF.columns.push({field:cD,encoded:cC,headerAttributes:{id:bk.guid()}});
}cF._thead();
cF._templates();
}},_rowsHtml:function(cD,cI){var cJ=this,cE="",cF,cH=cI.rowTemplate,cC=cI.altRowTemplate,cG;
for(cF=0,cG=cD.length;
cF<cG;
cF++){if(cJ._skipRerenderItemsCount>0){cJ._skipRerenderItemsCount--;
}else{if(cF%2){cE+=cC(cD[cF]);
}else{cE+=cH(cD[cF]);
}}cJ._data.push(cD[cF]);
}return cE;
},_groupData:function(cH,cK,cE){var cL=this,cG=cL._groupAggregatesDefaultObject||{},cI=cH.items,cD=ai({},cG,cH.aggregates),cJ=ai({},{field:cH.field,value:cH.value,items:cI,aggregates:cD},cH.aggregates[cE?cE.field:cH.field]),cF={};
if(!cK){for(var cC in cD){cF[cC]=ai({},cD[cC],{group:{field:cH.field,value:cH.value,items:cI}});
}}return ai({},cF,cJ);
},_groupRowHtml:function(cH,cC,cR,cK,cV,cS,cT){var cX=this,cO="",cP,cQ,cE=cH.field,cD=aD(bn(cX.columns),function(cY){return cY.field==cE;
})[0]||{},cF=cw(cX.columns)[0],cG=cF?cF.groupHeaderColumnTemplate:null,cU=cD.groupHeaderTemplate?cD.groupHeaderTemplate:cG,cW=(cD.title||cE)+": "+ay(cH.value,cD.format,cD.values,cD.encoded),cM=cH.items,cN=cX._groups(),cJ=cV.groupFooterTemplate,cL=cV.groupHeaderColumnTemplate,cI;
if(cV.groupFooterTemplate||cV.groupHeaderColumnTemplate||cD.groupHeaderTemplate){cI=cX._groupData(cH,false,!cD.groupHeaderTemplate&&cw(cX.columns)[0].groupHeaderColumnTemplate?cw(cX.columns)[0]:false);
}if(cU&&!cS){cW=typeof cU===aA?cU(cI):bk.template(cU)(cI);
}if(!cX._skipRerenderItemsCount){if(cL){cO+=cL(ai({},cI,{groupCells:cR,colspan:cN-cR,text:cW}));
}else{cO+=cK(cC,cR,cW);
}}else{cK(cC,cR,cW);
}if(cH.hasSubgroups){for(cP=0,cQ=cM.length;
cP<cQ;
cP++){cO+=cX._groupRowHtml(cM[cP],cS?cC:cC-1,cR+1,cK,cV,cS,cT&&cP===cM.length-1);
}}else{cO+=cX._rowsHtml(cM,cV);
}if(cJ){if(cT){if(!aW(cH.value,cX._skippedGroups)){cX._skippedGroups.push(cH.value);
}}else{if(cX._skippedGroups.length&&cX._skippedGroups[0]===cH.value){cX._skippedGroups.shift();
}if(!cX._skipRerenderItemsCount){cO+=cJ(cI);
}}}return cO;
},collapseGroup:function(cD){var cI,cM=this,cF=cD,cE=this.options.groupable,cL=cE.showFooter,cC=cL?0:1,cJ,cK=b(),cG,cH,cO;
cD=b(cD);
if(this._isLocked()){if(!cD.closest("div").hasClass("k-grid-content-locked")){cK=cD.nextAll("tr");
cD=this.lockedTable.find(">tbody>tr:eq("+cD.index()+")");
}else{cK=this.tbody.children("tr:eq("+cD.index()+")").nextAll("tr");
}}cI=cD.find(".k-group-cell").length;
cD.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse");
cD.find("td[aria-expanded='true']:first").attr("aria-expanded",false).find("a").attr(h,ah);
cD=cD.nextAll("tr");
var cN=[];
for(cG=0,cH=cD.length;
cG<cH;
cG++){cO=cD.eq(cG);
cJ=cO.find(".k-group-cell").length;
if(cO.hasClass("k-grouping-row")){cC++;
}else{if(cO.hasClass("k-group-footer")){cC--;
}}if(cJ<=cI||cO.hasClass("k-group-footer")&&cC<0){break;
}if(cK.length){cN.push(cK[cG]);
}cN.push(cO[0]);
}b(cN).hide();
if(this.options.scrollable.endless&&this.content){clearTimeout(cM._collapseGroupsTimeOut);
cM._collapseGroupsTimeOut=setTimeout(function(){cM.content.scroll();
cM._groupToCollapse=cF;
});
}},expandGroup:function(cD){cD=b(cD);
var cL=this,cK=cL.options.groupable.showFooter,cH,cN,cI,cJ=b(),cF,cG,cC=[],cE=1;
if(this._isLocked()){if(!cD.closest("div").hasClass("k-grid-content-locked")){cJ=cD.nextAll("tr");
cD=this.lockedTable.find(">tbody>tr:eq("+cD.index()+")");
}else{cJ=this.tbody.children("tr:eq("+cD.index()+")").nextAll("tr");
}}cH=cD.find(".k-group-cell").length;
cD.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand");
cD.find("td[aria-expanded='false']:first").attr("aria-expanded",true).find("a").attr(h,w);
cD=cD.nextAll("tr");
for(cF=0,cG=cD.length;
cF<cG;
cF++){cN=cD.eq(cF);
cI=cN.find(".k-group-cell").length;
if(cI<=cH){break;
}if(cI==cH+1&&!cN.hasClass("k-detail-row")){cN.show();
cJ.eq(cF).show();
if(cN.hasClass("k-grouping-row")&&cN.find(".k-icon").hasClass("k-i-collapse")){cL.expandGroup(cN);
}if(cN.hasClass("k-master-row")&&cN.find(".k-icon").hasClass("k-i-collapse")){cN.next().show();
cJ.eq(cF+1).show();
}}if(cN.hasClass("k-grouping-row")){if(cK){cC.push(cN.is(":visible"));
}cE++;
}if(cN.hasClass("k-group-footer")){if(cK){var cM=cC.pop();
cN.toggle(cM);
cJ.eq(cF).toggle(cM);
}if(cE==1){cN.show();
cJ.eq(cF).show();
}else{cE--;
}}}if(cH===0&&cL.options.scrollable.endless&&this._isLocked()){cL._syncLockedContentHeight();
}},_updateHeader:function(cE){var cH=this,cC=cH._isLocked()?cH.lockedHeader.find("thead"):cH.thead,cD=cC.find("tr.k-filter-row").find("th.k-group-cell").length,cF=cC.find("tr:first").find("th.k-group-cell").length,cG=cC.children("tr:not(:first)").filter(function(){return !b(this).children(":visible").length;
});
if(cE>cF){b(new Array(cE-cF+1).join('<th class="k-group-cell k-header" scope="col">'+cH.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(cC.children("tr:not(.k-filter-row)"));
if(cH.element.is(":visible")){cG.find("th.k-group-cell").hide();
}}else{if(cE<cF){cC.find("tr").each(function(){b(this).find("th.k-group-cell").filter(":eq("+cE+"),:gt("+cE+")").remove();
});
}}if(cE>cD){b(new Array(cE-cD+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(cC.find(".k-filter-row"));
}},_firstDataItem:function(cC,cD){if(cC&&cD){if(cC.hasSubgroups){cC=this._firstDataItem(cC.items[0],cD);
}else{cC=cC.items[0];
}}return cC;
},_updateTablesWidth:function(){var cD=this,cC;
if(!cD._isLocked()){return;
}cC=b(">.k-grid-footer>.k-grid-footer-wrap>table",cD.wrapper).add(cD.thead.parent()).add(cD.table);
cD._footerWidth=ck(cC.eq(0));
cC.width(cD._footerWidth);
cC=b(">.k-grid-footer>.k-grid-footer-locked>table",cD.wrapper).add(cD.lockedHeader.find(">table")).add(cD.lockedTable);
cC.width(ck(cC.eq(0)));
},hideColumn:function(cE){var cR=this,cC,cQ,cM,cD,cH,cO,cT=0,cL,cN,cJ=cR.footer||cR.wrapper.find(".k-grid-footer"),cG=cR.columns,cS=cR.lockedHeader?bo(cR.lockedHeader.find(">table>thead")).filter(a1).length:0,cF,cK=aD(bn(cR.columns),function(cU){return cU.groupHeaderColumnTemplate;
});
if(typeof cE=="number"){cE=cG[cE];
}else{if(be(cE)){cE=aD(at(cG),function(cU){return cU===cE;
})[0];
}else{cE=aD(at(cG),function(cU){return cU.field===cE;
})[0];
}}if(!cE||!bh(cE)){return;
}var cP=cR._columnVisibilitySetter(cE);
if(cE.columns&&cE.columns.length){cO=M(cE,cG);
cP(cE,false);
b8(af(b(">table>thead",cR.lockedHeader),cR.thead,">tr:eq("+cO.row+")>th"),cO.cell,false);
for(cM=0;
cM<cE.columns.length;
cM++){this.hideColumn(cE.columns[cM]);
}cR.trigger(y,{column:cE});
return;
}cF=aW(cE,cw(bn(cG)));
cP(cE,false);
cR._setParentsVisibility(cE,false);
cR._templates();
cR._updateCols();
cR._updateLockedCols();
var cI=cR.thead;
cL=cF;
if(cR.lockedHeader&&cS>cF){cI=cR.lockedHeader.find(">table>thead");
}else{cL-=cS;
}cC=bo(cI).filter(a1).eq(cL);
cC[0].style.display="none";
b8(af(b(">table>thead",cR.lockedHeader),cR.thead,">tr.k-filter-row>th"),cF,false);
if(cJ[0]){cR._updateCols(cJ.find(">.k-grid-footer-wrap>table"));
cR._updateLockedCols(cJ.find(">.k-grid-footer-locked>table"));
b8(cJ.find(".k-footer-template>td"),cF,false);
}if(cR.lockedTable&&cS>cF){aT(cR.lockedTable.find(">tbody>tr"),cF);
}else{aT(cR.tbody.children(),cF-cS);
}if(cR.lockedTable){cR._updateTablesWidth();
cR._applyLockedContainersWidth();
cR._syncLockedContentHeight();
cR._syncLockedHeaderHeight();
cR._syncLockedFooterHeight();
}else{cD=cR.thead.prev().find("col");
for(cM=0,cN=cD.length;
cM<cN;
cM+=1){cH=cD[cM].style.width;
if(cH&&cH.indexOf("%")==-1){cT+=parseInt(cH,10);
}else{cT=0;
break;
}}cQ=b(">.k-grid-header table:first,>.k-grid-footer table:first",cR.wrapper).add(cR.table);
cR._footerWidth=null;
if(cT){cQ.each(function(){this.style.width=cT+"px";
});
cR._footerWidth=cT;
cR._setContentWidth();
}if(m.msie&&m.version==8){cQ.css("display","inline-table");
setTimeout(function(){cQ.css("display","table");
},1);
}}cR._updateFirstColumnClass();
if(cK.length>0){cR._renderGroupRows();
}cR.trigger(y,{column:cE});
},_setParentsVisibility:function(cE,cN){var cM=this;
var cF=cM.columns;
var cG;
var cI=[];
var cH;
var cJ;
var cC;
var cD;
var cL=cM._columnVisibilitySetter(cE);
var cK=cN?function(cO){return cw(cO.columns).length&&cO.hidden;
}:function(cO){return !cw(cO.columns).length&&!cO.hidden;
};
if(E(cE,cF,cI)&&cI.length){for(cG=cI.length-1;
cG>=0;
cG--){cH=cI[cG];
cJ=F(cH,cF);
cC=af(b(">table>thead",this.lockedHeader),this.thead,">tr:eq("+cJ.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(cJ.cell);
if(cK(cH)){cL(cH,cN);
cC[0].style.display=cN?"":"none";
}if(cC.filter("["+bk.attr("colspan")+"]").length){cD=parseInt(cC.attr(bk.attr("colspan")),10);
cC[0].colSpan=cD-aS(cH.columns)||1;
}}}},showColumn:function(cE){var cU=this,cN,cO,cC,cT,cV,cM,cR,cI,cD,cH=cU.columns,cK=cU.footer||cU.wrapper.find(".k-grid-footer"),cP=cU.lockedHeader?bo(cU.lockedHeader.find(">table>thead")).length:0,cF,cQ,cG,cL=aD(bn(cU.columns),function(cW){return cW.groupHeaderColumnTemplate;
});
if(typeof cE=="number"){cF=cE;
cE=cH[cE];
}else{if(be(cE)){b.each(at(cH),function(cW,cX){if(cX===cE){cE=cX;
cF=cW;
return false;
}});
}else{b.each(at(cH),function(cW,cX){if(cX.field===cE){cE=cX;
cF=cW;
return false;
}});
}}if(!cE||bh(cE)){return;
}var cS=cU._columnVisibilitySetter(cE);
if(cE.columns&&cE.columns.length){cR=F(cE,cH);
cQ=at(cU.options.columns)[cF];
cS(cE,true);
b8(af(b(">table>thead",cU.lockedHeader),cU.thead,">tr:eq("+cR.row+")>th"),cR.cell,true);
for(cN=0;
cN<cE.columns.length;
cN++){if(!cQ.columns[cN].hidden){this.showColumn(cE.columns[cN]);
}}cU.trigger(I,{column:cE});
return;
}cG=aW(cE,bn(cH));
cS(cE,true);
cU._setParentsVisibility(cE,true);
cU._templates();
cU._updateCols();
cU._updateLockedCols();
var cJ=cU.thead;
cM=cG;
if(cU.lockedHeader&&cP>cG){cJ=cU.lockedHeader.find(">table>thead");
}else{cM-=cP;
}cC=bo(cJ).eq(cM);
cC[0].style.display="";
b8(af(b(">table>thead",cU.lockedHeader),cU.thead,">tr.k-filter-row>th"),cG,true);
if(cK[0]){cU._updateCols(cK.find(">.k-grid-footer-wrap>table"));
cU._updateLockedCols(cK.find(">.k-grid-footer-locked>table"));
b8(cK.find(".k-footer-template>td"),cG,true);
}if(cU.lockedTable&&cP>cG){cd(cU.lockedTable.find(">tbody>tr"),cG);
}else{cd(cU.tbody.children(),cG-cP);
}if(cU.lockedTable){cU._updateTablesWidth();
cU._applyLockedContainersWidth();
cU._syncLockedContentHeight();
cU._syncLockedHeaderHeight();
}else{cT=b(">.k-grid-header table:first,>.k-grid-footer table:first",cU.wrapper).add(cU.table);
if(!cE.width){cT.width("");
}else{cV=0;
cD=cU.thead.prev().find("col");
for(cN=0,cO=cD.length;
cN<cO;
cN+=1){cI=cD[cN].style.width;
if(cI.indexOf("%")>-1){cV=0;
break;
}cV+=parseInt(cI,10);
}cU._footerWidth=null;
if(cV){cT.each(function(){this.style.width=cV+"px";
});
cU._footerWidth=cV;
cU._setContentWidth();
}}}cU._updateFirstColumnClass();
if(cL.length>0){cU._renderGroupRows();
}cU.trigger(I,{column:cE});
},_columnVisibilitySetter:function(cD){var cC=cD||{};
if(bg(cC.media)){return cb;
}else{return ca;
}},_progress:function(cE){var cC=this.element;
var cD=this.options.scrollable&&this.options.scrollable.endless;
if(this._editContainer&&this._editMode()==="popup"){cC=this._editContainer;
}else{if(this.lockedContent||cD){cC=this.wrapper;
}else{if(this.element.is("table")){cC=this.element.parent();
}else{if(this.content&&this.content.length){cC=this.content;
}}}}if(cD&&cE){bk.ui.progress(cC,cE,{height:this.content.height(),top:this.content[0].offsetTop,opacity:true});
}else{bk.ui.progress(cC,cE);
}},_resize:function(cD,cC){this._syncLockedContentHeight();
this._syncLockedHeaderHeight();
if(this.content){this._setContentWidth();
this._setContentHeight();
}if(this.lockedTable){this._syncLockedScroll();
}if(this.virtualScrollable&&(cC||this._rowHeight)){if(cC){this._rowHeight=null;
}this.virtualScrollable.repaintScrollbar();
}if(this.pager&&this.pager.element){this.pager.resize(cC);
}},_isActiveInTable:function(){var cC=c();
if(!cC){return false;
}return this.table[0]===cC||b.contains(this.table[0],cC)||this._isLocked()&&(this.lockedTable[0]===cC||b.contains(this.lockedTable[0],cC));
},refresh:function(cI){var cM=this,cH=cM.dataSource.view(),cL=cM.options.navigatable,cG,cF=b(cM.current()),cK=false,cJ=(cM.dataSource.group()||[]).length,cD=cJ+cx(cw(cM.columns)).length,cE,cC;
if(cI&&cI.action==="itemchange"&&(cM.editable||cM.options.scrollable.endless)){if(this._editMode()!="popup"||this._editMode()==="popup"&&!cM._editableIsClosing){return;
}}if(cI&&cI.action==="remove"&&cM.editable&&cM.editable.options.model&&aW(cM.editable.options.model,cI.items)>-1){cM.editable.options.model.unbind(p,cM._modelChangeHandler);
}cI=cI||{};
if(cM.trigger("dataBinding",{action:cI.action||"rebind",index:cI.index,items:cI.items})){return;
}if(cI.action===cg&&cM._isVirtualEditable()){cM._destroyEditable();
cM._clearEditableState();
}cM._angularItems("cleanup");
if(!cM._endlessFetchInProgress){if(cL&&(cM._isActiveInTable()||cM._editContainer&&cM._editContainer.data("kendoWindow"))){cK=cF.is("th");
cG=cK?cF.parent().children(":not(.k-group-cell)").index(cF[0]):Math.max(cM.cellIndex(cF),0);
}cM._destroyEditable();
}if(cM.options.scrollable&&cM.options.scrollable.endless){clearTimeout(cM._progressTimeOut);
cM._progressTimeOut=setTimeout(function(){if(!cM._endlessFetchInProgress){cM._progress(false);
}},100);
}else{cM._progress(false);
}cM._hideResizeHandle();
cM._data=[];
if(!cM.columns.length){cM._autoColumns(cM._firstDataItem(cH[0],cJ));
cD=cJ+cM.columns.length;
}cM._group=cJ>0||cM._group;
if(cM._group){cM._templates();
cM._updateCols();
cM._updateLockedCols();
cM._updateHeader(cJ);
cM._group=cJ>0;
cM._groupRows=aN(cH);
}if(cM.content){cE=cM.content.scrollLeft();
}cC=cM._skipRerenderItemsCount;
cM._renderContent(cH,cD,cJ);
if(cM.options.scrollable&&cM.options.scrollable.endless&&this.lockedContent){cM._skipRerenderItemsCount=cC;
}cM._renderLockedContent(cH,cD,cJ);
cM._footer();
cM._renderNoRecordsContent();
cM._togglePagerVisibility();
cM._setContentHeight();
cM._setContentWidth(cM.content&&cE);
if(cM.lockedTable){if(cM.options.scrollable.virtual){cM.content.find(">.k-virtual-scrollable-wrap").trigger("scroll");
}else{if(cM.touchScroller){cM.touchScroller.movable.trigger("change");
}else{cM.wrapper.one("scroll",function(cN){cN.stopPropagation();
});
cM.content.trigger("scroll");
}}}if(!cM._endlessFetchInProgress){cM._restoreCurrent(cG,cK);
}if(cM.touchScroller){cM.touchScroller.contentResized();
}if(cM.selectable){cM.selectable.resetTouchEvents();
}cM._muteAngularRebind(function(){cM._angularItems("compile");
});
if(cM._checkBoxSelection){cM._toggleHeaderCheckState(false);
}if(cM.options.persistSelection&&(cM.selectable&&!bk.ui.Selectable.parseOptions(cM.options.selectable).cell||cM._checkBoxSelection)&&cM.items().length){cM._restoreSelection();
}else{cM._selectedIds={};
}cM.trigger(V);
},_restoreCurrent:function(cC,cD){if(cC===cq||cC<0){return;
}this._removeCurrent();
if(cD){this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(cC));
}else{var cF=0;
if(this._rowVirtualIndex){cF=this.virtualScrollable.position(this._rowVirtualIndex);
}else{cC=0;
}var cE=b();
if(this.lockedTable){cE=this.lockedTable.find(">tbody>tr").eq(cF);
}cE=cE.add(this.tbody.children().eq(cF));
var cG=cE.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(cC);
this._setCurrent(cG);
}if(this._current){ax(this._current.closest("table")[0],true);
}},_restoreSelection:function(){var cF=this,cC=cF.items(),cE,cD=a6(cF.dataSource.options.schema.model)?cF.dataSource.options.schema.model.fn.idField:cF.dataSource.options.schema.model.id;
cE=aD(cC,function(cH){var cG=cF.dataItem(cH)[cD];
if(cF._selectedIds[cG]){return cH;
}});
cF.select(cE);
},_angularItems:function(cC){bk.ui.DataBoundWidget.fn._angularItems.call(this,cC);
if(cC==="cleanup"&&(!this.dataSource||!this.dataSource.options.endless)){this._cleanupDetailItems();
}this._angularGroupItems(cC);
this._angularGroupFooterItems(cC);
},_cleanupDetailItems:function(){var cC=this;
if(cC._hasDetails()){cC.angular("cleanup",function(){return{elements:cC.tbody.children(".k-detail-row")};
});
cC.tbody.find(".k-detail-cell").empty();
}},_angularGroupItems:function(cC){var cE=this,cD=cE.tbody;
if(cE.lockedContent){cD=cE.lockedTable.find("tbody");
}if(cE._group){cE.angular(cC,function(){return{elements:cD.children(".k-grouping-row"),data:b.map(aN(cE.dataSource.view()),function(cF){return{dataItem:cF};
})};
});
}},_angularGroupFooterItems:function(cC){var cE=this,cD=cE.tbody;
if(cE.lockedContent){cD=cE.element;
}if(cE._group&&cE.groupFooterTemplate){cE.angular(cC,function(){return{elements:cD.find(".k-group-footer"),data:b.map(aK(cE.dataSource.view()),function(cF){return{dataItem:cF};
})};
});
}},_renderContent:function(cD,cC,cG){var cO=this,cI,cK,cH="",cJ=cO.lockedContent!=null,cE=null,cM,cF,cL=cO.options.scrollable,cN={rowTemplate:cO.rowTemplate,altRowTemplate:cO.altRowTemplate,groupFooterTemplate:cO.groupFooterTemplate,groupHeaderColumnTemplate:cO.groupHeaderColumnTemplate};
if(cL&&cL.endless&&!cO.dataSource.options.endless){cO._skipRerenderItemsCount=0;
if(cO.content){cO.content[0].scrollTop=0;
}}cE=cO._skipRerenderItemsCount>0;
cC=cJ?cC-cx(cy(cO.columns)).length:cC;
if(cG>0){cC=cJ?cC-cG:cC;
if(cO.detailTemplate){cC++;
}if(cO.groupFooterTemplate){cO._groupAggregatesDefaultObject=cO.dataSource.aggregates();
}if(cO.options.scrollable.endless){cF=cO.dataSource.flatView().length;
}for(cI=0,cK=cD.length;
cI<cK;
cI++){if(!cO._skippedGroups){cO._skippedGroups=[];
}cM=cF&&cI===cD.length-1&&cF!==cO.dataSource.total();
cH+=cO._groupRowHtml(cD[cI],cC,0,cJ?aM:aL,cN,cJ,cM);
}}else{cH+=cO._rowsHtml(cD,cN);
}if(cE){cO.tbody.append(cH);
clearTimeout(cO._endlessFetchTimeOut);
cO._endlessFetchTimeOut=setTimeout(function(){if(cO._groupToCollapse){cO.collapseGroup(cO._groupToCollapse);
cO._groupToCollapse=null;
}});
cO._endlessFetchInProgress=null;
}else{cO.tbody=g(cO.tbody,cO.table,cH,this.options.$angular);
}},_renderGroupRows:function(){var cX=this,cG=cX._groupRows,cN=cX.wrapper.find(".k-grouping-row"),cO=cX._groups(),cM,cQ=cX.lockedContent!=null,cE,cC,cJ,cH,cD,cV,cW,cL,cU,cP,cT,cS,cF,cR,cK,cI;
cN.each(function(cY,cZ){cF=b(cZ);
cU=cF.closest("table").parent();
cP=cU.is("."+R);
cE=cP?cx(cw(br(cX.columns))):cx(cw(bD(cX.columns)));
cR=cF.find("."+aH).length;
if(cQ){cM=cP?aL:aM;
cC=cP?cE.length+cO-cR:cE.length;
}else{cM=aL;
cC=cE.length+cO-cR;
}cJ=cY>=cG.length?cG[cY-cG.length]:cG[cY];
cH=cJ.field;
cD=aD(bn(cX.columns),function(c0){return c0.field==cH;
})[0]||{};
cI=!cD.groupHeaderTemplate&&cw(cX.columns)[0].groupHeaderColumnTemplate?cw(cX.columns)[0]:false;
cV=cD.groupHeaderTemplate?cD.groupHeaderTemplate:cw(cX.columns)[0].groupHeaderColumnTemplate;
cW=(cD.title||cH)+": "+ay(cJ.value,cD.format,cD.values,cD.encoded);
cO=cO;
cL=cX._groupData(cJ,false,cI);
cK=cP?cX.lockedGroupHeaderColumnTemplate:cX.groupHeaderColumnTemplate;
if(cV){cW=typeof cV===aA?cV(cL):bk.template(cV)(cL);
}cT=cF.prev().length?cF.prev():cF.parent();
cS=b(cK?cK(ai({},cL,{groupCells:cR,colspan:cO-cR,text:cW})):cM(cC,cR,cW));
if(cT.is("tbody")){cT.prepend(cS);
}else{cT.after(cS);
}cF.remove();
});
},_renderLockedContent:function(cD,cC,cF){var cG="",cH,cI,cE=null,cK={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};
if(this.lockedContent){var cJ=this.lockedTable;
cE=this._skipRerenderItemsCount>0;
if(cF>0){cC=cC-cw(bn(bD(this.columns))).length;
for(cH=0,cI=cD.length;
cH<cI;
cH++){cG+=this._groupRowHtml(cD[cH],cC,0,aL,cK,false,this.options.scrollable.endless&&cH===cD.length-1);
}}else{cG=this._rowsHtml(cD,cK);
}if(cE){cJ.children("tbody").append(cG);
}else{g(cJ.children("tbody"),cJ,cG,this.options.$angular);
}this._syncLockedContentHeight();
}},_togglePagerVisibility:function(){if(this.options.pageable.alwaysVisible===false){this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize());
}},_adjustRowsHeight:function(cM,cN){var cK=cM[0].rows,cH=cK.length,cG,cL=cN[0].rows,cC=cM.add(cN),cD=cC.length,cF=[];
for(cG=0;
cG<cH;
cG++){if(!cL[cG]){break;
}if(cK[cG].style.height){cK[cG].style.height=cL[cG].style.height="";
}}for(cG=0;
cG<cH;
cG++){if(!cL[cG]){break;
}var cI=cK[cG].offsetHeight;
var cJ=cL[cG].offsetHeight;
var cE=0;
if(cI>cJ){cE=cI;
}else{if(cI<cJ){cE=cJ;
}}cF.push(cE);
}for(cG=0;
cG<cD;
cG++){cC[cG].style.display="none";
}for(cG=0;
cG<cH;
cG++){if(cF[cG]){cK[cG].style.height=cL[cG].style.height=cF[cG]+1+"px";
}}for(cG=0;
cG<cD;
cG++){cC[cG].style.display="";
}}});
if(bk.ExcelMixin){bk.ExcelMixin.extend(aE.prototype);
}if(bk.PDFMixin){bk.PDFMixin.extend(aE.prototype);
aE.prototype._drawPDF_autoPageBreak=function(cK){var cI=this;
var cN=new b.Deferred();
var cG=cI.dataSource;
var cC=cI.options.pdf.allPages;
var cJ=cI.wrapper.find('table[role$="grid"] > tbody');
var cF=b("<div>").css({position:"absolute",left:-10000,top:-10000});
var cE=cI.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(cF);
cE.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"});
cE.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"});
cE.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove();
cE.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});
this._initPDFProgress(cK);
var cD=cE.find('table[role$="grid"] > tbody').empty();
var cO=cG.page();
function cM(){if(cC&&cO!==cq){cG.one("change",cH);
cG.page(cO);
}else{cI.refresh();
cH();
}}function cH(){cF.appendTo(document.body);
var cP=b.extend({},cI.options.pdf,{_destructive:true,progress:function(cQ){cK.notify({page:cQ.page,pageNumber:cQ.pageNum,progress:0.5+cQ.pageNum/cQ.totalPages/2,totalPages:cQ.totalPages});
}});
bk.drawing.drawDOM(cE,cP).always(function(){cF.remove();
}).then(function(cQ){cN.resolve(cQ);
}).fail(function(cQ){cN.reject(cQ);
});
}function cL(){var cP=cG.page();
var cQ=cC?cG.totalPages():1;
cD.append(cJ.find("tr"));
if(cP<cQ){cG.page(cP+1);
}else{cG.unbind("change",cL);
cM();
}}if(cC){cG.bind("change",cL);
cG.page(1);
}else{cL();
}return cN.promise();
};
aE.prototype._drawPDF=function(cH){var cG=this;
if(cG.options.pdf.paperSize&&cG.options.pdf.paperSize!="auto"){return cG._drawPDF_autoPageBreak(cH);
}var cJ=new b.Deferred();
var cD=cG.dataSource;
var cC=cG.options.pdf.allPages;
this._initPDFProgress(cH);
var cE=new bk.drawing.Group();
var cK=cD.page();
function cI(){if(cC&&cK!==cq){cD.unbind("change",cF);
cD.one("change",function(){cJ.resolve(cE);
});
cD.page(cK);
}else{cJ.resolve(cE);
}}function cF(){cG._drawPDFShadow({width:cG.wrapper.width()},{avoidLinks:cG.options.pdf.avoidLinks}).done(function(cM){var cN=cD.page();
var cO=cC?cD.totalPages():1;
var cL={page:cM,pageNumber:cN,progress:cN/cO,totalPages:cO};
cH.notify(cL);
cE.append(cL.page);
if(cN<cO){cD.page(cN+1);
}else{cI();
}}).fail(function(cL){cJ.reject(cL);
});
}if(cC){cD.bind("change",cF);
cD.page(1);
}else{cF();
}return cJ.promise();
};
aE.prototype._initPDFProgress=function(cC){var cD=b("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");
cD.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0}));
this.wrapper.append(cD);
var cE=b("<div class='k-loading-pdf-progress'>").appendTo(cD).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");
cC.progress(function(cF){cE.value(cF.progress);
}).always(function(){bk.destroy(cD);
cD.remove();
});
};
}function ch(cF,cG){cF=cF[0];
cG=cG[0];
if(cF.rows.length!==cG.rows.length){var cD=cF.offsetHeight;
var cH=cG.offsetHeight;
var cE;
var cC;
if(cD>cH){cE=cG.rows[cG.rows.length-1];
if(an.test(cE.className)){cE=cG.rows[cG.rows.length-2];
}cC=cD-cH;
}else{cE=cF.rows[cF.rows.length-1];
if(an.test(cE.className)){cE=cF.rows[cF.rows.length-2];
}cC=cH-cD;
}cE.style.height=cE.offsetHeight+cC+"px";
}}function f(cF,cG){var cC;
var cD=cF.offsetHeight;
var cE=cG.offsetHeight;
if(cD>cE){cC=cD+"px";
}else{if(cD<cE){cC=cE+"px";
}}if(cC){cF.style.height=cG.style.height=cC;
}}function aC(cD,cG){var cE,cF,cC;
if(typeof cD===ce&&cD===cG){return cD;
}if(be(cD)&&cD.name===cG){return cD;
}if(a0(cD)){for(cE=0,cF=cD.length;
cE<cF;
cE++){cC=cD[cE];
if(typeof cC===ce&&cC===cG||cC.name===cG){return cC;
}}}return null;
}function ax(cE,cC){if(cC===true){cE=b(cE);
var cD=cE.parent().scrollLeft();
bk.focusElement(cE);
cE.parent().scrollLeft(cD);
}else{b(cE).one("focusin",function(cF){cF.preventDefault();
}).focus();
}}function a3(cD,cC){return cD.options.groupable&&(cC.groupable||cC.groupable===cq);
}function a7(cD,cC){return !!b.grep(cD,function(cE){return cE.field===cC;
}).length;
}function a2(cC,cD){if(!cC.field||cC.selectable){return false;
}if(cD.editable&&!cD.editable(cC.field)){return false;
}if(cC.editable&&!cC.editable(cD)){return false;
}return true;
}function bc(cC){return b(cC).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown");
}function cj(cE){var cD=b(cE.currentTarget),cG=cD.is("th"),cJ=this.table.add(this.lockedTable),cF=this.thead.parent().add(b(">table",this.lockedHeader)),cH=bc(cE.target),cI=b(cE.target).is(".k-checkbox-label, .k-checkbox"),cK=b(cE.target),cC=cD.closest("table")[0];
if(cH&&cD.find(bk.roleSelector("filtercell")).length){this._setCurrent(cD);
return;
}if(cC!==cJ[0]&&cC!==cJ[1]&&cC!==cF[0]&&cC!==cF[1]){return;
}if(cK.is("a.k-i-expand, a.k-i-collapse")){return;
}if(this.options.navigatable){this._setCurrent(cD,false,cI);
}if(cG||!cH){setTimeout(function(){if(!(ba&&b(bk._activeElement()).hasClass("k-widget"))){if(b(bk._activeElement()).is(r)||!bc(bk._activeElement())||!b.contains(cC,bk._activeElement())){ax(cC,true);
}}});
}if(cG&&!bk.support.touch){cE.preventDefault();
}}function bp(cC,cE){if(!cE){return 0;
}var cD=0;
if(bk.support.browser.webkit){cD=cC.width();
}return cD;
}function bb(cC){return cC&&(cC.hasClass("k-edit-cell")||cC.parent().hasClass("k-grid-edit-row"));
}function aG(cC){return'<td colspan="#=data.colspan +'+cC+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+h+'="'+w+'"></a>#=data.text#</p></td>';
}function aI(cC){return'<td colspan="'+cC+'"><p class="k-reset">&nbsp;</p></td>';
}function aL(cC,cD,cE){return'<tr role="row" class="k-grouping-row">'+aJ(cD)+'<td colspan="'+cC+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1" '+h+'="'+w+'"></a>'+cE+"</p></td></tr>";
}function aM(cC){return'<tr role="row" class="k-grouping-row"><td colspan="'+cC+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>';
}cp.plugin(aE);
cp.plugin(cv);
}(window.kendo.jQuery));
return window.kendo;
},typeof define=="function"&&define.amd?define:function(a,b,c){(c||b)();
}));
